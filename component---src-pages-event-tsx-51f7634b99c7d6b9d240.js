(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{RV9o:function(e){e.exports=JSON.parse('[{"label":"Crisis","value":"Crisis"},{"label":"General","value":"General"},{"label":"Monitoring","value":"Monitoring"}]')},nB9M:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return l}));t("91GP");var n=t("q1tI"),r=function(e,a,t){var n;if("undefined"!=typeof window){var r=window.sessionStorage.getItem(e),l=r&&JSON.parse(r);n=l&&a?l[a]:l}return n||t},l=function(e,a){var t=Object(n.useState)((function(){var a,t;if("undefined"!=typeof window){var n=window.sessionStorage.getItem(e);t=n&&JSON.parse(n)}return null!==(a=t)&&void 0!==a?a:{}})),r=t[0],l=t[1];Object(n.useEffect)((function(){window.sessionStorage.setItem(e,JSON.stringify(r))}),[r,e]),Object(n.useEffect)((function(){var a=function(){return window.sessionStorage.removeItem(e)};return window.addEventListener("beforeunload",a),function(){window.removeEventListener("beforeunload",a)}}),[e]);return[a?r[a]:r,function(e){l(a?function(t){var n;return Object.assign({},t,((n={})[a]=e,n))}:e)}]}},o0pm:function(e){e.exports=JSON.parse('[{"label":"","value":"NONE"},{"label":"Authorized","value":"ADEP"},{"label":"Ordered","value":"ODEP"}]')},rZ4P:function(e){e.exports=JSON.parse('[{"label":"Monitoring Group","value":"mg"},{"label":"Working Group","value":"wg"},{"label":"Task Force","value":"tf"}]')},xZ9P:function(e,a,t){"use strict";t.r(a);t("dRSK");var n=t("q1tI"),r=t.n(n),l=t("wd/R"),i=t.n(l),o=t("nB9M"),c=t("GUiF"),s=(t("INYr"),t("Wbzz")),u=t("XZ7F"),d=t("Weur"),v=t("BMxC"),m=t("ggNy"),f=function(e){return r.a.createElement(m.p,{isOpen:e.isOpen,onClose:e.onClose,isCentered:!0,size:"sm"},r.a.createElement(m.t,null,r.a.createElement(m.m,null,"Leave Page?")),r.a.createElement(m.r,null),r.a.createElement(m.q,null,r.a.createElement(m.u,null,"Do you want to leave this page and lose unsaved data?")),r.a.createElement(m.s,null,r.a.createElement(d.a,{align:"center"},r.a.createElement(v.a,{marginRight:"20"},r.a.createElement(m.o,{onClick:e.onLeave},"Leave")),r.a.createElement(m.b,{size:"sm",onClick:e.onClose},"Stay"))))},p=t("wx14"),b=t("Ff2n"),D=t("iuhU"),E=t("H2TA"),g=t("NqtD");function O(e){var a,t,n;return a=e,t=0,n=1,e=(Math.min(Math.max(t,a),n)-t)/(n-t),e=(e-=1)*e*e+1}var h=n.forwardRef((function(e,a){var t,r=e.classes,l=e.className,i=e.color,o=void 0===i?"primary":i,c=e.disableShrink,s=void 0!==c&&c,u=e.size,d=void 0===u?40:u,v=e.style,m=e.thickness,f=void 0===m?3.6:m,E=e.value,h=void 0===E?0:E,y=e.variant,S=void 0===y?"indeterminate":y,C=Object(b.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),x={},T={},I={};if("determinate"===S||"static"===S){var w=2*Math.PI*((44-f)/2);x.strokeDasharray=w.toFixed(3),I["aria-valuenow"]=Math.round(h),"static"===S?(x.strokeDashoffset="".concat(((100-h)/100*w).toFixed(3),"px"),T.transform="rotate(-90deg)"):(x.strokeDashoffset="".concat((t=(100-h)/100,t*t*w).toFixed(3),"px"),T.transform="rotate(".concat((270*O(h/70)).toFixed(3),"deg)"))}return n.createElement("div",Object(p.a)({className:Object(D.a)(r.root,l,"inherit"!==o&&r["color".concat(Object(g.a)(o))],{indeterminate:r.indeterminate,static:r.static}[S]),style:Object(p.a)({width:d,height:d},T,v),ref:a,role:"progressbar"},I,C),n.createElement("svg",{className:r.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},n.createElement("circle",{className:Object(D.a)(r.circle,s&&r.circleDisableShrink,{indeterminate:r.circleIndeterminate,static:r.circleStatic}[S]),style:x,cx:44,cy:44,r:(44-f)/2,fill:"none",strokeWidth:f})))})),y=Object(E.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(h),S=function(){return r.a.createElement(v.a,{color:"clickable"},r.a.createElement(y,{color:"inherit",size:48,thickness:7.5}))},C=function(e){return r.a.createElement(m.p,{isOpen:e.isOpen,onClose:e.onClose,isCentered:!0,size:"sm"},r.a.createElement(m.t,null,r.a.createElement(m.m,null,"Please Wait...")),r.a.createElement(m.q,null,r.a.createElement(d.a,{align:"center"},r.a.createElement(v.a,{color:"clickable"},r.a.createElement(S,null)),r.a.createElement(v.a,{pl:"24"},r.a.createElement(m.u,null,"Saving your information")))))},x=t("NKCw"),T=t("soUV"),I=(t("pIFo"),t("69N/")),w=t("o0pm"),j=function(){var e,a,t=Object(x.d)(),l=t.formState,i=t.errors,o=t.setValue,s=t.getValues,u=Object(n.useRef)(null),d=Object(n.useRef)(null),f=Object(n.useRef)(null),p=Object(n.useRef)(null),b=Object(x.e)({name:"evacStatusCode"}),D=Object(c.e)(),E=D.isCreate,g=D.isView,O=l.dirtyFields;return r.a.createElement(c.c,{title:"Evacuation Details"},r.a.createElement(v.a,{gridColumn:{base:"1 / -1",md:"span 4",lg:"span 3"}},r.a.createElement(m.i,{labelText:"Evacuation Status",labelId:"evacStatusCodeLabel"},r.a.createElement(x.a,{name:"evacStatusCode",onFocus:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,l=e.value;return r.a.createElement(m.v,{ref:u,id:"evacStatusCode",name:"evacStatusCode","aria-labelledby":"evacStatusCodeLabel",options:w,size:"full",placeholder:"",disabled:g,validationState:(null==i?void 0:i.evacStatusCode)?m.A.ERROR:void 0,errorMessage:null==i||null===(a=i.evacStatusCode)||void 0===a?void 0:a.message,onChange:function(e){var a,n=null===(a=e.selectedItem)||void 0===a?void 0:a.value;t(n),"ADEP"!==n||s("evacDepAuthDate")?"ODEP"!==n||s("evacDepOrdDate")?"NONE"===n&&(E&&!O.evacDepOrdDate&&o("evacDepOrdDate",""),E&&!O.evacDepAuthDate&&o("evacDepAuthDate","")):(o("evacDepOrdDate",new Date),E&&!O.evacDepAuthDate&&o("evacDepAuthDate","")):(o("evacDepAuthDate",new Date),E&&!O.evacDepOrdDate&&o("evacDepOrdDate",""))},onBlur:n,value:l})}}))),r.a.createElement(I.a,{gridColumn:{base:"1 / -1",md:"span 4",lg:"span 9"},gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(1,max-content)",md:"repeat(2,max-content)"}},r.a.createElement(m.i,{labelText:"Departure Authorized",labelId:"evacDepAuthDateLabel"},r.a.createElement(x.a,{as:r.a.createElement(m.g,null),id:"evacDepAuthDate",name:"evacDepAuthDate",inputRef:d,onFocus:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.focus()},disabled:g||!b||"ADEP"!==b,maxDate:new Date(2100,0,1),error:void 0!==(null==i?void 0:i.evacDepAuthDate),errorMessage:null==i||null===(e=i.evacDepAuthDate)||void 0===e?void 0:e.message})),r.a.createElement(m.i,{labelText:"Departure Ordered",labelId:"orderedDateLabel"},r.a.createElement(x.a,{as:r.a.createElement(m.g,null),id:"evacDepOrdDate",name:"evacDepOrdDate",inputRef:f,onFocus:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},disabled:g||!b||"ODEP"!==b,maxDate:new Date(2100,0,1),error:void 0!==(null==i?void 0:i.evacDepOrdDate),errorMessage:null==i||null===(a=i.evacDepOrdDate)||void 0===a?void 0:a.message}))),r.a.createElement(v.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},r.a.createElement(m.i,{labelText:"Evacuation Summary",labelId:"evacSummaryLabel"},r.a.createElement(x.a,{name:"evacSummary",rules:{pattern:{value:/^[A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]*$/,message:"Please enter only plain text in the Evacuation Summary field"},maxLength:{value:4e3,message:"Evacuation Summary cannot exceed 4000 characters"}},onFocus:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,l=e.value;return r.a.createElement(m.z,{ref:p,id:"evacSummary",name:"evacSummary","aria-labelledby":"evacSummaryLabel",size:"full",maxLength:4e3,disabled:g,validationState:(null==i?void 0:i.evacSummary)?m.A.ERROR:void 0,errorMessage:null==i||null===(a=i.evacSummary)||void 0===a?void 0:a.message,onChange:function(e){e.target.value=Object(c.d)(e.target.value).replace(/[^A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]/g,""),t(e)},onBlur:n,value:l})}}))))},R=t("/Tr7"),k=t("jIYg");var A=t("rZ4P"),L=t("RV9o"),M=t("wfq5"),z=function(){var e,a,t,l=Object(u.a)(),i=l.isOpen,o=l.onOpen,s=l.onClose,d=Object(x.d)(),f=d.register,p=d.errors,b=d.setValue,D=Object(n.useRef)(null),E=Object(n.useRef)(null),g=Object(n.useRef)(null),O=Object(n.useRef)(null),h=Object(n.useRef)(null),y=Object(x.e)({name:"activeIndicator"}),S=Object(x.e)({name:"eventStartDate"}),C=Object(c.e)(),T=C.isView,w=C.isCreate;return r.a.createElement(c.c,{title:"Event Details",showDivider:!0},r.a.createElement(v.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},r.a.createElement(m.i,{labelText:"Event Title",labelId:"eventTitleLabel",required:!0},r.a.createElement(m.y,{ref:f({required:"Please enter an Event Title",maxLength:{value:25,message:"Event Title cannot exceed 25 characters"}}),name:"eventTitle",id:"eventTitle",size:"full",disabled:T,maxLength:25,validationState:(null==p?void 0:p.eventTitle)?m.A.ERROR:void 0,errorMessage:null==p||null===(e=p.eventTitle)||void 0===e?void 0:e.message,onChange:function(e){e.target.value=e.target.value.replace(/^[^A-Za-z0-9]+/,"")}}))),r.a.createElement(I.a,{gridColumn:{base:"1 / -1"},gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(1,max-content)",md:"repeat(3,max-content)"}},r.a.createElement(m.i,{labelText:"Start Date",labelId:"eventStartDateLabel",required:!0},r.a.createElement(x.a,{as:r.a.createElement(m.g,null),id:"eventStartDate",name:"eventStartDate",rules:{required:"Please enter a Start Date"},inputRef:D,onFocus:function(){var e;return null===(e=D.current)||void 0===e?void 0:e.focus()},maxDate:new Date,disabled:T,error:void 0!==(null==p?void 0:p.eventStartDate),errorMessage:null==p||null===(a=p.eventStartDate)||void 0===a?void 0:a.message})),r.a.createElement(m.i,{labelText:"End Date",labelId:"eventEndDateLabel"},r.a.createElement(x.a,{as:r.a.createElement(m.g,null),id:"eventEndDate",name:"eventEndDate",rules:{validate:{afterStartDate:function(e){return y||function(e,a){Object(k.a)(2,arguments);var t=Object(R.default)(e),n=Object(R.default)(a),r=t.getTime()-n.getTime();return r<0?-1:r>0?1:r}(e,S)>-1||"End Date must be equal to or later than Start Date"}}},inputRef:E,onFocus:function(){var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},minDate:S||void 0,maxDate:new Date(2100,0,1),disabled:!w&&(T||y),error:void 0!==(null==p?void 0:p.eventEndDate),errorMessage:null==p||null===(t=p.eventEndDate)||void 0===t?void 0:t.message})),r.a.createElement(m.i,{labelText:"Active",labelId:"activeIndicatorLabel"},r.a.createElement(m.x,{ref:f(),name:"activeIndicator",id:"activeIndicator",value:"Active",disabled:T,onChange:function(e){e.target.checked?b("eventEndDate",void 0):(b("activeIndicator",!0),o())}}))),r.a.createElement(v.a,{gridColumn:{base:"1 / -1",md:"span 4"}},r.a.createElement(m.i,{labelText:"Management Type",labelId:"managementTypeCodeLabel",required:!0},r.a.createElement(x.a,{name:"managementTypeCode",rules:{required:"Please select a Management Type"},onFocus:function(){var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,l=e.value;return r.a.createElement(m.v,{ref:g,id:"managementTypeCode",name:"managementTypeCode","aria-labelledby":"managementTypeCodeLabel",options:A,size:"full",disabled:T,validationState:(null==p?void 0:p.managementTypeCode)?m.A.ERROR:void 0,errorMessage:null==p||null===(a=p.managementTypeCode)||void 0===a?void 0:a.message,onChange:function(e){var a;t(null===(a=e.selectedItem)||void 0===a?void 0:a.value)},onBlur:n,value:l})}}))),r.a.createElement(v.a,{gridColumn:{base:"1 / -1",md:"span 4"}},r.a.createElement(m.i,{labelText:"Event Type",labelId:"eventTypeIdLabel",required:!0},r.a.createElement(x.a,{name:"eventTypeId",rules:{required:"Please select an Event Type"},onFocus:function(){var e;return null===(e=O.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,l=e.value;return r.a.createElement(m.v,{ref:O,id:"eventTypeId",name:"eventTypeId","aria-labelledby":"eventTypeIdLabel",options:L,size:"full",disabled:T,validationState:(null==p?void 0:p.eventTypeId)?m.A.ERROR:void 0,errorMessage:null==p||null===(a=p.eventTypeId)||void 0===a?void 0:a.message,onChange:function(e){var a;t(null===(a=e.selectedItem)||void 0===a?void 0:a.value)},onBlur:n,value:l})}}))),r.a.createElement(v.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},r.a.createElement(m.i,{labelText:"Event Summary",labelId:"eventSummaryLabel"},r.a.createElement(x.a,{name:"eventSummary",rules:{pattern:{value:/^[A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]*$/,message:"Please enter only plain text in the Event Summary field"},maxLength:{value:4e3,message:"Event Summary cannot exceed 4000 characters"}},onFocus:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,l=e.value;return r.a.createElement(m.z,{ref:h,id:"eventSummary",name:"eventSummary","aria-labelledby":"eventSummaryLabel",size:"full",maxLength:4e3,disabled:T,validationState:(null==p?void 0:p.eventSummary)?m.A.ERROR:void 0,errorMessage:null==p||null===(a=p.eventSummary)||void 0===a?void 0:a.message,onChange:function(e){e.target.value=Object(c.d)(e.target.value).replace(/[^A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]/g,""),t(e)},onBlur:n,value:l})}}))),r.a.createElement(M.a,{isOpen:i,onCancel:s,onConfirm:function(){b("activeIndicator",!1),b("eventEndDate",new Date),s()}}))},F=r.a.createElement(m.a,{status:m.w.success,title:"Save successful!",onClose:function(){return console.log("Banner closed")}}),N=function(e){var a=e.savedEvent,t=Object(c.e)(),l=t.isView,p=t.isEdit,b=Object(u.a)(),D=b.isOpen,E=b.onOpen,g=b.onClose,O=Object(u.a)(),h=O.isOpen,y=O.onOpen,S=O.onClose,I=Object(m.B)(F,2),w=Object(o.b)("ctfForms","events")[1],R={eventId:"OCS"+i()(new Date).format("YYYYDDD")+Math.floor(Math.random()*Math.floor(1e6)),eventTitle:"",eventStartDate:new Date,activeIndicator:!0,managementTypeCode:"mg",eventTypeId:"General",eventSummary:"",evacStatusCode:"NONE",evacSummary:"",lastUpdatedDateTime:new Date},k=Object(x.c)({mode:"onBlur",defaultValues:null!=a?a:R}),A=k.register,L=k.handleSubmit,M=k.getValues,N=Object(n.useCallback)((function(e,a){void 0===a&&(a=!1),e.lastUpdatedDateTime=new Date;var t=Object(o.a)("ctfForms","events",[]);if(p){var n=t.findIndex((function(a){return a.eventId===e.eventId}));t.splice(n,1,e)}else t.push(e);w(t),y(),setTimeout((function(){a||Object(s.a)("/event",{state:{eventId:M("eventId")}}),S(),I()}),2e3)}),[w,p,y,S,I,M]);return r.a.createElement(T.a,{pageTitle:"Event Details",pageHeading:l?"View "+(null==a?void 0:a.eventTitle):p?"Edit "+(null==a?void 0:a.eventTitle):"Create New Event",pageDescription:"Please enter as much information as you have related to this crisis."},r.a.createElement(x.b,k,r.a.createElement(c.b,{name:"eventForm",id:"eventForm",onSubmit:L((function(e){N(e,!1)})),noValidate:!0},r.a.createElement("input",{name:"eventId",type:"hidden",ref:A}),r.a.createElement(z,null),r.a.createElement(j,null),r.a.createElement(d.a,{as:"nav","aria-label":"page",id:"pageNav",gridColumn:"1 / -1",align:"center",justify:{base:"flex-end",md:"flex-start"},marginTop:{md:"72"}},r.a.createElement(v.a,{marginRight:"20"},r.a.createElement(m.o,{type:"button",onClick:l?function(){return Object(s.a)("/")}:E},"Cancel")),r.a.createElement(m.b,{type:l?"button":"submit",size:p?"sm":"md",onClick:l?function(e){e.preventDefault(),Object(s.a)("/event",{state:{eventId:M("eventId"),isEdit:!0}})}:void 0},l?"Edit":p?"Save":"Create Event")),r.a.createElement(f,{isOpen:D,onClose:g,onLeave:function(){return Object(s.a)("/")}}),r.a.createElement(C,{isOpen:h,onClose:S}))))};a.default=function(e){var a,t,n;if(null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.eventId){var l=Object(o.a)("ctfForms","events");(n=l&&l.find((function(a){var t,n;return a.eventId===(null===(t=e.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.eventId)})))&&(n.evacDepAuthDate&&(n.evacDepAuthDate=i()(n.evacDepAuthDate).toDate()),n.evacDepOrdDate&&(n.evacDepOrdDate=i()(n.evacDepOrdDate).toDate()),n.eventStartDate&&(n.eventStartDate=i()(n.eventStartDate).toDate()),n.eventEndDate&&(n.eventEndDate=i()(n.eventEndDate).toDate()),n.lastUpdatedDateTime&&(n.lastUpdatedDateTime=i()(n.lastUpdatedDateTime).toDate()))}var s=void 0===n?"create":e.location.state.isEdit?"edit":"view";return r.a.createElement(c.a,{formMode:s},r.a.createElement(N,{savedEvent:n}))}}}]);
//# sourceMappingURL=component---src-pages-event-tsx-51f7634b99c7d6b9d240.js.map