{"version":3,"sources":["webpack:///./src/components/Modals/DataLossModal.tsx","webpack:///./src/components/Forms/Form.tsx","webpack:///./node_modules/@chakra-ui/core/dist/es/Divider/index.js","webpack:///./static/impactedPosts.svg","webpack:///./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","webpack:///./src/components/ProgressIndicator.tsx","webpack:///./src/components/Modals/SaveModal.tsx","webpack:///./src/components/FormSections/EvacDetails.tsx","webpack:///./src/components/Modals/DeleteFileModal.tsx","webpack:///./src/components/FormSections/EventDetails.tsx","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./src/components/FormSections/TalkingPointsDetails.tsx","webpack:///./node_modules/@chakra-ui/core/dist/es/Image/index.js","webpack:///./node_modules/@material-ui/icons/esm/Delete.js","webpack:///./src/components/Modals/AddPostsModal.tsx","webpack:///./src/components/FormSections/ImpactedPostsDetails.tsx","webpack:///./src/components/Forms/EventForm.tsx","webpack:///./node_modules/@material-ui/icons/esm/EditSharp.js","webpack:///./src/components/PageSections/EventOverviewTab.tsx","webpack:///./src/components/Modals/DeactivateLklModal.tsx","webpack:///./node_modules/@material-ui/icons/esm/ExpandLessSharp.js","webpack:///./node_modules/@material-ui/icons/esm/ExpandMoreSharp.js","webpack:///./node_modules/@material-ui/icons/esm/LocationOnSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PersonSharp.js","webpack:///./node_modules/@material-ui/icons/esm/EmailSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PhoneSharp.js","webpack:///./src/components/LKLCard.tsx","webpack:///./src/components/PageSections/EventLklTab.tsx","webpack:///./src/components/PageSections/EventEvacDetailsTab.tsx","webpack:///./src/components/AttachmentCard.tsx","webpack:///./src/components/PageSections/EventAttachmentsTab.tsx","webpack:///./src/components/ViewEvent.tsx","webpack:///./src/pages/event.tsx"],"names":["DataLossModal","p","isOpen","onClose","isCentered","size","align","marginRight","onClick","onLeave","buttonType","Form","children","formProps","as","gridColumn","gridGap","base","md","gridTemplateColumns","FormSection","lg","title","marginBottom","showDivider","borderColor","marginY","marginX","opacity","FormContext","React","createContext","displayName","useCTFFormContext","useContext","CTFFormProvider","formMode","providerProps","formSection","isCreate","isEdit","isView","Provider","value","replaceMSWordChars","s","replace","Divider","_ref","ref","orientation","props","borderProps","borderLeft","height","mx","borderBottom","width","my","border","module","exports","easeOut","t","min","max","Math","classes","className","_props$color","color","_props$disableShrink","disableShrink","_props$size","style","_props$thickness","thickness","_props$value","_props$variant","variant","other","circleStyle","rootStyle","rootProps","circumference","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","root","capitalize","indeterminate","role","svg","viewBox","SIZE","circle","circleDisableShrink","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","CircularProgress","Box","SaveModal","message","Flex","pl","EvacDetails","useFormContext","formState","errors","setValue","getValues","evacStatusCodeRef","useRef","evacDepAuthDateRef","orderedDateRef","evacSummaryRef","watchEvacStatus","useWatch","dirtyFields","labelText","labelId","onFocus","current","focus","render","onChange","onBlur","id","aria-labelledby","options","evacStatuses","placeholder","disabled","validationState","evacStatusCode","ValidationState","ERROR","undefined","errorMessage","changes","newVal","selectedItem","evacDepOrdDate","evacDepAuthDate","Date","Grid","inputRef","maxDate","error","rules","pattern","maxLength","evacSummary","e","target","Type","EventDetails","useDisclosure","isDeactivateOpen","onDeactivateOpen","onOpen","onDeactivateClose","hideTitle","register","eventStartDateRef","eventEndDateRef","managementTypeCodeRef","eventTypeIdRef","eventSummaryRef","watchActiveIndicator","watchEventStartDate","required","eventTitle","eventStartDate","validate","afterStartDate","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","compareAsc","minDate","eventEndDate","checked","mgmtTypes","managementTypeCode","eventTypes","eventTypeId","eventSummary","DeactivateModal","onCancel","onConfirm","DeleteFileModal","type","targetType","talkingPoints","attachment","toLowerCase","TalkingPointDetails","defaultModalOpen","onDefaultModalOpen","onDefaultModalClose","removeModalOpen","onRemoveModalOpen","onRemoveModalClose","useState","errorMsg","setErrorMsg","isTPExist","setIsTPExist","talkingPointRef","label","click","acceptedFileFormats","setFileInForm","file","reader","FileReader","readAsDataURL","onload","talkingPoint","fileName","fileSize","fileMimeType","fileDataURL","result","mt","sm","justifyContent","alignItems","VisuallyHidden","aria-hidden","tabIndex","accept","join","uploadFile","files","includes","w","flexDir","flexGrow","href","download","aria-label","preventDefault","position","h","top","right","Dropdown","borderedRows","MoreVertSharp","maxSizeBytes","allowedFileTypes","onDrop","_","handleRejectedFiles","NativeImage","htmlWidth","htmlHeight","alt","Image","src","fallbackSrc","onError","onLoad","ignoreFallback","rest","hasLoaded","_props$enabled","enabled","isMounted","_useState","setHasLoaded","image","window","event","onerror","useHasImageLoaded","Boolean","imageProps","createSvgIcon","createElement","d","AddPostsModal","selectedPosts","posts","onSetPosts","countries","useMemo","countriesList","countries_json","filter","index","push","sort","countryA","countryB","localeCompare","filterUnknowns","Set","map","post","postValue","countryValue","selectedCountry","setCountry","postList","setPostList","unknownPostList","setUnknownPostList","countryRef","checkboxRef","addDisabled","length","filteredPosts","country_cd","unshift","gridRowGap","borderWidth","borderStyle","templateRows","rowGap","overflow","unknownChecked","has","key","defaultChecked","uknPostSet","add","currList","postDto","countryName","postLabel","forEach","delete","selectedPost","onClickUnknownCheckbox","isChecked","some","onClickCheckbox","gridRow","textAlign","postListWithUnknown","ImpactedPostsDetails","impactedPosts","isPostModalOpen","onPostModalOpen","onPostModalClose","Text","rel","maxWidth","defaultValue","pb","currPostList","slice","Delete","ImpactedPostsSvg","cursor","EventForm","pageHeading","pageDescription","breadcrumbs","savedEvent","isDataLossOpen","onDataLossOpen","onDataLossClose","isSaveOpen","onSaveOpen","onSaveClose","updateSavedForm","useSavedForm","defaultValues","eventId","moment","format","floor","random","activeIndicator","attachments","lastUpdatedDateTime","formMethods","useForm","mode","handleSubmit","onSubmit","useCallback","data","skipNavigate","currForm","getSavedForm","savedIdx","findIndex","evt","updatedEvent","splice","setTimeout","pageState","navigate","state","Layout","pageTitle","noValidate","TalkingPointsDetails","justify","marginTop","OverviewTab","eventData","eventType","find","mgmtType","evacStatus","evaStatus","talkingPointFileName","isActive","buttonIcon","mdIcon","EditSharp","alignment","IconAlignment","LEFT","mb","fontFamily","fontSize","fontWeight","lineHeight","margin","displayData","formatDateField","inputDate","buttonStyle","default","bg","hoverFocus","active","DeactivateLklModal","locationName","isActivate","status","toLocaleLowerCase","borderRadius","px","py","_focus","_hover","_active","flex","Fragment","MotionBox","motion","custom","LKLCard","lklData","setEventData","savedEvents","updateSavedEvents","checkActive","tabCurrent","setTabCurrent","isDetailOpen","setIsDetailOpen","direction","setDirection","pocIconProps","mr","alignSelf","detailsTabProps","lookupLklDto","lklTitle","locationDesc","lklAddressDto","lklPocListDto","addressDto","address1","address2","city","stateCd","postalCode","countryCd","fullAddress","pocInfo","extractedPoc","fullName","phone","Array","email","personDto","givenName","surName","personEmailDtoList","personPhoneDtoList","personPhoneDto","phoneDto","phoneNum","personEmailDto","emailDto","emailAddress","backgroundColor","xl","flexBasis","lklDtoIndex","updateEventIndex","foundLklDto","eventLklDtoList","lklDto","eventLklId","tempLklDto","tempLklDtoList","updatedEvents","aria-expanded","aria-controls","ExpandLessSharp","ExpandMoreSharp","PseudoBox","borderBottomColor","initial","duration","ease","animate","exit","currDirection","LocationOnSharp","poc","PersonSharp","EmailSharp","phoneNumber","PhoneSharp","flexWrap","DateTimeFormat","DateFormat","LastKnownLocationTab","eventLklDto","createdDateTime","page","setPage","lklsPerPage","hideInactive","setHideInactive","a","b","aLastUpdatedTime","bLastUpdatedTime","controlledLkls","numOfPages","ceil","indexOfLastEvent","indexOfFirstEvent","totalPages","lklsOnPage","AddSharp","bottom","zIndex","boxShadow","rounded","HideInactiveButton","onToggleHideInactive","Pagination","count","showLastButton","EvacDetailsTab","AttachmentCard","attachmentDto","setAttachmentDtoList","isAttachmentOpen","onAttachmentOpen","onAttachmentClose","attachmentRef","cardOptions","selectedIndex","indexOf","att","savedEventIndex","fileToReplace","AttachmentsTab","progress","setProgress","attachmentDtoList","fileToSet","eventTabs","TabButton","boxProps","useTheme","background","outline","colors","ViewEvent","currentEventData","selectedTab","setSelectedTab","inOverview","inLkl","inEvacuation","inAttachments","handleTabClick","tab","currentTarget","blur","EventPage","location"],"mappings":"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","file":"component---src-pages-event-tsx-6da44358a0e72ca8691d.js","sourcesContent":["import React from \"react\"\r\nimport { H4, P, Button, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\n\r\ninterface DataLossModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonLeave: (e: React.MouseEvent<HTMLButtonElement>) => void\r\n}\r\n\r\nexport const DataLossModal: React.FC<DataLossModalProps> = (p: DataLossModalProps) => (\r\n\t<Modal isOpen={p.isOpen} onClose={p.onClose} isCentered={true} size=\"sm\">\r\n\t\t<ModalHeader>\r\n\t\t\t<H4>Leave Page?</H4>\r\n\t\t</ModalHeader>\r\n\t\t<ModalCloseButton />\r\n\t\t<ModalBody>\r\n\t\t\t<P>Do you want to leave this page and lose unsaved data?</P>\r\n\t\t</ModalBody>\r\n\r\n\t\t<ModalFooter>\r\n\t\t\t<Flex align=\"center\">\r\n\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t<LinkButton onClick={p.onLeave}>Leave</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Button size=\"sm\" onClick={p.onClose} buttonType=\"secondary\">\r\n\t\t\t\t\tStay\r\n\t\t\t\t</Button>\r\n\t\t\t</Flex>\r\n\t\t</ModalFooter>\r\n\t</Modal>\r\n)\r\n","import React, { useContext } from \"react\"\r\nimport { Box, Grid, Divider } from \"@chakra-ui/core\"\r\nimport { H2 } from \"@c1ds/components\"\r\n\r\ntype FormModes = \"create\" | \"view\" | \"edit\"\r\n\r\ntype FormProps<T = HTMLFormElement> = React.FormHTMLAttributes<T> & React.RefAttributes<T>\r\n\r\n/**\r\n * Form wrapper component which includes standard C1DS grid layout\r\n */\r\nexport const Form: React.FC<FormProps> = p => {\r\n\tconst { children, ...formProps } = p\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tas=\"form\"\r\n\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\tgridTemplateColumns={[\"repeat(4, 1fr)\", \"repeat(4, 1fr)\", \"repeat(4, 1fr)\", \"repeat(8, 1fr)\", \"repeat(12, 1fr)\"]}\r\n\t\t\t{...formProps}>\r\n\t\t\t{children}\r\n\t\t</Grid>\r\n\t)\r\n}\r\n\r\ninterface FormSectionProps {\r\n\t/**\r\n\t * Section title\r\n\t */\r\n\ttitle?: string\r\n\t/**\r\n\t * Controls whether hr section separator is displayed at the end of the section\r\n\t */\r\n\tshowDivider?: boolean\r\n}\r\n\r\n/**\r\n * Renders form sections with standard C1DS grid layout\r\n */\r\nexport const FormSection: React.FC<FormSectionProps> = p => (\r\n\t<Grid\r\n\t\tas=\"section\"\r\n\t\tgridColumn=\"1 / -1\"\r\n\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\tgridTemplateColumns={{\r\n\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t}}>\r\n\t\t{p.title && (\r\n\t\t\t<Box marginBottom=\"4\" gridColumn=\"1 / -1\">\r\n\t\t\t\t<H2>{p.title}</H2>\r\n\t\t\t</Box>\r\n\t\t)}\r\n\t\t{p.children}\r\n\t\t{p.showDivider && (\r\n\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t)}\r\n\t</Grid>\r\n)\r\n\r\nexport type EventFormSections = \"overview\" | \"locations\" | \"evacuation\" | \"attachments\" \r\n\r\ninterface FormContextProps {\r\n\t/**\r\n\t * Current form mode\r\n\t */\r\n\tformMode: FormModes\r\n\t/**\r\n\t * Current form section.\r\n\t * Only applicable for edit mode\r\n\t */\r\n\tformSection?: EventFormSections\r\n\t/**\r\n\t * `true` if form is currently in create mode\r\n\t */\r\n\tisCreate: boolean\r\n\t/**\r\n\t * `true` if form is  form currently in edit mode\r\n\t */\r\n\tisEdit: boolean\r\n\t/**\r\n\t * `true` if form is  form currently in view mode\r\n\t */\r\n\tisView: boolean\r\n}\r\n\r\nconst FormContext = React.createContext<FormContextProps | null>(null)\r\nFormContext.displayName = \"CTFFormContext\"\r\n\r\n/**\r\n * Hook allowing access to CTF Form Context.\r\n *\r\n * CTF Form context includes props to:\r\n * - View form mode (view/create/edit) state\r\n * - Manage/update form mode state\r\n *\r\n * There must be a parent `CTFFormProvider` component in the component tree\r\n * for `useCTFFormContext` to work.\r\n */\r\nexport const useCTFFormContext = (): FormContextProps => useContext(FormContext) as FormContextProps\r\n\r\nexport interface CTFFormProviderProps {\r\n\t/**\r\n\t * Form mode to use as initial state\r\n\t */\r\n\tformMode: FormContextProps[\"formMode\"]\r\n\t/**\r\n\t * Form section to use as initial state\r\n\t */\r\n\tformSection?: FormContextProps[\"formSection\"]\r\n}\r\n\r\n/**\r\n * Provider for CTF Form context\r\n * @see useCTFFormContext\r\n */\r\nexport const CTFFormProvider: React.FC<CTFFormProviderProps> = p => {\r\n\tconst { formMode, formSection } = p\r\n\r\n\tconst providerProps = {\r\n\t\tformMode,\r\n\t\tformSection,\r\n\t\tisCreate: formMode === \"create\",\r\n\t\tisEdit: formMode === \"edit\",\r\n\t\tisView: formMode === \"view\",\r\n\t}\r\n\r\n\treturn <FormContext.Provider value={providerProps}>{p.children}</FormContext.Provider>\r\n}\r\n\r\n/**\r\n * Helper function to replace special MS Word\r\n * characters with their ASCII equivalent\r\n */\r\nexport const replaceMSWordChars = (s: string): string =>\r\n\ts &&\r\n\ts\r\n\t\t.replace(/[\\u2018\\u2019\\u201A]/g, `'`)\r\n\t\t.replace(/[\\u201C\\u201D\\u201E]/g, `\"`)\r\n\t\t.replace(/[\\u2013\\u2014]/g, `-`)\r\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport Box from \"../Box\";\nimport { forwardRef } from \"react\";\nvar Divider = forwardRef(function (_ref, ref) {\n  var orientation = _ref.orientation,\n      props = _objectWithoutPropertiesLoose(_ref, [\"orientation\"]);\n\n  var borderProps = orientation === \"vertical\" ? {\n    borderLeft: \"0.0625rem solid\",\n    height: \"auto\",\n    mx: 2\n  } : {\n    borderBottom: \"0.0625rem solid\",\n    width: \"auto\",\n    my: 2\n  };\n  return jsx(Box, _extends({\n    ref: ref,\n    as: \"hr\",\n    \"aria-orientation\": orientation,\n    border: \"0\",\n    opacity: \"0.6\"\n  }, borderProps, {\n    borderColor: \"inherit\"\n  }, props));\n});\nexport default Divider;","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzE4Ljk1IDIyMi43NyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fS5jbHMtMntmaWxsOiNjY2M7fS5jbHMtM3tmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50KTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtMik7fS5jbHMtNSwuY2xzLTZ7ZmlsbDojOTk5O30uY2xzLTV7b3BhY2l0eTowLjM7fTwvc3R5bGU+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIzNi42NCIgeTE9IjIwOC44NSIgeDI9IjU1LjExIiB5Mj0iMTc2Ljg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIwLjQ0IiBzdG9wLWNvbG9yPSIjZmNmY2ZjIi8+PHN0b3Agb2Zmc2V0PSIwLjc2IiBzdG9wLWNvbG9yPSIjZjNmM2YzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZTZlNmU2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iMjAxLjQ1IiB5MT0iMjE2Ljc3IiB4Mj0iMjAxLjQ1IiB5Mj0iMTkwLjc3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIwLjE5IiBzdG9wLWNvbG9yPSIjZjZmNmY2Ii8+PHN0b3Agb2Zmc2V0PSIwLjYiIHN0b3AtY29sb3I9IiNlYWVhZWEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNlNmU2ZTYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+QXNzZXQgMjwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48ZyBpZD0iTWFwMSI+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjEyLjk1IDE1MC43NyA5MS45NSAyMjIuNzcgMjAyLjk1IDE5MC43NyAzMTguOTUgMjE5Ljc3IDI2NS45NSA1NC43NyAyMDEuOTUgNDUuNzcgMTMzLjk1IDcwLjc3IDgxLjk1IDM4Ljc3IDEyLjk1IDE1MC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIwMi45NSAxODIuNzcgMTk4Ljk1IDU1Ljc3IDEzMS45NSA3Ni43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxOTguOTUgNTUuNzcgMjYxLjk1IDY4Ljc3IDMwNy45NSAyMDkuNzcgMjAyLjk1IDE4Mi43NyAxOTguOTUgNTUuNzciLz48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMjcyLjY2IDEwMC45IDI3Ni45NSAxMTEuNzcgMTIzLjk1IDcyLjM2IDEyOC45NSA2My43NyAyNzIuNjYgMTAwLjkiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTkuNTEgMTU2LjMgMCAxODcuNyA4Mi42NyAyMTMuNzUgMTkuNTEgMTU2LjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTEwLjk1IDIxNi43NyAyMDIuOTUgMTkwLjc3IDI5MS45NSAyMTQuNzcgMTEwLjk1IDIxNi43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSI4NC45NSA0OC43NyAxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIyLjk1IDE0OS43NyA4NC45NSA0OC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI1Ny45NSAxODEuNzcgNjMuOTUgMTg5Ljc3IDEwMS45NSAxODkuNzcgMjAxLjk1IDEyOS43NyAyODEuOTUgMTI3Ljc3IDI3OS45NSAxMTkuNzcgMjAwLjk1IDEyMC43NyAxMDIuOTUgMTgwLjc3IDU3Ljk1IDE4MS43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIzOS45NSAxMTkuNzcgNDUuOTUgMTExLjc3IDEyMS45NSAxMTEuNzcgMTcyLjk1IDgzLjc3IDE5OC45NSA2OS43NyAyMjMuOTUgNjAuNzcgMjM5Ljk1IDYzLjc3IDE5OS45NSA3Ni43NyAxMTkuOTUgMTE5Ljc3IDM5Ljk1IDExOS43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI2NS45NSA3OC43NyAxMTUuOTUgMTMyLjc3IDIwMC45NSAxNDAuNzcgMjk3Ljk1IDE3Ni43NyAzMDAuOTUgMTg1Ljc3IDE5OS45NSAxNDkuNzcgMTEzLjk1IDE0MS43NyA1OS45NSA4NS43NyA2NS45NSA3OC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIwMi45NSAxODIuNzcgMTk4Ljk1IDU1Ljc3IDEzMS45NSA3Ni43NyIvPjxnIGlkPSJQaW4iPjxwYXRoIGlkPSJQaW4yIiBjbGFzcz0iY2xzLTYiIGQ9Ik0xNDIsMzguNjNhMzksMzksMCwwLDAtNzgsMCwzOC4yLDM4LjIsMCwwLDAsNS4zOSwxOS42MUEzOC43OCwzOC43OCwwLDAsMCw3My41Nyw2NGgwbDMuNjgsNS4xNSw3LjM2LDEyLjUxLDUuMTUsOS44NCwzLjY4LDcuODIsMy42OCw4LjgzLDIuNTcsOC4wOSwxLjg0LDUuODkuNzQsMi45NC43MywzLjY4Ljc0LTIuMi43My0yLjk1Ljc0LTIuOTQuNzQtMi45NCwyLjItNi42M0wxMTEsMTAzLjIsMTE2LjIsOTJsOS41Ni0xNi45Miw2LjYzLTEwLjMxLDEuNzYtMi45NEEzOC4xOCwzOC4xOCwwLDAsMCwxNDIsMzguNjNaIi8+PGNpcmNsZSBpZD0iUGluX2NpcmNsZSIgZGF0YS1uYW1lPSJQaW4gY2lyY2xlIiBjbGFzcz0iY2xzLTEiIGN4PSIxMDIuOTUiIGN5PSI0MC40NyIgcj0iMjQuMjgiLz48L2c+PC9nPjwvZz48L2c+PC9zdmc+\"","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\n\nfunction getRelativeValue(value, min, max) {\n  return (Math.min(Math.max(min, value), max) - min) / (max - min);\n}\n\nfunction easeOut(t) {\n  t = getRelativeValue(t, 0, 1); // https://gist.github.com/gre/1650294\n\n  t = (t -= 1) * t * t + 1;\n  return t;\n}\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    \"static\": {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n\n    if (variant === 'static') {\n      circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n      rootStyle.transform = 'rotate(-90deg)';\n    } else {\n      circleStyle.strokeDashoffset = \"\".concat((easeIn((100 - value) / 100) * circumference).toFixed(3), \"px\");\n      rootStyle.transform = \"rotate(\".concat((easeOut(value / 70) * 270).toFixed(3), \"deg)\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'indeterminate': classes.indeterminate,\n      'static': classes[\"static\"]\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import React from \"react\"\r\nimport { Box } from \"@chakra-ui/core\"\r\nimport { CircularProgress as MuiCircularProgress } from \"@material-ui/core\"\r\n\r\nexport const CircularProgress: React.FC = () => (\r\n\t<Box color=\"clickable\">\r\n\t\t<MuiCircularProgress color=\"inherit\" size={48} thickness={7.5} />\r\n\t</Box>\r\n)\r\n","import React from \"react\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\nimport { H4, P, Modal, ModalBody, ModalHeader } from \"@c1ds/components\"\r\nimport { CircularProgress } from \"../ProgressIndicator\"\r\n\r\ninterface SaveModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tmessage?: string\r\n}\r\n\r\nexport const SaveModal: React.FC<SaveModalProps> = (p: SaveModalProps) => {\r\n\tconst { isOpen, onClose, message = \"Saving your information\" } = p\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onClose} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Please Wait...</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box color=\"clickable\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box pl=\"24\">\r\n\t\t\t\t\t\t<P>{message}</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalBody>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid } from \"@chakra-ui/core\"\r\nimport { DatePicker, Select, FormInput, ValidationState, Textarea } from \"@c1ds/components\"\r\n\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\n\r\nconst EvacDetails: React.FC = () => {\r\n\tconst { formState, errors, setValue, getValues } = useFormContext<EventFormData>()\r\n\r\n\tconst evacStatusCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst evacDepAuthDateRef = useRef<HTMLInputElement>(null)\r\n\tconst orderedDateRef = useRef<HTMLInputElement>(null)\r\n\tconst evacSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchEvacStatus = useWatch<string>({ name: \"evacStatusCode\" })\r\n\r\n\tconst { isCreate, isView } = useCTFFormContext()\r\n\r\n\tconst { dirtyFields } = formState\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Evacuation Details\">\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Status\" labelId=\"evacStatusCodeLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\tonFocus={() => evacStatusCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={evacStatusCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacStatusCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={evacStatuses}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacStatusCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacStatusCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tconst newVal = changes.selectedItem?.value\r\n\t\t\t\t\t\t\t\t\tonChange(newVal)\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.16.6 The system defaults the Authorized or Ordered Date to Todays date\r\n\t\t\t\t\t\t\t\t\t * when Evacuation Status is selected.\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (newVal === \"ADEP\" && !getValues(\"evacDepAuthDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepAuthDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"ODEP\" && !getValues(\"evacDepOrdDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepOrdDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"NONE\") {\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 9\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(2,max-content)\" }}>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Authorized\" labelId=\"evacDepAuthDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tname=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tinputRef={evacDepAuthDateRef}\r\n\t\t\t\t\t\tonFocus={() => evacDepAuthDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to blank\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.4 The system enables Date Departure Authorized\r\n\t\t\t\t\t\t * when Evacuation Status to Authorized\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ADEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepAuthDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepAuthDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Ordered\" labelId=\"orderedDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tname=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tinputRef={orderedDateRef}\r\n\t\t\t\t\t\tonFocus={() => orderedDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to blank\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.5 The system enables Date Departure Ordered\r\n\t\t\t\t\t\t * when Evacuation Status to Ordered\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ODEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepOrdDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepOrdDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Summary\" labelId=\"evacSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Evacuation Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Evacuation Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => evacSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={evacSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"evacSummary\"\r\n\t\t\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EvacDetails\r\n","import React from \"react\"\r\nimport { Box, Flex } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeleteFileModalProps {\r\n\ttype: string\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n}\r\nenum Type {\r\n\ttalkingPoints = \"Talking Points\",\r\n\tattachment = \"Attachment\"\r\n}\r\n\r\nconst DeleteFileModal: React.FC<DeleteFileModalProps> = ({ type, isOpen, onCancel, onConfirm }: DeleteFileModalProps) => {\r\n\tconst targetType = type === 'talkingPoints' ? Type.talkingPoints :\r\n\t\t\t\t type === 'attachment' ? Type.attachment : \"\"\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Delete {targetType}?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>Are you sure you want to delete this {targetType.toLowerCase}? This action cannot be undone.</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeleteFileModal\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Switch, DatePicker, Select, FormInput, Text, ValidationState, Textarea } from \"@c1ds/components\"\r\nimport { compareAsc } from \"date-fns\"\r\n\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\nimport DeactivateModal from \"../Modals/DeactivateModal\"\r\n\r\ninterface EventDetailsProps {\r\n\thideTitle?: boolean\r\n}\r\n\r\nconst EventDetails: React.FC<EventDetailsProps> = (p: EventDetailsProps) => {\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\tconst { hideTitle } = p\r\n\r\n\tconst { register, errors, setValue } = useFormContext<EventFormData>()\r\n\r\n\tconst eventStartDateRef = useRef<HTMLInputElement>(null)\r\n\tconst eventEndDateRef = useRef<HTMLInputElement>(null)\r\n\tconst managementTypeCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventTypeIdRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchActiveIndicator = useWatch<boolean>({ name: \"activeIndicator\" })\r\n\tconst watchEventStartDate: Date | undefined = useWatch({ name: \"eventStartDate\" }) as Date\r\n\r\n\tconst { isView, isCreate } = useCTFFormContext()\r\n\r\n\treturn (\r\n\t\t<FormSection title={hideTitle ? undefined : \"Event Details\"} showDivider={isCreate}>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Title\" labelId=\"eventTitleLabel\" required>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tref={register({\r\n\t\t\t\t\t\t\trequired: \"Please enter an Event Title\",\r\n\t\t\t\t\t\t\tmaxLength: { value: 25, message: \"Event Title cannot exceed 25 characters\" },\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tname=\"eventTitle\"\r\n\t\t\t\t\t\tid=\"eventTitle\"\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tmaxLength={25}\r\n\t\t\t\t\t\tvalidationState={errors?.eventTitle ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\terrorMessage={errors?.eventTitle?.message}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * 1.5 The system disallows a space or non-alphanumeric character (in plain text)\r\n\t\t\t\t\t\t\t * at beginning of the title field\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\te.target.value = e.target.value.replace(/^[^A-Za-z0-9]+/, \"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(3,max-content)\" }}>\r\n\t\t\t\t<FormInput labelText=\"Start Date\" labelId=\"eventStartDateLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventStartDate\"\r\n\t\t\t\t\t\tname=\"eventStartDate\"\r\n\t\t\t\t\t\trules={{ required: \"Please enter a Start Date\" }}\r\n\t\t\t\t\t\tinputRef={eventStartDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventStartDateRef.current?.focus()}\r\n\t\t\t\t\t\t/* 1.6.1 The user can edit the Start Date to any date before today's date\r\n\t\t\t\t\t\t * with valid date range: 01/01/1900 to 01/01/9999\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventStartDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventStartDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"End Date\" labelId=\"eventEndDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventEndDate\"\r\n\t\t\t\t\t\tname=\"eventEndDate\"\r\n\t\t\t\t\t\t/* The system displays appropriate error message\r\n\t\t\t\t\t\t * \"End Date must be equal or later than Start Date\"\r\n\t\t\t\t\t\t * when user editing End Date of a reactivate event.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tvalidate: {\r\n\t\t\t\t\t\t\t\tafterStartDate: value =>\r\n\t\t\t\t\t\t\t\t\t!!watchActiveIndicator ||\r\n\t\t\t\t\t\t\t\t\tcompareAsc(value, watchEventStartDate) > -1 ||\r\n\t\t\t\t\t\t\t\t\t\"End Date must be equal to or later than Start Date\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinputRef={eventEndDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventEndDateRef.current?.focus()}\r\n\t\t\t\t\t\tminDate={watchEventStartDate ? watchEventStartDate : undefined}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventEndDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventEndDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Active\" labelId=\"activeIndicatorLabel\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tref={register()}\r\n\t\t\t\t\t\tname=\"activeIndicator\"\r\n\t\t\t\t\t\tid=\"activeIndicator\"\r\n\t\t\t\t\t\tvalue=\"Active\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\tsetValue(\"eventEndDate\", undefined)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t * Note: Prevent default will not work as expected for checkboxes in React.\r\n\t\t\t\t\t\t\t\t * Instead, revert activeIndicator value back to true\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\tsetValue(\"activeIndicator\", true)\r\n\t\t\t\t\t\t\t\tonDeactivateOpen()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"1 / 5\" }}>\r\n\t\t\t\t<FormInput labelText=\"Management Type\" labelId=\"managementTypeCodeLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select a Management Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => managementTypeCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={managementTypeCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"managementTypeCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={mgmtTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.managementTypeCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.managementTypeCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"1 / 5\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Type\" labelId=\"eventTypeIdLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select an Event Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventTypeIdRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={eventTypeIdRef}\r\n\t\t\t\t\t\t\t\tid=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventTypeIdLabel\"\r\n\t\t\t\t\t\t\t\toptions={eventTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventTypeId ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventTypeId?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Summary\" labelId=\"eventSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Event Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Event Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={eventSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"eventSummary\"\r\n\t\t\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<DeactivateModal\r\n\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 1.11.2 The user clicks on [YES] on the confirmation message\r\n\t\t\t\t\t * to deactivate the event or clicks on [Cancel] to exit the deactivation.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t// 1.11.3 The system update the Event Active Indicator to No and Event End Date to today's date.\r\n\t\t\t\t\tsetValue(\"activeIndicator\", false)\r\n\t\t\t\t\tsetValue(\"eventEndDate\", new Date())\r\n\r\n\t\t\t\t\tonDeactivateClose()\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EventDetails\r\n","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","import React, { useRef, useState } from \"react\"\r\nimport { Controller } from \"react-hook-form\"\r\nimport { Box, Divider, VisuallyHidden, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { FormInput, H4, P, FileUploader, Card, Link, Button, \r\n    Modal, ModalHeader, ModalCloseButton} from \"@c1ds/components\"\r\n\r\nimport { FormSection, useCTFFormContext } from \"../Forms/Form\"\r\nimport Dropdown from \"../Dropdown\"\r\nimport DeleteFileModal from \"../Modals/DeleteFileModal\"\r\n\r\nimport { MoreVertSharp } from \"@material-ui/icons\"\r\n\r\nconst TalkingPointDetails: React.FC = () => {\r\n    const { isOpen: defaultModalOpen, onOpen: onDefaultModalOpen, onClose: onDefaultModalClose } = useDisclosure()\r\n    const { isOpen: removeModalOpen, onOpen: onRemoveModalOpen, onClose: onRemoveModalClose } = useDisclosure()\r\n\r\n    const [ errorMsg, setErrorMsg ] = useState<string>('')\r\n    const [ isTPExist, setIsTPExist ] = useState<boolean>(false)\r\n\r\n    // Ref to the hidden input type=\"file\"\r\n\tconst talkingPointRef = useRef<HTMLInputElement>(null)\r\n\r\n    const { isCreate, isEdit } = useCTFFormContext()\r\n\r\n\tconst options = [\r\n\t\t{\r\n\t\t\tlabel: \"Replace\",\r\n\t\t\tvalue: \"Replace\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\ttalkingPointRef.current?.click()\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Remove\",\r\n\t\t\tvalue: \"Remove\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonRemoveModalOpen()\r\n\t\t\t},\r\n\t\t},\r\n    ]\r\n    \r\n    const maxSize = 1024 * 1024 * 5\r\n    const acceptedFileFormats = [\r\n        \"text/plain\",\r\n        \"application/pdf\",\r\n        \"application/rtf\",\r\n        \"application/msword\",\r\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n    ]\r\n\r\n    const setFileInForm = (file : File, onChange : (tp : TalkingPoint | undefined) => void) => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => {\r\n            const talkingPoint = {\r\n                fileName : file.name,\r\n                fileSize : file.size,\r\n                fileMimeType : file.type,\r\n                fileDataURL : reader.result\r\n            }\r\n            onChange(talkingPoint)\r\n            setIsTPExist(true)\r\n        }\r\n    }\r\n    \r\n\treturn (\r\n\t\t<FormSection title=\"Talking Points\" showDivider={isCreate || isEdit} >\r\n            <Box gridColumn={{ base: \"1 / -1\" }} >\r\n                {isTPExist ? \r\n                    <P>You have added talking points to this event. The default talking points have been removed.</P>\r\n                :\r\n                    <P>If Talking Points aren&apos;t \r\n                    available, <Link onClick={onDefaultModalOpen}>default Talking Points</Link> will \r\n                    be presented based on the Event Type.</P>\r\n                }\r\n                <Modal \r\n                    isOpen={defaultModalOpen} \r\n                    onClose={onDefaultModalClose} \r\n                    isCentered={true} \r\n                    size=\"lg\">\r\n                    <ModalHeader>\r\n                        <H4>Default Talking Points</H4>\r\n                    </ModalHeader>\r\n                    <ModalCloseButton />\r\n                    <Box mt={{ base: \"-92px\", sm: \"-108px\" ,md: \"-144px\" }} gridColumn={{ base: \"1 / -1\" }} >\r\n                        <P>\r\n                            We are aware of the event at hand. We are monitoring the event closely \r\n                            and will update you with any new information that comes forth during \r\n                            this unprecedented time. We thank you for your understanding and ultimately \r\n                            for your cooperation.\r\n                        </P>\r\n                    </Box>\r\n                        <Flex \r\n                            justifyContent=\"center\" \r\n                            alignItems=\"flex-end\"\r\n                            gridColumn={{ base: \"1 / -1\" }}>\r\n                            <Button buttonType=\"primary\" onClick={onDefaultModalClose}>\r\n                                Close\r\n                            </Button>\r\n\r\n                        </Flex>\r\n                </Modal>\r\n            </Box>\r\n            \r\n            <Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n                <Controller\r\n                    name=\"talkingPoints\"\r\n                    render={({onChange, value}) => {\r\n                        // Check if Talking Point value exists\r\n                        setIsTPExist(value ? true : false)\r\n                        return (\r\n                            <FormInput labelText=\"Attachments\" labelId=\"talkingPointsLabel\">\r\n                                {value ?\r\n                                // Talking Point Card\r\n                                <Box mt={8}>\r\n                                    <Card id={`talkingPointItem`} >\r\n                                        <VisuallyHidden \r\n                                            as=\"input\" \r\n                                            // @ts-ignore\r\n                                            type=\"file\" \r\n                                            ref={talkingPointRef} \r\n                                            name=\"talkingPoints\"\r\n                                            aria-hidden={true}\r\n                                            tabIndex={-1}\r\n                                            accept={acceptedFileFormats.join()}\r\n                                            onChange={(e : React.FormEvent<HTMLInputElement>) => {\r\n                                                // @ts-ignore\r\n                                                const uploadFile = e.target.files[0]\r\n                                                if (!acceptedFileFormats.includes(uploadFile.type)){\r\n                                                    setErrorMsg(\"File type must be one of .doc, .docx, .txt, .rtf, .pdf\")\r\n                                                } else if (uploadFile.size > maxSize){\r\n                                                    setErrorMsg(\"File is larger than 5242880 bytes\")\r\n                                                } else{\r\n                                                    setErrorMsg('')\r\n                                                    setFileInForm(uploadFile, onChange)\r\n                                                }\r\n                                                \r\n                                            }}/>    \r\n                                        <Flex \r\n                                            w=\"full\" \r\n                                            my={{ base: \"-8px\", sm: \"-12px\" }} \r\n                                            flexDir={{ base: \"row\" }}>\r\n                                            <Flex flexGrow={1} justifyContent=\"flex-start\">\r\n                                                <Link \r\n                                                    href={`${value.fileDataURL}`} \r\n                                                    download={value.fileName}>\r\n                                                    {value.fileName}\r\n                                                </Link>\r\n                                            </Flex>\r\n                                            {/* Additional Talking Points actions Replace and Remove */}\r\n                                            <Flex display={{ base: \"none\", md:\"flex\" }} flexGrow={1} justifyContent=\"flex-end\">\r\n                                                <Link href=\"\" aria-label=\"Replace\" onClick={(e)=> {\r\n                                                    e.preventDefault()\r\n                                                    talkingPointRef.current?.click()} \r\n                                                }>\r\n                                                    Replace\r\n                                                    </Link>\r\n                                                <Box mx={24} >\r\n                                                    <Divider position=\"absolute\" \r\n                                                    h={{base:16, sm: 16 }}\r\n                                                    top={{base:-12, sm: -16}} \r\n                                                    orientation=\"vertical\" \r\n                                                    color=\"silver\" />\r\n                                                </Box>\r\n                                                <Link href=\"\" aria-label=\"Remove\" onClick={(e)=> {\r\n                                                    e.preventDefault()\r\n                                                    onRemoveModalOpen()\r\n                                                }}>\r\n                                                    Remove\r\n                                                    </Link>\r\n                                                <DeleteFileModal\r\n                                                    type=\"talkingPoints\"\r\n                                                    isOpen={removeModalOpen}\r\n                                                    onCancel={onRemoveModalClose}\r\n                                                    onConfirm={() => {\r\n                                                        setIsTPExist(false)\r\n                                                        onChange(undefined)\r\n                                                        onRemoveModalClose()\r\n                                                    }}\r\n                                                />\r\n                                            </Flex>\r\n                                            <Flex display={{ md: \"none\" }} justifyContent=\"flex-end\">\r\n                                                <Box position=\"relative\" right={{ base: \"-12px\" }}>\r\n                                                    <Dropdown\r\n                                                        options={options}\r\n                                                        borderedRows={true}\r\n                                                        width=\"10rem\"\r\n                                                        label={`Additional actions for ${value.fileName}`}>\r\n                                                        <Box as={MoreVertSharp} color=\"clickable\" />\r\n                                                    </Dropdown>\r\n                                                </Box>\r\n                                            </Flex>\r\n                                        </Flex>\r\n                                    </Card>\r\n                                    { errorMsg !== '' && <P color=\"error\">{errorMsg}</P>}\r\n                                </Box>\r\n                                :\r\n                                <FileUploader\r\n                                    id=\"talkingPoints\"\r\n                                    aria-labelledby=\"talkingPoints\"\r\n                                    name=\"talkingPoints\"\r\n                                    maxSizeBytes={maxSize}\r\n                                    allowedFileTypes={[\r\n                                        \".doc\",\r\n                                        \".docx\",\r\n                                        \".txt\",\r\n                                        \".rtf\",\r\n                                        \".pdf\",\r\n                                    ]}\r\n                                    onDrop={(_, files) => {      \r\n                                        setFileInForm(files[0], onChange)\r\n                                        setErrorMsg('')\r\n                                    }}\r\n                                    handleRejectedFiles={(_, files) => {\r\n                                        setErrorMsg(files[0].errors[0])\r\n                                    }} \r\n                                    errorMessage={errorMsg}\r\n                                />\r\n                                }\r\n                            </FormInput>\r\n                        )\r\n                    }}\r\n                />\r\n            </Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default TalkingPointDetails\r\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport Box from \"../Box\";\nexport function useHasImageLoaded(props) {\n  var src = props.src,\n      onLoad = props.onLoad,\n      onError = props.onError,\n      _props$enabled = props.enabled,\n      enabled = _props$enabled === void 0 ? true : _props$enabled;\n  var isMounted = useRef(true);\n\n  var _useState = useState(false),\n      hasLoaded = _useState[0],\n      setHasLoaded = _useState[1];\n\n  useEffect(function () {\n    if (!src || !enabled) {\n      return;\n    }\n\n    var image = new window.Image();\n    image.src = src;\n\n    image.onload = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(true);\n        onLoad && onLoad(event);\n      }\n    };\n\n    image.onerror = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(false);\n        onError && onError(event);\n      }\n    };\n  }, [src, onLoad, onError, enabled]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return hasLoaded;\n}\nvar NativeImage = forwardRef(function (_ref, ref) {\n  var htmlWidth = _ref.htmlWidth,\n      htmlHeight = _ref.htmlHeight,\n      alt = _ref.alt,\n      props = _objectWithoutPropertiesLoose(_ref, [\"htmlWidth\", \"htmlHeight\", \"alt\"]);\n\n  return jsx(\"img\", _extends({\n    width: htmlWidth,\n    height: htmlHeight,\n    ref: ref,\n    alt: alt\n  }, props));\n});\nvar Image = forwardRef(function (props, ref) {\n  var src = props.src,\n      fallbackSrc = props.fallbackSrc,\n      onError = props.onError,\n      onLoad = props.onLoad,\n      ignoreFallback = props.ignoreFallback,\n      rest = _objectWithoutPropertiesLoose(props, [\"src\", \"fallbackSrc\", \"onError\", \"onLoad\", \"ignoreFallback\"]);\n\n  var hasLoaded = useHasImageLoaded({\n    src: src,\n    onLoad: onLoad,\n    onError: onError,\n    enabled: !Boolean(ignoreFallback)\n  });\n  var imageProps = ignoreFallback ? {\n    src: src,\n    onLoad: onLoad,\n    onError: onError\n  } : {\n    src: hasLoaded ? src : fallbackSrc\n  };\n  return jsx(Box, _extends({\n    as: NativeImage,\n    ref: ref\n  }, imageProps, rest));\n});\nImage.displayName = \"Image\";\nexport default Image;","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');","import React, {useState, useRef, useMemo} from \"react\"\r\nimport { H4, P, Button, Select, FormInput, Checkbox,\r\n\tModal, ModalFooter, ModalHeader, ModalCloseButton, LinkButton, } from \"@c1ds/components\"\r\nimport { Grid, Flex, Box } from \"@chakra-ui/core\"\r\nimport countries_json from \"../../../content/countries.json\"\r\nimport posts from \"../../../content/posts.json\"\r\n\r\ninterface AddPostsModalProps {\r\n\tposts: PostDto[]\r\n\tisOpen: boolean\r\n\tonClose(): void\r\n\tonSetPosts: (e: PostDto[]) => void\r\n}\r\n\r\ninterface Post {\r\n\tvalue: string\r\n\tlabel: string\r\n\tcountry_cd: string\r\n}\r\n\r\ninterface Country {\r\n\tvalue: string\r\n\tlabel: string\r\n}\r\n\r\nexport const AddPostsModal: React.FC<AddPostsModalProps> = (p: AddPostsModalProps) => {\r\n\tconst {isOpen, onClose, posts : selectedPosts, onSetPosts} = p\r\n\r\n\tconst countries = useMemo(() => {\r\n\t\tconst countriesList = countries_json.filter((_, index) => index % 5 === 0)\r\n\t\tcountriesList.push({\r\n\t\t\tlabel: \"UNITED STATES OF AMERICA\",\r\n\t\t\tvalue: \"USA\",\r\n\t\t})\r\n\t\tcountriesList.sort((countryA, countryB) => countryA.label.localeCompare(countryB.label))\r\n\t\treturn countriesList\r\n\t}, [])\r\n\r\n\tconst filterUnknowns = new Set<string>(selectedPosts.map((post : PostDto) => {\r\n\t\treturn post.postValue === \"Unknown\" ? post.countryValue : ''\r\n\t}))\r\n\r\n\tconst [selectedCountry, setCountry] = useState<Country>()\r\n\tconst [postList, setPostList] = useState<Array<PostDto>>(selectedPosts)\r\n\tconst [unknownPostList, setUnknownPostList] = useState<Set<string>>(filterUnknowns)\r\n\r\n\tconst countryRef = useRef<HTMLButtonElement>(null)\r\n\tconst checkboxRef = useRef<HTMLInputElement>(null)\r\n\t\r\n\tconst addDisabled = postList.length === 0\r\n\r\n\r\n\tconst filteredPosts = posts.filter(post => post.country_cd === selectedCountry?.value)\r\n\tif(selectedCountry && filteredPosts.length > 1){\r\n\t\tfilteredPosts.unshift({\r\n\t\t\tvalue: 'Unknown',\r\n\t\t\tlabel: 'Unknown Location',\r\n\t\t\tcountry_cd: selectedCountry.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst onClickCheckbox = (e: React.ChangeEvent<HTMLInputElement>, post : Post)=>{\r\n\t\tif (e.target.checked && selectedCountry) {\r\n\t\t\t// Add checked post\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\tconst postDto: PostDto = {\r\n\t\t\t\t\tcountryValue: selectedCountry.value,\r\n\t\t\t\t\tcountryName: selectedCountry.label,\r\n\t\t\t\t\tpostLabel: post.label,\r\n\t\t\t\t\tpostValue: post.value\r\n\t\t\t\t}\r\n\t\t\t\treturn [...currList, postDto]\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// Remove unchecked post\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\treturn currList.filter((selectedPost : PostDto) => {\r\n\t\t\t\t\treturn selectedPost.postValue !== post.value\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst onClickUnknownCheckbox = (e: React.ChangeEvent<HTMLInputElement>, post : Post)=>{\r\n\t\t// value: 'Unknown',\r\n\t\t// label: 'Unknown Location',\r\n\t\t// country_cd: selectedCountry.value\r\n\r\n\t\tif (e.target.checked && selectedCountry) {\r\n\t\t\t// Add unknown post country in the list\r\n\t\t\tsetUnknownPostList(uknPostSet => {\r\n\t\t\t\tuknPostSet.add(post.country_cd)\r\n\t\t\t\treturn uknPostSet\r\n\t\t\t})\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\tconst postDto: PostDto = {\r\n\t\t\t\t\tcountryValue: selectedCountry.value,\r\n\t\t\t\t\tcountryName: selectedCountry.label,\r\n\t\t\t\t\tpostLabel: 'Unknown Location',\r\n\t\t\t\t\tpostValue: 'Unknown'\r\n\t\t\t\t}\r\n\t\t\t\treturn [...currList, postDto]\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// Remove unknown post country in the list\r\n\t\t\tsetUnknownPostList(uknPostSet => {\r\n\t\t\t\tuknPostSet.forEach(country_cd => {\r\n\t\t\t\t\tif(country_cd === post.country_cd){\r\n\t\t\t\t\t\tuknPostSet.delete(country_cd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn uknPostSet\r\n\t\t\t})\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\treturn currList.filter((selectedPost : PostDto) => {\r\n\t\t\t\t\treturn !(selectedPost.postValue === 'Unknown' && selectedPost.countryValue === post.country_cd)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst onAddPosts= () => {\r\n\t\t// Extract any post which has same country_cd from unknownPostList\r\n\t\tconst postListWithUnknown = postList.filter((post) => {\r\n\t\t\t// extract posts that have same country_cd except Unknown post\r\n\t\t\treturn unknownPostList.has(post.countryValue) ? post.postValue === 'Unknown' : true\r\n\t\t})\r\n\t\tsetCountry(undefined)\r\n\t\tonSetPosts(postListWithUnknown)\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onClose} isCentered={true} size=\"lg\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Add Impacted Posts</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<Grid \r\n\t\t\t\tgridColumn={{ base: \"1 / -1\"}}\r\n\t\t\t\tgridRowGap={16}>\r\n\t\t\t\t<FormInput labelText=\"Country\" labelId=\"stateLabel\" required>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tref={countryRef}\r\n\t\t\t\t\t\tid=\"country\"\r\n\t\t\t\t\t\tname=\"country\"\r\n\t\t\t\t\t\taria-labelledby=\"countryLabel\"\r\n\t\t\t\t\t\toptions={countries}\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\tif(changes && changes.selectedItem)\r\n\t\t\t\t\t\t\t\tsetCountry(changes.selectedItem)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tplaceholder={selectedCountry ? selectedCountry.label : 'Select a country'}\r\n\t\t\t\t\t\tvalue={selectedCountry ? selectedCountry.label : 'Select a country'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Post\" labelId=\"stateLabel\" required>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tp={12}\r\n\t\t\t\t\t\th={320}\r\n\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\tborderWidth={1}\r\n\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\t\t\ttemplateRows={{ base: \"repeat(6,1fr)\"}}\r\n\t\t\t\t\t\trowGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\t\t\toverflow=\"auto\">\r\n\r\n\t\t\t\t\t\t{(selectedCountry && selectedCountry.label) ?\r\n\r\n\t\t\t\t\t\t\tfilteredPosts.length !== 0 ?\r\n\t\t\t\t\t\t\t// Filtered posts are posts that have same country code including unknown posts\r\n\t\t\t\t\t\t\tfilteredPosts.map((post : Post, index) => {\r\n\t\t\t\t\t\t\t\tconst unknownChecked = unknownPostList.has(selectedCountry.value)\r\n\t\t\t\t\t\t\t\tif(filteredPosts.length > 1 && index === 0){\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t// If number of posts are more than 1 (1 < n) then this unknown post will be created\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox \r\n\t\t\t\t\t\t\t\t\t\t\tref={checkboxRef}\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"unknownPost\" \r\n\t\t\t\t\t\t\t\t\t\t\tkey={`${post.value}-${post.country_cd}`}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={unknownChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={`Unknown Post in ${selectedCountry.label}`} \r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => {onClickUnknownCheckbox(e, post)}} />\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t// Check if posts were already selected before modal opens\r\n\t\t\t\t\t\t\t\t\tconst isChecked = selectedPosts.some((selectedPost : PostDto) => selectedPost.postValue === post.value)\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox \r\n\t\t\t\t\t\t\t\t\t\t\tid=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tkey={`${post.value}-${post.country_cd}`}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tvalue={`U.S. Embassy in ${post.label}, ${selectedCountry.label}`} \r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={unknownChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => onClickCheckbox(e, post)} />\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<Flex gridRow=\"1/-1\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<Box w={200} textAlign=\"center\">\r\n\t\t\t\t\t\t\t\t\t<P color=\"label\">There are no consular posts in this country.</P>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Flex gridRow=\"1/-1\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Box w={200} textAlign=\"center\">\r\n\t\t\t\t\t\t\t\t<P color=\"label\">Select a country to see a list of consular posts.</P>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={() => {\r\n\t\t\t\t\t\t\tsetCountry(undefined)\r\n\t\t\t\t\t\t\tonClose()\r\n\t\t\t\t\t\t}}>Leave</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button size=\"sm\"\r\n\t\t\t\t\t\tbuttonType=\"primary\"\r\n\t\t\t\t\t\tdisabled={addDisabled}\r\n\t\t\t\t\t\tonClick={onAddPosts}>\r\n\t\t\t\t\t\tAdd\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\n","import React, { useRef, useState } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Flex, Text, Grid, Image, useDisclosure, VisuallyHidden } from \"@chakra-ui/core\"\r\nimport { Delete } from '@material-ui/icons';\r\nimport { Link, P, FinePrint, Card } from \"@c1ds/components\"\r\n\r\nimport { FormSection, useCTFFormContext } from \"../Forms/Form\"\r\n\r\nimport {AddPostsModal} from '../Modals/AddPostsModal'\r\nimport ImpactedPostsSvg from '../../../static/impactedPosts.svg'\r\n\r\ninterface ImpactedPostsProps {\r\n    impactedPosts? : PostDto[]\r\n}\r\n\r\nconst ImpactedPostsDetails : React.FC<ImpactedPostsProps> = (p : ImpactedPostsProps) => {\r\n    const { impactedPosts } = p\r\n    const { register } = useFormContext<EventFormData>()\r\n    const { isOpen: isPostModalOpen, onOpen: onPostModalOpen, onClose: onPostModalClose } = useDisclosure()\r\n    const [postList, setPostList] = useState<Array<PostDto>>(impactedPosts ?? [])\r\n\r\n    const { isCreate } = useCTFFormContext()\r\n\r\n    return (\r\n        <FormSection title=\"Impacted Posts\" showDivider={isCreate}>\r\n     \r\n            <Box gridColumn={{ base: \"1 / -1\"}}>\r\n                <P>\r\n                    <Text color=\"required\" as=\"span\">\r\n                        *&nbsp;\r\n                    </Text>\r\n                    Which Consular Posts are impacted by this event?&nbsp; For a list of posts,{\" \"}\r\n                    <Link\r\n                        href=\"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463\"\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer noopener\">\r\n                        consult the FAM\r\n                    </Link>\r\n                    .\r\n                </P>\r\n            </Box>\r\n           \r\n            {postList.length > 0 ? \r\n                <Grid\r\n                    gridColumn={{ base: \"1 / -1\", lg: \"span 9\"}}\r\n                    templateRows={{ base: \"1fr 1fr\"}}\r\n                    rowGap={{ base: \"16px\", md: \"24px\" }}>\r\n                    {postList.map((post : PostDto, index : number) => {\r\n                        return (\r\n                            \r\n                            <Card id=\"ctfPost\" maxWidth=\"full\" key={`${post.postValue}-${post.countryValue}-${index}`}>\r\n                                <Controller\r\n                                    ref={register}\r\n                                    name={`impactedPosts[${index}]`}\r\n                                    defaultValue={post}\r\n                                />\r\n                                <Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n                                    <Box flexGrow={1}>\r\n                                        <Box pb={4}>\r\n                                            <FinePrint color=\"label\">{post.countryName}</FinePrint>\r\n                                        </Box>\r\n                                        <P>U.S. Embassy in {post.postLabel}, {post.countryValue}</P>\r\n                                    </Box>\r\n                                    <Box display={{ base: \"none\", md: \"flex\" }} alignItems=\"center\">\r\n                                        <Link\r\n                                            onClick={e => {\r\n                                                e.preventDefault()\r\n                                                setPostList((currPostList) => {\r\n                                                    return [...currPostList.slice(0, index), ...currPostList.slice(index + 1)]\r\n                                                })\r\n                                            }}>\r\n                                            Remove\r\n                                        </Link>\r\n                                    </Box>\r\n                                    <Flex display={{ base: \"flex\", md: \"none\" }} alignItems=\"center\">\r\n                                        <Box as={Delete} right={{ base: \"-12px\" }} color=\"clickable\" />\r\n                                    </Flex>\r\n                                </Flex>\r\n                            </Card>\r\n                        )\r\n                    })}\r\n                    <Link\r\n                        onClick={onPostModalOpen}\r\n                        rel=\"noreferrer noopener\">\r\n                        Add Additional Posts\r\n                    </Link>\r\n                </Grid>\r\n            :\r\n                <Flex \r\n                    h={{base : '240px', md: '280px'}} \r\n                    flexDir=\"column\"\r\n                    alignItems=\"center\"\r\n                    gridColumn={{ base: \"1 / -1\", lg: \"span 9\"}}>\r\n                        <Image\r\n                            h={{base : '172px', md: '212px'}} \r\n                            src={ImpactedPostsSvg} \r\n                            cursor=\"pointer\"\r\n                            alt=\"Posts\"\r\n                            onClick={onPostModalOpen}\r\n                            />\r\n                        <Box textAlign=\"center\" width={{base : '240px', md: '280px'}} >\r\n                            <P color=\"label\">\r\n                                There are no posts associated with this event.&nbsp;\r\n                                <Link\r\n                                    onClick={onPostModalOpen}\r\n                                    rel=\"noreferrer noopener\">\r\n                                    Add Post\r\n                                </Link>\r\n                            </P>\r\n                        </Box>\r\n                </Flex>\r\n            }\r\n            <AddPostsModal\r\n                key={postList.length}\r\n                posts={postList}\r\n                isOpen={isPostModalOpen}\r\n                onClose={onPostModalClose}\r\n                onSetPosts={setPostList}\r\n            />\r\n\t\t</FormSection>\r\n    )\r\n}\r\n\r\nexport default ImpactedPostsDetails\r\n","import React, { useCallback } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Button, LinkButton } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { DataLossModal } from \"../Modals/DataLossModal\"\r\nimport { SaveModal } from \"../Modals/SaveModal\"\r\nimport { useForm, FormProvider } from \"react-hook-form\"\r\nimport { getSavedForm, useSavedForm } from \"../../components/Utility/formHelpers\"\r\nimport { Form, useCTFFormContext } from \"./Form\"\r\nimport Layout, { LayoutProps } from \"../../components/Layout\"\r\nimport EvacDetails from \"../FormSections/EvacDetails\"\r\nimport EventDetails from \"../FormSections/EventDetails\"\r\nimport TalkingPointsDetails from \"../FormSections/TalkingPointsDetails\"\r\nimport ImpactedPostsDetails from \"../FormSections/ImpactedPostsDetails\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst EventForm: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { isCreate, isEdit, formSection } = useCTFFormContext()\r\n\r\n\tconst { isOpen: isDataLossOpen, onOpen: onDataLossOpen, onClose: onDataLossClose } = useDisclosure()\r\n\r\n\tconst { isOpen: isSaveOpen, onOpen: onSaveOpen, onClose: onSaveClose } = useDisclosure()\r\n\tconst [, updateSavedForm] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst defaultValues = {\r\n\t\t// Mimic key generation for Crisis\r\n\t\teventId: `OCS${moment(new Date()).format(\"YYYYDDD\")}${Math.floor(Math.random() * Math.floor(1000000))}`,\r\n\t\teventTitle: \"\",\r\n\t\teventStartDate: new Date(),\r\n\t\tactiveIndicator: true,\r\n\t\tattachments: [],\r\n\t\tmanagementTypeCode: \"mg\",\r\n\t\t// 1.13 The system defaults the Event Type to General.\r\n\t\teventTypeId: \"General\",\r\n\t\teventSummary: \"\",\r\n\t\t// 1.16.1 The system defaults the Evacuation Status to blank\r\n\t\tevacStatusCode: \"NONE\",\r\n\t\tevacSummary: \"\",\r\n\t\timpactedPosts: [],\r\n\t\tlastUpdatedDateTime: new Date(),\r\n\t}\r\n\r\n\tconst formMethods = useForm<EventFormData>({\r\n\t\tmode: \"onBlur\",\r\n\t\tdefaultValues: savedEvent ?? defaultValues,\r\n\t})\r\n\tconst { register, handleSubmit, getValues } = formMethods\r\n\r\n\tconst onSubmit = useCallback(\r\n\t\t(data, skipNavigate = false) => {\r\n\t\t\tdata.lastUpdatedDateTime = new Date()\r\n\t\t\tdata.impactedPosts = data.impactedPosts ?? []\r\n\t\t\tdata.attachments = []\r\n\t\t\tconst currForm = getSavedForm<EventFormData[]>(\"ctfForms\", \"events\", [])\r\n\t\t\tif (isEdit) {\r\n\t\t\t\tconst savedIdx = currForm.findIndex((evt: EventFormData) => evt.eventId === data.eventId)\r\n\t\t\t\t// Merge existing saved data with updates in case any fields are not present in section's form data\r\n\t\t\t\tconst updatedEvent = { ...currForm[savedIdx], ...data }\r\n\t\t\t\tcurrForm.splice(savedIdx, 1, updatedEvent)\r\n\t\t\t} else {\r\n\t\t\t\tcurrForm.push(data)\r\n\t\t\t}\r\n\t\t\tupdateSavedForm(currForm)\r\n\t\t\t// console.log(data)\r\n\t\t\tonSaveOpen()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (skipNavigate) {\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: Once microservice is connected, use returned eventId/event data\r\n\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t\tformSection,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t}\r\n\t\t\t}, 2000)\r\n\t\t},\r\n\t\t[updateSavedForm, isEdit, onSaveOpen, onSaveClose, getValues, formSection]\r\n\t)\r\n\r\n\tlet pageHeading, pageDescription, breadcrumbs: LayoutProps[\"breadcrumbs\"]\r\n\tif (isEdit) {\r\n\t\tif (formSection === \"overview\") {\r\n\t\t\tpageHeading = \"Edit Event Details\"\r\n\t\t\tpageDescription = \"Edit the basic information related to the developing crisis.\"\r\n\t\t\tbreadcrumbs = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Event\",\r\n\t\t\t\t\tonClick: onDataLossOpen,\r\n\t\t\t\t},\r\n\t\t\t\t{ label: \"Edit Event Details\" },\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\tpageHeading = \"Edit Event Details\"\r\n\t\t\tpageDescription = \"Edit the basic information related to the developing crisis.\"\r\n\t\t\tbreadcrumbs = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Event\",\r\n\t\t\t\t\tonClick: onDataLossOpen,\r\n\t\t\t\t},\r\n\t\t\t\t{ label: \"Edit Event Details\" },\r\n\t\t\t]\r\n\t\t}\r\n\t} else {\r\n\t\tpageHeading = \"Create New Event\"\r\n\t\tpageDescription =\r\n\t\t\t\"Enter the basic information related to the developing crisis. You can add more details later as the event unfolds.\"\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Layout pageTitle=\"Event Details\" pageHeading={pageHeading} pageDescription={pageDescription} breadcrumbs={breadcrumbs}>\r\n\t\t\t<FormProvider {...formMethods}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"eventForm\"\r\n\t\t\t\t\tid=\"eventForm\"\r\n\t\t\t\t\tonSubmit={handleSubmit(data => {\r\n\t\t\t\t\t\tonSubmit(data, false)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tnoValidate={true}>\r\n\t\t\t\t\t<input name=\"eventId\" type=\"hidden\" ref={register} />\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && <EventDetails hideTitle={isEdit} />}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && <TalkingPointsDetails />}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && (\r\n\t\t\t\t\t\t<ImpactedPostsDetails impactedPosts={savedEvent?.impactedPosts} />\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"evacuation\")) && <EvacDetails />}\r\n\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tas=\"nav\"\r\n\t\t\t\t\t\taria-label=\"page\"\r\n\t\t\t\t\t\tid=\"pageNav\"\r\n\t\t\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\tjustify={{ base: \"flex-end\", md: \"flex-start\" }}\r\n\t\t\t\t\t\tmarginTop={{ md: \"72\" }}>\r\n\t\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t\t<LinkButton type=\"button\" onClick={onDataLossOpen}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Button type=\"submit\" size={isEdit ? \"sm\" : \"md\"}>\r\n\t\t\t\t\t\t\t{isEdit ? \"Save\" : \"Create Event\"}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Flex>\r\n\r\n\t\t\t\t\t<DataLossModal\r\n\t\t\t\t\t\tisOpen={isDataLossOpen}\r\n\t\t\t\t\t\tonClose={onDataLossClose}\r\n\t\t\t\t\t\tonLeave={() => {\r\n\t\t\t\t\t\t\tif (isCreate) {\r\n\t\t\t\t\t\t\t\tnavigate(\"/\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t\t\t\t\tformSection,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SaveModal\r\n\t\t\t\t\t\tisOpen={isSaveOpen}\r\n\t\t\t\t\t\tonClose={onSaveClose}\r\n\t\t\t\t\t\tmessage={isCreate ? \"Creating crisis event.\" : \"Saving crisis information.\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t</FormProvider>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nexport default EventForm\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z\"\n}), 'EditSharp');","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider, Text } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, Link, H3, IconAlignment, Card } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\nconst TALKINGPOINTSOPURL = 'https://clmccm-usdos.msappproxy.net/ccm/resource/itemName/com.ibm.team.workitem.Attachment/13685'\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface OverviewTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const OverviewTab: React.FC<OverviewTabProps> = (p: OverviewTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst eventType = eventTypes.find((eventType: Option) => eventType.value === eventData.eventTypeId)?.label\r\n\tconst mgmtType = mgmtTypes.find((mgmtType: Option) => mgmtType.value === eventData.managementTypeCode)?.label\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\tconst talkingPoint = eventData.talkingPoints\r\n\tconst impactedPosts = eventData.impactedPosts\r\n\r\n\tconst talkingPointFileName = talkingPoint && talkingPoint.fileName ? talkingPoint.fileName : 'Talking Points SOP.docx'\r\n\r\n\tconst isActive = !!eventData.activeIndicator\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Event Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"overview\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tfontFamily=\"default\"\r\n\t\t\t\t\t\tcolor={isActive ? \"success\" : \"label\"}\r\n\t\t\t\t\t\tfontSize=\"base\"\r\n\t\t\t\t\t\tfontWeight=\"h3\"\r\n\t\t\t\t\t\tlineHeight=\"normal\"\r\n\t\t\t\t\t\tmargin={0}>\r\n\t\t\t\t\t\t{displayData(isActive ? \"Active\" : \"Inactive\")}\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"7 / 9\" }} gridRow={{ md: \"3\", lg: \"auto\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"3 / 5\" }} gridRow={{ lg: \"2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Start Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventStartDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"5 / 7\" }} gridRow={{ lg: \"2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">End Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventEndDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Management Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(mgmtType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Description</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.eventSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Talking Points</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>Default Talking Points have been added, pending new Talking Points.</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }} marginTop={{ base: \"24\", sm: \"0\", md: \"24\" }}>\r\n\t\t\t\t\t<Box mb={{ base: \"4px\", md: \"-12px\" }} >\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Uploaded file</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <P>{displayData(eventData.eventSummary)}</P> */}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{/* 1.9 The system uses the Default Talking Points (see user story 177855) when no file has been uploaded.\r\n\t\t\t\t\t1.10 The user has an option to view the content of the Default Talking Points. */}\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<Card id={`talkingPointItem`} >\r\n\t\t\t\t\t\t<Flex \r\n\t\t\t\t\t\t\tw=\"full\" \r\n\t\t\t\t\t\t\tmy={{ base: \"-8px\", sm: \"-0px\" }} \r\n\t\t\t\t\t\t\tflexDir={{ base: \"row\" }}>\r\n\t\t\t\t\t\t\t<Flex flexGrow={1} justifyContent=\"flex-start\">\r\n\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\thref={talkingPoint ? `${talkingPoint.fileDataURL}` : TALKINGPOINTSOPURL} \r\n\t\t\t\t\t\t\t\t\tdownload={talkingPointFileName}>\r\n\t\t\t\t\t\t\t\t\t{talkingPointFileName}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Impacted Posts</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\"}}>\r\n\t\t\t\t\t<P>\r\n\t\t\t\t\t\t<Text color=\"required\" as=\"span\">\r\n\t\t\t\t\t\t\t*&nbsp;\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\tWhich Consular Posts are impacted by this event?&nbsp; For a list of posts,{\" \"}\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\thref=\"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noreferrer noopener\">\r\n\t\t\t\t\t\t\tconsult the FAM\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t.\r\n\t\t\t\t\t</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Grid\r\n                    gridColumn={{ base: \"1 / -1\"}}\r\n                    templateRows={{ base: \"1fr 1fr\"}}\r\n                    rowGap={{ base: \"16px\", md: \"24px\" }}>\r\n                    {impactedPosts && impactedPosts.map((post : PostDto) => {\r\n                        return (\r\n                            <Card id=\"ctfPost\" maxWidth=\"full\" key={`${post.postValue}-${post.countryValue}`}>\r\n                                <Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n\t\t\t\t\t\t\t\t\t<Box flexGrow={1}>\r\n\t\t\t\t\t\t\t\t\t\t<Box pb={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">{post.countryName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<P>U.S. Embassy in {post.postLabel}, {post.countryValue}</P>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n                                </Flex>\r\n                            </Card>\r\n                        )\r\n                    })}\r\n                </Grid>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"-\")\r\n","import React from \"react\"\r\nimport { Box, Flex, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeactivateModalProps {\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tlocationName?: string\r\n\t/**\r\n\t * Indicates whether modal is for last known location activation.\r\n\t *\r\n\t * If true, confirmation button/description will display \"Activate\"\r\n\t *\r\n\t * If false, confirmation button/description will display \"Deactivate\"\r\n\t *\r\n\t * If undefined, confirmation button/description will display \"Yes\"\r\n\t */\r\n\tisActivate?: boolean\r\n}\r\n\r\nconst buttonStyle = {\r\n\tdefault: {\r\n\t\tbg: \"badge\",\r\n\t\tcolor: \"white\",\r\n\t\tborder: \"none\",\r\n\t},\r\n\thoverFocus: {\r\n\t\tborderStyle: \"solid\",\r\n\t\tborderWidth: \"2\",\r\n\t\tborderColor: \"accent\",\r\n\t},\r\n\tactive: {\r\n\t\tbg: \"#a30014\",\r\n\t\tborder: \"none\",\r\n\t},\r\n}\r\n\r\nconst DeactivateLklModal: React.FC<DeactivateModalProps> = ({\r\n\tisOpen,\r\n\tonCancel,\r\n\tonConfirm,\r\n\tlocationName,\r\n\tisActivate,\r\n}: DeactivateModalProps) => {\r\n\t// if locationName and isActivate are not defined, it will prompt default Deactivate Modal with no event information.\r\n\tconst status = isActivate ? \"Activate\" : \"Deactivate\"\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>{status} Last Known Location?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>\r\n\t\t\t\t\tAre you sure you want to {status.toLocaleLowerCase()} {locationName ?? \"this last known location?\"}?\r\n\t\t\t\t</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{typeof isActivate === \"undefined\" ? (\r\n\t\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\t\tYES\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : !isActivate ? (\r\n\t\t\t\t\t\t// Deactivate button with warning background color.\r\n\t\t\t\t\t\t<ChakraButton\r\n\t\t\t\t\t\t\theight=\"input\"\r\n\t\t\t\t\t\t\twidth=\"buttonMd\"\r\n\t\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\t\t\tfontWeight=\"button\"\r\n\t\t\t\t\t\t\tpx={20}\r\n\t\t\t\t\t\t\tpy={12}\r\n\t\t\t\t\t\t\t{...buttonStyle.default}\r\n\t\t\t\t\t\t\t_focus={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_hover={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_active={buttonStyle.active}\r\n\t\t\t\t\t\t\tonClick={onConfirm}>\r\n\t\t\t\t\t\t\t<Box flex=\"1 1 0\" lineHeight=\"normal\">\r\n\t\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ChakraButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button size={isActivate ? \"md\" : \"sm\"} onClick={onConfirm}>\r\n\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeactivateLklModal\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z\"\n}), 'ExpandLessSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"\n}), 'ExpandMoreSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"\n})), 'LocationOnSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'PersonSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M22 4H2v16h20V4zm-2 4l-8 5-8-5V6l8 5 8-5v2z\"\n}), 'EmailSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M21 15.46l-5.27-.61-2.52 2.52c-2.83-1.44-5.15-3.75-6.59-6.59l2.53-2.53L8.54 3H3.03C2.45 13.18 10.82 21.55 21 20.97v-5.51z\"\n}), 'PhoneSharp');","import React, { useState } from \"react\"\r\n\r\nimport { Flex, Box, PseudoBox, Divider, Text, useDisclosure, BoxProps } from \"@chakra-ui/core\"\r\nimport { P, H4, Card, FinePrint } from \"@c1ds/components\"\r\n\r\nimport Dropdown from \"../components/Dropdown\"\r\nimport DeactivateLklModal from \"../components/Modals/DeactivateLklModal\"\r\nimport { useSavedForm } from \"../components/Utility/formHelpers\"\r\n\r\nimport {\r\n\tMoreVertSharp,\r\n\tLocationOnSharp,\r\n\tPersonSharp,\r\n\tEmailSharp,\r\n\tPhoneSharp,\r\n\tExpandLessSharp,\r\n\tExpandMoreSharp,\r\n} from \"@material-ui/icons\"\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\n\r\ntype OmittedBoxProps = \"transition\" | \"style\"\r\n\r\nconst MotionBox = motion.custom<Omit<BoxProps, OmittedBoxProps>>(Box)\r\ninterface LKLCard {\r\n\tlklData: LklDto\r\n\tsetEventData: (eventdata: EventFormData) => void\r\n}\r\n\r\nconst LKLCard: React.FC<LKLCard> = ({ lklData, setEventData }: LKLCard) => {\r\n\tconst [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst checkActive = lklData.activeIndicator\r\n\t// If tabCurrent is true, Location Tab selected otherwise, POC Tab selected\r\n\tconst [tabCurrent, setTabCurrent] = useState(true)\r\n\tconst [isDetailOpen, setIsDetailOpen] = useState(false)\r\n\tconst [direction, setDirection] = useState(1)\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\r\n\t// const [detailsSectionHeight, setHeight] = useState(200)\r\n\r\n\tconst pocIconProps = {\r\n\t\tmr: 4,\r\n\t\talignSelf: \"center\",\r\n\t\tsize: \"iconPoc\",\r\n\t\tcolor: \"label\",\r\n\t}\r\n\tconst detailsTabProps = {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tpy: 4,\r\n\t\tfontWeight: 600,\r\n\t\tfontSize: 16,\r\n\t\tcolor: \"headingLarge\",\r\n\t}\r\n\r\n\t// TODO : need to improve how to update entire Event DTO efficiently\r\n\tconst onChangeActivation = () => {\r\n\t\tlet lklDtoIndex = null\r\n\t\tconst updateEventIndex = savedEvents.findIndex((evt: EventFormData) => {\r\n\t\t\tlet foundLklDto = null\r\n\t\t\tif (evt.eventId === lklData.eventId) {\r\n\t\t\t\tfoundLklDto = evt.eventLklDtoList.find((lklDto: LklDto, index: number) => {\r\n\t\t\t\t\tif (lklDto.eventLklId === lklData.eventLklId) {\r\n\t\t\t\t\t\tlklDtoIndex = index\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn foundLklDto ? true : false\r\n\t\t})\r\n\t\tconst tempLklDto = savedEvents[updateEventIndex].eventLklDtoList[lklDtoIndex]\r\n\t\tconst tempLklDtoList = savedEvents[updateEventIndex].eventLklDtoList\r\n\t\ttempLklDtoList.splice(lklDtoIndex, 1, {\r\n\t\t\t...tempLklDto,\r\n\t\t\tactiveIndicator: !checkActive,\r\n\t\t\tlastUpdatedDateTime: new Date(),\r\n\t\t})\r\n\t\tconst updatedEvents = {\r\n\t\t\t...savedEvents[updateEventIndex],\r\n\t\t\teventLklDtoList: tempLklDtoList,\r\n\t\t}\r\n\t\t// Update the current Event to reflect the new LKL list in ViewEvent component\r\n\t\tsetEventData(updatedEvents)\r\n\t\tsavedEvents.splice(updateEventIndex, 1, updatedEvents)\r\n\r\n\t\tupdateSavedEvents(savedEvents)\r\n\t\tonDeactivateClose()\r\n\t}\r\n\r\n\t// 1.4          The user can see the following fields inside each Last Known Location on the list\r\n\t//          Location Title\r\n\t//          Country\r\n\t//          Post\r\n\t//          Location Status\r\n\t//          [Location Description] - expand chevron  (Address, Point of Contact)\r\n\t//          [Additional Action]  Edit\r\n\t//          [Additional Action]  Deactivate?\r\n\tconst options = [\r\n\t\t{\r\n\t\t\tlabel: \"Edit Location\",\r\n\t\t\tvalue: \"Edit\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\t// navigate(\"/event\", { state: { eventId: , isEdit: true } })\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: checkActive ? \"Deactivate\" : \"Activate\",\r\n\t\t\tvalue: \"Deactivate\",\r\n\t\t\ttype: checkActive ? (\"error\" as const) : (\"primary\" as const),\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonDeactivateOpen()\r\n\t\t\t},\r\n\t\t},\r\n\t]\r\n\r\n\tconst { lklTitle, locationDesc, lklAddressDto, lklPocListDto }: LookupLklDto = lklData.lookupLklDto\r\n\tconst { address1, address2, city, stateCd, postalCode, countryCd }: AddressDto = lklAddressDto.addressDto\r\n\tconst isUSA = countryCd === \"US\" ? `${city}, ${stateCd}, ${postalCode}` : `${city}, ${postalCode}`\r\n\tconst fullAddress = `${address1} ${address2}, ${isUSA}, ${countryCd}`\r\n\r\n\tconst pocInfo: Array<{ fullName: string; phone: string[]; email: string[] }> = []\r\n\tlklPocListDto.map((lklPocListDto: LklPocListDto) => {\r\n\t\tconst extractedPoc = { fullName: \"\", phone: Array<string>(), email: Array<string>() }\r\n\t\tconst { givenName, surName, personEmailDtoList, personPhoneDtoList }: PersonDto = lklPocListDto.personDto\r\n\t\textractedPoc.fullName = `${givenName} ${surName}`\r\n\r\n\t\t// TODO: cases for multiple phones and emails\r\n\t\tpersonPhoneDtoList.map((personPhoneDto: PersonPhoneDto) => {\r\n\t\t\textractedPoc.phone.push(personPhoneDto.phoneDto.phoneNum)\r\n\t\t})\r\n\t\tpersonEmailDtoList.map((personEmailDto: PersonEmailDto) => {\r\n\t\t\textractedPoc.email.push(personEmailDto.emailDto.emailAddress)\r\n\t\t})\r\n\t\tpocInfo.push(extractedPoc)\r\n\t})\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Box backgroundColor={checkActive ? \"success\" : \"silver\"} h={3} w=\"full\" />\r\n\t\t\t<Card id=\"lklCard\" maxWidth=\"full\">\r\n\t\t\t\t<Flex w=\"full\" mt={{ base: \"-8px\", sm: \"-16px\" }}>\r\n\t\t\t\t\t<Flex flexDir={{ base: \"column\", xl: \"row\" }} flexGrow={1}>\r\n\t\t\t\t\t\t<Box flexBasis={{ xl: \"65%\" }}>\r\n\t\t\t\t\t\t\t<P>{lklTitle}</P>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* location address */}\r\n\t\t\t\t\t\t<Box mb={4} flexBasis={{ xl: \"35%\" }}>\r\n\t\t\t\t\t\t\t<FinePrint color=\"label\">\r\n\t\t\t\t\t\t\t\tU.S. Embassy in {city}, {countryCd}\r\n\t\t\t\t\t\t\t</FinePrint>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Box position=\"relative\" right={{ base: \"-12px\", sm: \"-20px\", md: \"-12px\" }}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tborderedRows={true}\r\n\t\t\t\t\t\t\twidth=\"10rem\"\r\n\t\t\t\t\t\t\tlabel={`Additional actions for ${lklTitle}`}>\r\n\t\t\t\t\t\t\t<Box as={MoreVertSharp} color=\"clickable\" />\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<DeactivateLklModal\r\n\t\t\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\t\t\tlocationName={lklTitle}\r\n\t\t\t\t\t\tisActivate={!checkActive}\r\n\t\t\t\t\t\tonConfirm={onChangeActivation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Detail, hide when  */}\r\n\t\t\t\t<Flex mt={8} mb={-12}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\t\tdisplay=\"inline-flex\"\r\n\t\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t\tborder=\"none\"\r\n\t\t\t\t\t\tbackgroundColor=\"transparent\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetIsDetailOpen(!isDetailOpen)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\taria-expanded={isDetailOpen}\r\n\t\t\t\t\t\taria-controls=\"detailsToggleButton\"\r\n\t\t\t\t\t\taria-label={`Details toggle button for ${lklTitle}`}\r\n\t\t\t\t\t\tcolor=\"clickable\">\r\n\t\t\t\t\t\t<Text my={0} fontSize={16}>\r\n\t\t\t\t\t\t\tDetails\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t{isDetailOpen ? <ExpandLessSharp /> : <ExpandMoreSharp />}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Location */}\r\n\t\t\t\t{isDetailOpen ? (\r\n\t\t\t\t\t// TODO: Dynamic height with useEffect\r\n\t\t\t\t\t<Box id=\"detailsToggleButton\" position=\"relative\" overflow=\"hidden\">\r\n\t\t\t\t\t\t<Divider borderColor=\"silver\" my={16} />\r\n\t\t\t\t\t\t{/* Detail Tabs before extra large view*/}\r\n\t\t\t\t\t\t<Box display={{ xl: \"none\" }}>\r\n\t\t\t\t\t\t\t<Flex mb={16}>\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 3 : 0}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {}\r\n\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(-1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(true)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmr={8}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t\t<Box mx={8} />\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 0 : 3}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t: {}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(false)\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tPoint of Contact\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t<AnimatePresence custom={direction} initial={false}>\r\n\t\t\t\t\t\t\t\t<MotionBox\r\n\t\t\t\t\t\t\t\t\tposition=\"relative\"\r\n\t\t\t\t\t\t\t\t\tinitial={{ transform: `translateX(${direction < 0 ? \"-100%\" : \"100%\"})` }}\r\n\t\t\t\t\t\t\t\t\ttransition={{\r\n\t\t\t\t\t\t\t\t\t\ttype: \"tween\",\r\n\t\t\t\t\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\t\t\t\t\tease: \"easeInOut\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tanimate={{\r\n\t\t\t\t\t\t\t\t\t\ttransform: \"translateX(0%)\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\texit={(currDirection: number) => ({\r\n\t\t\t\t\t\t\t\t\t\ttransform: `translateX(${currDirection < 0 ? \"100%\" : \"-100%\"})`,\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\twidth=\"100%\">\r\n\t\t\t\t\t\t\t\t\t{tabCurrent ? (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexDir={{ base: \"column\", md: \"row\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpx={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmy={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent=\"space-around\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</MotionBox>\r\n\t\t\t\t\t\t\t</AnimatePresence>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* Detail Tabs at extra large view*/}\r\n\t\t\t\t\t\t<Flex display={{ base: \"none\", xl: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"63%\" }}>\r\n\t\t\t\t\t\t\t\t<Box pb={16}>\r\n\t\t\t\t\t\t\t\t\t<H4>Location</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" flexBasis={{ xl: \"2%\" }} color=\"silver\" />\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"35%\" }}>\r\n\t\t\t\t\t\t\t\t<Box pb={16}>\r\n\t\t\t\t\t\t\t\t\t<H4>Point of Contact</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tflexDir=\"column\"\r\n\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\tpx={8}\r\n\t\t\t\t\t\t\t\t\t\t\tmy={8}\r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent=\"space-around\"\r\n\t\t\t\t\t\t\t\t\t\t\tflexWrap=\"wrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t) : null}\r\n\t\t\t</Card>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default LKLCard\r\n","import React, { useState } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport moment from \"moment\"\r\n\r\nimport { Flex, Box, Grid, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, H3, C1_DATE_FORMAT as DateFormat, LinkButton, IconAlignment } from \"@c1ds/components\"\r\n\r\nimport LKLCard from \"../LKLCard\"\r\nimport HideInactiveButton from \"../HideInactiveButton\"\r\nimport { LklPageState } from \"../../pages/addLKL\"\r\n\r\nimport Pagination from \"@material-ui/lab/Pagination\"\r\nimport { AddSharp } from \"@material-ui/icons\"\r\n\r\nconst DateTimeFormat = `${DateFormat} HH:mm:ss:SS ZZ`\r\n\r\ninterface LastKnownLocationTabProps {\r\n\teventData: EventFormData\r\n\tsetEventData: (eventdata: EventFormData) => void\r\n}\r\n\r\nexport const LastKnownLocationTab: React.FC<LastKnownLocationTabProps> = (p: LastKnownLocationTabProps) => {\r\n\t// Currently using the first event eventLklDtoList for demonstration\r\n\tconst { eventData, setEventData } = p\r\n\r\n\tconst eventLklDtoList: LklDto[] =\r\n\t\teventData.eventLklDtoList?.map(eventLklDto => {\r\n\t\t\tconst eventLklDtoWithDate: LklDto = {\r\n\t\t\t\t...eventLklDto,\r\n\t\t\t\tcreatedDateTime: moment(eventLklDto.createdDateTime, DateTimeFormat).toDate(),\r\n\t\t\t\tlastUpdatedDateTime: moment(eventLklDto.lastUpdatedDateTime, DateTimeFormat).toDate(),\r\n\t\t\t}\r\n\t\t\treturn eventLklDtoWithDate\r\n\t\t}) ?? []\r\n\tconst [page, setPage] = useState(1)\r\n\tconst [lklsPerPage, setLklsPerPage] = useState(10)\r\n\tconst [hideInactive, setHideInactive] = useState(true)\r\n\r\n\t/**\r\n\t * 1.5 The system displays the default location list with Active location status and sort by Last Updated Date (Still working on the UI)\r\n\t */\r\n\teventLklDtoList.sort((a: LklDto, b: LklDto) => {\r\n\t\tconst aLastUpdatedTime = a.lastUpdatedDateTime ?? new Date()\r\n\t\tconst bLastUpdatedTime = b.lastUpdatedDateTime ?? new Date()\r\n\t\t// Descending order\r\n\t\tconst direction = -1\r\n\t\tif (aLastUpdatedTime > bLastUpdatedTime) return direction\r\n\t\tif (aLastUpdatedTime < bLastUpdatedTime) return -direction\r\n\t\treturn 0\r\n\t})\r\n\tconst controlledLkls = eventLklDtoList.filter((event: LklDto) => {\r\n\t\tif (hideInactive) return event.activeIndicator\r\n\t\telse return true\r\n\t})\r\n\r\n\tconst numOfPages = Math.ceil(controlledLkls.length / lklsPerPage)\r\n\t// Update the page number when inactive events are hidden\r\n\tif (page > numOfPages) setPage(numOfPages)\r\n\r\n\tconst indexOfLastEvent = page * lklsPerPage\r\n\tconst indexOfFirstEvent = indexOfLastEvent - lklsPerPage\r\n\r\n\tconst isMultiplePages = controlledLkls.length > lklsPerPage\r\n\tconst totalPages = isMultiplePages ? Math.ceil(controlledLkls.length / lklsPerPage) : 1\r\n\tconst lklsOnPage = totalPages !== 1 ? controlledLkls.slice(indexOfFirstEvent, indexOfLastEvent) : controlledLkls\r\n\r\n\treturn (\r\n\t\t// first Flex will be removed once tabular view is established\r\n\t\t/**\r\n            1.1     The user can access the Last Known Locations (list) screen by click on Last Known Locations menu item when editing an event.\r\n            1.2     The user can see the Event Title of the event that is being edited on top of the screen\r\n        */\r\n\r\n\t\t<Grid\r\n\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\tgridTemplateColumns={{\r\n\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t}}>\r\n\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<H3>Last Known Locations</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\tbuttonIcon={{ mdIcon: AddSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst pageState: LklPageState = {\r\n\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnavigate(\"/addLKL\", { state: pageState })\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t&nbsp;Add Location\r\n\t\t\t\t\t</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t</Flex>\r\n\t\t\t<Box gridColumn=\"1 / -1\" mt={-16}>\r\n\t\t\t\t<P>Manage the last known locations for U.S. citizens involved in this crisis.</P>\r\n\t\t\t</Box>\r\n\t\t\t{/* 1.8     The user can set Hide Inactive Location to NO to view all \r\n                    last known locations (Active and Inactive) order by default Last Updated Date */}\r\n\t\t\t{/* <Box mr={20}>\r\n                        <HideInactiveButton onToggleHideInactive={() => {return}} />\r\n                    </Box> */}\r\n\t\t\t<Box bottom=\"16px\" zIndex={2} right=\"16px\" position=\"fixed\" display={{ md: \"none\" }}>\r\n\t\t\t\t<ChakraButton\r\n\t\t\t\t\tborderColor=\"transparent\"\r\n\t\t\t\t\tboxShadow=\"0 6px 6px 0 rgba(0, 0, 0, 0.4)\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\theight=\"40px\"\r\n\t\t\t\t\twidth=\"40px\"\r\n\t\t\t\t\trounded=\"round\"\r\n\t\t\t\t\tbg=\"clickable\"\r\n\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t_hover={{\r\n\t\t\t\t\t\tbg: \"secondary\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => navigate(\"/addLKL\")}>\r\n\t\t\t\t\t<Box as={AddSharp} size=\"iconMobileCreate\" />\r\n\t\t\t\t</ChakraButton>\r\n\t\t\t</Box>\r\n\t\t\t{/* LKL card list*/}\r\n\t\t\t{/* 1.3     The user can see the following fields on View Last Known Location screen\r\n\t\t\t\t         Hide Inactive Location - Indicator\r\n\t\t\t\t         [Add Location]  button\r\n\t\t\t\t         Last Known Location - card\r\n\t\t\t\t         Pagination\r\n\t\t\t\t1.6     The system defaults Hide Inactive Location to YES  (Still working on the UI)\r\n\t\t\t\t1.7     The user can distinguish active or inactive last known location visually.  (Still working on the UI)\r\n\t\t\t*/}\r\n\t\t\t<Flex\r\n\t\t\t\tgridColumn={{ base: \"1 / 3\", md: \"1 / -1\" }}\r\n\t\t\t\tgridRow={{ base: \"3\", md: \"auto\" }}\r\n\t\t\t\tjustify={{ base: \"flex-start\", md: \"flex-end\" }}>\r\n\t\t\t\t<HideInactiveButton onToggleHideInactive={() => setHideInactive(!hideInactive)} />\r\n\t\t\t</Flex>\r\n\r\n\t\t\t{lklsOnPage.map((lklData: LklDto, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Box key={index} gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t<LKLCard lklData={lklData} setEventData={setEventData} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\r\n\t\t\t{/* 1.9     The system displays the proper pagination at bottom of the Last \r\n                            Known Location List, each page contains X number of records.  \r\n                            (X is based on C1 design) \r\n\t\t\t\t1.10    The user can browse through additional Last Known Locations \r\n\t\t\t\t\t\tby using the pagination controls (e.g. First, Next, Last, Page Number etc.) .\r\n                    \r\n\t\t\t\tPagination is not yet build in wireframe, so this is just place holder.\r\n                */}\r\n\t\t\t{/* pagination */}\r\n\r\n\t\t\t<Flex gridColumn=\"1 / -1\" justify=\"space-evenly\">\r\n\t\t\t\t<P>{eventLklDtoList.length} results</P>\r\n\t\t\t\t<Pagination page={page} count={totalPages} onChange={(_, value) => setPage(value)} showLastButton size=\"small\" />\r\n\t\t\t\t<select>\r\n\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t<option value=\"20\">20</option>\r\n\t\t\t\t</select>\r\n\t\t\t</Flex>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, H3, IconAlignment } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface EvacDetailsTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const EvacDetailsTab: React.FC<EvacDetailsTabProps> = (p: EvacDetailsTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Evacuation Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"evacuation\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Authorized</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepAuthDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Ordered</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepOrdDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Summary</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.evacSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"-\")\r\n","import React, { useRef } from \"react\"\r\nimport { Box, useDisclosure, Flex, Divider, VisuallyHidden } from \"@chakra-ui/core\"\r\nimport { Link, Card } from \"@c1ds/components\"\r\nimport { MoreVertSharp } from \"@material-ui/icons\"\r\nimport { useSavedForm } from \"./Utility/formHelpers\"\r\nimport DeleteFileModal from \"./Modals/DeleteFileModal\"\r\nimport Dropdown from \"./Dropdown\"\r\n\r\ninterface AttachmentCardProp {\r\n    attachmentDto: AttachmentDto\r\n    eventData: EventFormData\r\n    setAttachmentDtoList: React.Dispatch<React.SetStateAction<AttachmentDto[]>>\r\n    setEventData: (eventData: EventFormData) => void\r\n    setErrorMsg: React.Dispatch<React.SetStateAction<string>>\r\n}\r\n\r\nconst AttachmentCard: React.FC<AttachmentCardProp> = (p: AttachmentCardProp) => {\r\n    const { attachmentDto, eventData, setAttachmentDtoList, setEventData, setErrorMsg } = p\r\n    const { attachments } = eventData\r\n\r\n    const [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n    const { isOpen: isAttachmentOpen, onOpen: onAttachmentOpen, onClose: onAttachmentClose } = useDisclosure()\r\n\r\n    const attachmentRef = useRef<HTMLInputElement>(null)\r\n\r\n    // 1.5 The system accepts the following file format of the selected file\r\n\t//  Image(.jpg, .jpeg, .gif, .png)\r\n\t//  Spreadsheet(.xls, .xlsx)\r\n\t//  Text File(.doc, docx, .txt, .rtf, .pdf)\r\n\tconst acceptedFileFormats = [\r\n\t\t\"image/jpeg\",\r\n\t\t\"image/gif\",\r\n\t\t\"image/png\",\r\n\t\t\"application/vnd.ms-excel\",\r\n\t\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n\t\t\"application/msword\",\r\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n\t\t\"text/plain\",\r\n\t\t\"application/rtf\",\r\n\t\t\"application/pdf\",\r\n    ]\r\n    \r\n    const cardOptions = [\r\n\t\t{\r\n\t\t\tlabel: \"Replace\",\r\n\t\t\tvalue: \"Replace\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tattachmentRef.current?.click()\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Remove\",\r\n\t\t\tvalue: \"Remove\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonAttachmentOpen()\r\n\t\t\t},\r\n\t\t},\r\n\t]\r\n\r\n    const setFileOnCard = (file: File) => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => {\r\n            if (eventData && eventData.attachments) {\r\n                eventData.attachments[eventData.attachments.indexOf(attachmentDto)] = {\r\n                    fileName: file.name,\r\n                    fileSize: file.size,\r\n                    fileMimeType: file.type,\r\n                    fileDataURL: reader.result,\r\n                }\r\n                setAttachmentDtoList([...eventData.attachments])\r\n                setEventData(eventData)\r\n                const savedEventIndex = savedEvents.findIndex((evt: EventFormData) => evt.eventId === eventData.eventId)\r\n                savedEvents.splice(savedEventIndex, 1, eventData)\r\n                updateSavedEvents(savedEvents)\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <Card id=\"attachmentCard\" maxWidth=\"full\">\r\n                <Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n                    {/* 1.4 The user can see the following information on the Attachment card\r\n                 Filename name (hyperlinked)\r\n                 [Replace] Function\r\n                 [Remove] function */}\r\n                    {/* 1.5 The user can click on the hyperlinked Attachment filename to download the file and view the content. */}\r\n                    <Flex flexGrow={1} justifyContent=\"flex-start\">\r\n                        <Link href={`${attachmentDto.fileDataURL}`} download={attachmentDto.fileName}>\r\n                            {attachmentDto.fileName}\r\n                        </Link>\r\n                    </Flex>\r\n                    <Flex display={{ base: \"none\", md: \"flex\" }} flexGrow={1} justifyContent=\"flex-end\">\r\n                        <Link\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                setErrorMsg(\"\")\r\n                                attachmentRef.current?.click()\r\n                            }}>\r\n                            Replace\r\n                        </Link>\r\n                        <Box mx={24}>\r\n                            <Divider\r\n                                position=\"absolute\"\r\n                                h={{ base: 16, sm: 16 }}\r\n                                top={{ base: -12, sm: -16 }}\r\n                                orientation=\"vertical\"\r\n                                color=\"silver\"\r\n                            />\r\n                        </Box>\r\n                        <Link\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                onAttachmentOpen()\r\n                            }}>\r\n                            Remove\r\n                        </Link>\r\n\r\n                        <DeleteFileModal\r\n                            type=\"attachment\"\r\n                            isOpen={isAttachmentOpen}\r\n                            onCancel={onAttachmentClose}\r\n                            onConfirm={() => {\r\n                                const selectedIndex = attachments?.indexOf(attachmentDto)\r\n                                eventData.attachments = attachments?.filter((att, index) => index !== selectedIndex)\r\n                                setAttachmentDtoList(eventData.attachments ?? [])\r\n                                setEventData(eventData)\r\n                                const savedEventIndex = savedEvents.findIndex(\r\n                                    (evt: EventFormData) => evt.eventId === eventData.eventId\r\n                                )\r\n                                savedEvents.splice(savedEventIndex, 1, eventData)\r\n                                updateSavedEvents(savedEvents)\r\n                                onAttachmentClose()\r\n                            }}\r\n                        />\r\n                    </Flex>\r\n\r\n                    <Flex display={{ md: \"none\" }} justifyContent=\"flex-end\">\r\n                        <Box position=\"relative\" right={{ base: \"-12px\" }}>\r\n                            <Dropdown\r\n                                options={cardOptions}\r\n                                borderedRows={true}\r\n                                width=\"10rem\"\r\n                                label={`Additional actions for ${attachmentDto.fileName}`}>\r\n                                <Box as={MoreVertSharp} color=\"clickable\" />\r\n                            </Dropdown>\r\n                        </Box>\r\n                    </Flex>\r\n                </Flex>\r\n            </Card>\r\n\r\n            <VisuallyHidden\r\n                as=\"input\"\r\n                /* @ts-ignore */\r\n                type=\"file\"\r\n                ref={attachmentRef}\r\n                name=\"talkingPoints\"\r\n                aria-hidden={true}\r\n                tabIndex={-1}\r\n                accept={acceptedFileFormats.join()}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) => {\r\n                    // @ts-ignore\r\n                    const fileToReplace = e.target.files[0]\r\n                    !acceptedFileFormats.includes(fileToReplace.type)\r\n                        ? setErrorMsg(\"File type must be one of .jpg .jpeg .gif .png .xls .xlsx .doc .docx .txt .rtf .pdf\")\r\n                        : setFileOnCard(fileToReplace)\r\n                }}\r\n            />\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default AttachmentCard","import React, { useState } from \"react\"\r\nimport { Box, Grid, Flex } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, H3, FileUploader } from \"@c1ds/components\"\r\nimport { useSavedForm } from \"../Utility/formHelpers\"\r\nimport AttachmentCard from \"../AttachmentCard\"\r\n\r\ninterface AttachmentTabProps {\r\n\teventData: EventFormData\r\n\tsetEventData: (eventData: EventFormData) => void\r\n}\r\n\r\nexport const AttachmentsTab: React.FC<AttachmentTabProps> = (p: AttachmentTabProps) => {\r\n\tconst { eventData, setEventData } = p\r\n\tconst { attachments } = eventData\r\n\r\n\tconst [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\t// 1.6 The system displays appropriate error message when the selected file is in the unacceptable format.\r\n\t// 1.7 The system displays appropriate error message when the file size exceeding 5MB\r\n\tconst [errorMsg, setErrorMsg] = useState<string>(\"\")\r\n\tconst [progress, setProgress] = useState(0)\r\n\tconst [attachmentDtoList, setAttachmentDtoList] = useState(attachments ?? [])\r\n\r\n\tconst maxSizeBytes = 1024 * 1024 * 5\r\n\tconst acceptedFileExtensions = [\".jpg\", \".jpeg\", \".gif\", \".png\", \".xls\", \".xlsx\", \".doc\", \".docx\", \".txt\", \".rtf\", \".pdf\"]\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/*1.1 The user can access the Attachment screen from Edit Event option.*/}\r\n\t\t\t<Grid\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Attachments</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>Add additional attachments related to this event.</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Attachments</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* 1.2 The user can see the following section on the Attachment screen when there is no attachments.\r\n\t\t\t\t\t\t Upload File Area: [Drop/Browse] */}\r\n\t\t\t\t\t{/* 1.6 The system displays the Upload File Area: [Drop/Browse] always on top of the file list */}\r\n\t\t\t\t\t{/* 1.4 The user can upload file by using the Upload File Area: [Drop/Browse] */}\r\n\t\t\t\t\t{/* 1.4.1 (Drop function) The user can drag a file from users local desktop and drop it into the [Drop/Browse] area to upload the file */}\r\n\t\t\t\t\t{/* 1.4.2 (Browse Function) The user can click [Drop/Browse] area to launch an interface (e.g. File Explorer) which allows the user to identify the proper document to be uploaded. */}\r\n\t\t\t\t\t<FileUploader\r\n\t\t\t\t\t\tid=\"attachments\"\r\n\t\t\t\t\t\tmaxSizeBytes={maxSizeBytes}\r\n\t\t\t\t\t\tallowedFileTypes={acceptedFileExtensions}\r\n\t\t\t\t\t\tprogress={progress}\r\n\t\t\t\t\t\tonDrop={(e, files) => {\r\n\t\t\t\t\t\t\tsetProgress(0)\r\n\t\t\t\t\t\t\tconst fileToSet = files[0]\r\n\t\t\t\t\t\t\tconst reader = new FileReader()\r\n\t\t\t\t\t\t\tlet attachment: AttachmentDto\r\n\t\t\t\t\t\t\treader.readAsDataURL(fileToSet)\r\n\t\t\t\t\t\t\treader.onload = () => {\r\n\t\t\t\t\t\t\t\tattachment = {\r\n\t\t\t\t\t\t\t\t\tfileName: fileToSet.name,\r\n\t\t\t\t\t\t\t\t\tfileSize: fileToSet.size,\r\n\t\t\t\t\t\t\t\t\tfileMimeType: fileToSet.type,\r\n\t\t\t\t\t\t\t\t\tfileDataURL: reader.result,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\teventData.attachments?.push(attachment)\r\n\t\t\t\t\t\t\t\tsetAttachmentDtoList(eventData.attachments ?? [])\r\n\t\t\t\t\t\t\t\tsetEventData(eventData)\r\n\t\t\t\t\t\t\t\tconst savedEventIndex = savedEvents.findIndex(\r\n\t\t\t\t\t\t\t\t\t(evt: EventFormData) => evt.eventId === eventData.eventId\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tsavedEvents.splice(savedEventIndex, 1, eventData)\r\n\t\t\t\t\t\t\t\tupdateSavedEvents(savedEvents)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetProgress(100)\r\n\t\t\t\t\t\t\tsetErrorMsg(\"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\thandleRejectedFiles={(_, files) => {\r\n\t\t\t\t\t\t\tsetErrorMsg(files[0].errors[0])\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{errorMsg !== \"\" && <P color=\"error\">{errorMsg}</P>}\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{/* 1.3 The user can see the following section on the Attachment screen when there are pre-existing attachments\r\n\t\t\t\t Upload File Area: [Drop/Browse]\r\n\t\t\t\t Attachment Card */}\r\n\t\t\t\t{attachmentDtoList.map((value: AttachmentDto, index: number) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Box key={index} gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t\t<AttachmentCard \r\n\t\t\t\t\t\t\t\teventData={eventData}\r\n\t\t\t\t\t\t\t\tsetEventData={setEventData}\r\n\t\t\t\t\t\t\t\tsetErrorMsg={setErrorMsg}\r\n\t\t\t\t\t\t\t\tsetAttachmentDtoList={setAttachmentDtoList}\r\n\t\t\t\t\t\t\t\tattachmentDto={value} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useState } from \"react\"\r\nimport { Box, BoxProps, Divider, PseudoBox, useTheme } from \"@chakra-ui/core\"\r\nimport { Select } from \"@c1ds/components\"\r\nimport { EventFormSections, useCTFFormContext } from \"./Forms/Form\"\r\nimport { OverviewTab } from \"./PageSections/EventOverviewTab\"\r\nimport { LastKnownLocationTab } from \"./PageSections/EventLklTab\"\r\nimport { EvacDetailsTab } from \"./PageSections/EventEvacDetailsTab\"\r\nimport { AttachmentsTab } from \"./PageSections/EventAttachmentsTab\"\r\nimport Layout from \"./Layout\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst eventTabs: { label: string; value: EventFormSections }[] = [\r\n\t{ label: \"Event Overview\", value: \"overview\" },\r\n\t{ label: \"Last Known Locations\", value: \"locations\" },\r\n\t{ label: \"Evacuation\", value: \"evacuation\" },\r\n\t{ label: \"Attachments\", value: \"attachments\" },\r\n]\r\n\r\nconst ViewEvent: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { formSection } = useCTFFormContext()\r\n\r\n\tconst [currentEventData, setEventData] = useState(savedEvent)\r\n\r\n\tconst eventData: EventFormData = savedEvent ?? { eventId: \"\", eventTitle: \"\", managementTypeCode: \"\", eventTypeId: \"\" }\r\n\r\n\tconst [selectedTab, setSelectedTab] = useState<EventFormSections | undefined>(formSection)\r\n\tconst inOverview = selectedTab === \"overview\",\r\n\t\tinLkl = selectedTab === \"locations\",\r\n\t\tinEvacuation = selectedTab === \"evacuation\",\r\n\t\tinAttachments = selectedTab === \"attachments\"\r\n\r\n\tconst handleTabClick = (e: React.MouseEvent<HTMLButtonElement>, tab: EventFormSections) => {\r\n\t\tsetSelectedTab(tab)\r\n\t\te.currentTarget.blur()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Layout pageTitle=\"View Event\" pageHeading={eventData.eventTitle}>\r\n\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t<Box marginTop=\"12\" display={{ md: \"none\" }}>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tid=\"eventTab\"\r\n\t\t\t\t\t\tname=\"eventTab\"\r\n\t\t\t\t\t\taria-label=\"Event Tab\"\r\n\t\t\t\t\t\toptions={eventTabs}\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\tsetSelectedTab(changes.selectedItem?.value as EventFormSections)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvalue={selectedTab}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box marginTop=\"12\" display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inOverview}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"overview\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tEvent Overview\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inLkl}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"locations\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tLast Known Locations\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inEvacuation}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"evacuation\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tEvacuation\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inAttachments}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"attachments\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tAttachments\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\" marginTop={{ base: \"16\", md: \"-3px\" }} marginBottom=\"16\">\r\n\t\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t{inLkl ? (\r\n\t\t\t\t\t<LastKnownLocationTab eventData={currentEventData} setEventData={setEventData} />\r\n\t\t\t\t) : inEvacuation ? (\r\n\t\t\t\t\t<EvacDetailsTab eventData={eventData} />\r\n\t\t\t\t) : inAttachments ? (\r\n\t\t\t\t\t<AttachmentsTab eventData={eventData} setEventData={setEventData} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<OverviewTab eventData={eventData} />\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\ntype TabButtonProps = {\r\n\tonClick?: React.MouseEventHandler<HTMLButtonElement>\r\n\t/**\r\n\t * Indicates if tab is currently active\r\n\t */\r\n\tisActive?: boolean\r\n} & Omit<BoxProps, \"onClick\">\r\n\r\nconst TabButton: React.FC<TabButtonProps> = p => {\r\n\tconst { onClick, isActive, children, ...boxProps } = p\r\n\tconst theme = useTheme()\r\n\treturn (\r\n\t\t<PseudoBox\r\n\t\t\t{...boxProps}\r\n\t\t\tas=\"button\"\r\n\t\t\tdisplay=\"inline-flex\"\r\n\t\t\talignItems=\"flex-end\"\r\n\t\t\ttextAlign=\"center\"\r\n\t\t\tborder=\"none\"\r\n\t\t\tborderRadius={0}\r\n\t\t\tbackground=\"none\"\r\n\t\t\tp={0}\r\n\t\t\tfontFamily=\"body\"\r\n\t\t\tfontSize=\"base\"\r\n\t\t\tfontWeight=\"h4\"\r\n\t\t\tcolor=\"primary\"\r\n\t\t\tborderBottom=\"3\"\r\n\t\t\tborderColor={isActive ? \"accent\" : \"transparent\"}\r\n\t\t\tcursor=\"pointer\"\r\n\t\t\t_focus={{\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\toutline: `2px solid ${theme.colors.primary}`,\r\n\t\t\t}}\r\n\t\t\t_hover={{\r\n\t\t\t\toutline: \"none\",\r\n\t\t\t\tborderColor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t\tcolor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t}}\r\n\t\t\tonClick={onClick}>\r\n\t\t\t<Box flex=\"1 1 0\" lineHeight=\"linkButton\">\r\n\t\t\t\t{children}\r\n\t\t\t</Box>\r\n\t\t</PseudoBox>\r\n\t)\r\n}\r\n\r\nexport default ViewEvent\r\n","import React from \"react\"\r\nimport moment from \"moment\"\r\nimport { getSavedForm } from \"../components/Utility/formHelpers\"\r\nimport { CTFFormProvider, CTFFormProviderProps } from \"../components/Forms/Form\"\r\nimport EventForm from \"../components/Forms/EventForm\"\r\nimport ViewEvent from \"../components/ViewEvent\"\r\n\r\nexport interface EventPageState {\r\n\teventId?: string\r\n\tisEdit?: boolean\r\n\tformSection?: CTFFormProviderProps[\"formSection\"]\r\n}\r\n\r\ntype EventPageProps = {\r\n\tlocation: {\r\n\t\tstate: EventPageState\r\n\t}\r\n}\r\n\r\nconst DEFAULT_SECTION: CTFFormProviderProps[\"formSection\"] = \"overview\"\r\n\r\nconst EventPage: React.FC<EventPageProps> = (p: EventPageProps) => {\r\n\tlet savedEvent: EventFormData | undefined\r\n\tif (p.location?.state?.eventId) {\r\n\t\tconst savedEvents = getSavedForm<Array<EventFormData>>(\"ctfForms\", \"events\")\r\n\t\tsavedEvent = savedEvents && savedEvents.find((event: EventFormData) => event.eventId === p.location?.state?.eventId)\r\n\t\tif (savedEvent) {\r\n\t\t\tif (savedEvent.evacDepAuthDate) savedEvent.evacDepAuthDate = moment(savedEvent.evacDepAuthDate).toDate()\r\n\t\t\tif (savedEvent.evacDepOrdDate) savedEvent.evacDepOrdDate = moment(savedEvent.evacDepOrdDate).toDate()\r\n\t\t\tif (savedEvent.eventStartDate) savedEvent.eventStartDate = moment(savedEvent.eventStartDate).toDate()\r\n\t\t\tif (savedEvent.eventEndDate) savedEvent.eventEndDate = moment(savedEvent.eventEndDate).toDate()\r\n\t\t\tif (savedEvent.lastUpdatedDateTime) savedEvent.lastUpdatedDateTime = moment(savedEvent.lastUpdatedDateTime).toDate()\r\n\t\t}\r\n\t}\r\n\r\n\tconst formMode: CTFFormProviderProps[\"formMode\"] =\r\n\t\ttypeof savedEvent === \"undefined\" ? \"create\" : !p.location.state.isEdit ? \"view\" : \"edit\"\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<CTFFormProvider formMode={formMode} formSection={p.location.state?.formSection ?? DEFAULT_SECTION}>\r\n\t\t\t\t{formMode === \"view\" ? <ViewEvent savedEvent={savedEvent} /> : <EventForm savedEvent={savedEvent} />}\r\n\t\t\t</CTFFormProvider>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventPage\r\n"],"sourceRoot":""}