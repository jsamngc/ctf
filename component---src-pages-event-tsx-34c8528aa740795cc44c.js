(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{RV9o:function(e){e.exports=JSON.parse('[{"label":"Crisis","value":"Crisis"},{"label":"General","value":"General"},{"label":"Monitoring","value":"Monitoring"}]')},rZ4P:function(e){e.exports=JSON.parse('[{"label":"Monitoring Group","value":"mg"},{"label":"Working Group","value":"wg"},{"label":"Task Force","value":"tf"}]')},xZ9P:function(e,a,t){"use strict";t.r(a);t("dRSK");var n=t("q1tI"),l=t.n(n),r=t("wd/R"),o=t.n(r),i=t("nB9M"),c=t("GUiF"),m=(t("91GP"),t("INYr"),t("Wbzz")),s=t("XZ7F"),u=t("Weur"),d=t("BMxC"),v=t("ggNy"),p=t("BXVe"),f=t("wx14"),E=t("Ff2n"),b=t("iuhU"),g=t("H2TA"),h=t("NqtD");function D(e){var a,t,n;return a=e,t=0,n=1,e=(Math.min(Math.max(t,a),n)-t)/(n-t),e=(e-=1)*e*e+1}var y=n.forwardRef((function(e,a){var t,l=e.classes,r=e.className,o=e.color,i=void 0===o?"primary":o,c=e.disableShrink,m=void 0!==c&&c,s=e.size,u=void 0===s?40:s,d=e.style,v=e.thickness,p=void 0===v?3.6:v,g=e.value,y=void 0===g?0:g,C=e.variant,x=void 0===C?"indeterminate":C,O=Object(E.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),k={},S={},j={};if("determinate"===x||"static"===x){var w=2*Math.PI*((44-p)/2);k.strokeDasharray=w.toFixed(3),j["aria-valuenow"]=Math.round(y),"static"===x?(k.strokeDashoffset="".concat(((100-y)/100*w).toFixed(3),"px"),S.transform="rotate(-90deg)"):(k.strokeDashoffset="".concat((t=(100-y)/100,t*t*w).toFixed(3),"px"),S.transform="rotate(".concat((270*D(y/70)).toFixed(3),"deg)"))}return n.createElement("div",Object(f.a)({className:Object(b.a)(l.root,r,"inherit"!==i&&l["color".concat(Object(h.a)(i))],{indeterminate:l.indeterminate,static:l.static}[x]),style:Object(f.a)({width:u,height:u},S,d),ref:a,role:"progressbar"},j,O),n.createElement("svg",{className:l.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},n.createElement("circle",{className:Object(b.a)(l.circle,m&&l.circleDisableShrink,{indeterminate:l.circleIndeterminate,static:l.circleStatic}[x]),style:k,cx:44,cy:44,r:(44-p)/2,fill:"none",strokeWidth:p})))})),C=Object(g.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(y),x=function(){return l.a.createElement(d.a,{color:"clickable"},l.a.createElement(C,{color:"inherit",size:48,thickness:7.5}))},O=function(e){var a=e.isOpen,t=e.onClose,n=e.message,r=void 0===n?"Saving your information":n;return l.a.createElement(v.q,{isOpen:a,onClose:t,isCentered:!0,size:"sm"},l.a.createElement(v.u,null,l.a.createElement(v.m,null,"Please Wait...")),l.a.createElement(v.r,null,l.a.createElement(u.a,{align:"center"},l.a.createElement(d.a,{color:"clickable"},l.a.createElement(x,null)),l.a.createElement(d.a,{pl:"24"},l.a.createElement(v.v,null,r)))))},k=t("NKCw"),S=t("soUV"),j=(t("pIFo"),t("69N/")),w=t("o0pm"),T=function(){var e,a,t=Object(k.d)(),r=t.formState,o=t.errors,i=t.setValue,m=t.getValues,s=Object(n.useRef)(null),u=Object(n.useRef)(null),p=Object(n.useRef)(null),f=Object(n.useRef)(null),E=Object(k.e)({name:"evacStatusCode"}),b=Object(c.e)(),g=b.isCreate,h=b.isView,D=r.dirtyFields;return l.a.createElement(c.c,{title:"Evacuation Details"},l.a.createElement(d.a,{gridColumn:{base:"1 / -1",md:"span 4",lg:"span 3"}},l.a.createElement(v.i,{labelText:"Evacuation Status",labelId:"evacStatusCodeLabel"},l.a.createElement(k.a,{name:"evacStatusCode",onFocus:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,r=e.value;return l.a.createElement(v.w,{ref:s,id:"evacStatusCode",name:"evacStatusCode","aria-labelledby":"evacStatusCodeLabel",options:w,size:"full",placeholder:"",disabled:h,validationState:(null==o?void 0:o.evacStatusCode)?v.A.ERROR:void 0,errorMessage:null==o||null===(a=o.evacStatusCode)||void 0===a?void 0:a.message,onChange:function(e){var a,n=null===(a=e.selectedItem)||void 0===a?void 0:a.value;t(n),"ADEP"!==n||m("evacDepAuthDate")?"ODEP"!==n||m("evacDepOrdDate")?"NONE"===n&&(g&&!D.evacDepOrdDate&&i("evacDepOrdDate",""),g&&!D.evacDepAuthDate&&i("evacDepAuthDate","")):(i("evacDepOrdDate",new Date),g&&!D.evacDepAuthDate&&i("evacDepAuthDate","")):(i("evacDepAuthDate",new Date),g&&!D.evacDepOrdDate&&i("evacDepOrdDate",""))},onBlur:n,value:r})}}))),l.a.createElement(j.a,{gridColumn:{base:"1 / -1",md:"span 4",lg:"span 9"},gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(1,max-content)",md:"repeat(2,max-content)"}},l.a.createElement(v.i,{labelText:"Departure Authorized",labelId:"evacDepAuthDateLabel"},l.a.createElement(k.a,{as:l.a.createElement(v.f,null),id:"evacDepAuthDate",name:"evacDepAuthDate",inputRef:u,onFocus:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()},disabled:h||!E||"ADEP"!==E,maxDate:new Date(2100,0,1),error:void 0!==(null==o?void 0:o.evacDepAuthDate),errorMessage:null==o||null===(e=o.evacDepAuthDate)||void 0===e?void 0:e.message})),l.a.createElement(v.i,{labelText:"Departure Ordered",labelId:"orderedDateLabel"},l.a.createElement(k.a,{as:l.a.createElement(v.f,null),id:"evacDepOrdDate",name:"evacDepOrdDate",inputRef:p,onFocus:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},disabled:h||!E||"ODEP"!==E,maxDate:new Date(2100,0,1),error:void 0!==(null==o?void 0:o.evacDepOrdDate),errorMessage:null==o||null===(a=o.evacDepOrdDate)||void 0===a?void 0:a.message}))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},l.a.createElement(v.i,{labelText:"Evacuation Summary",labelId:"evacSummaryLabel"},l.a.createElement(k.a,{name:"evacSummary",rules:{pattern:{value:/^[A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]*$/,message:"Please enter only plain text in the Evacuation Summary field"},maxLength:{value:4e3,message:"Evacuation Summary cannot exceed 4000 characters"}},onFocus:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,r=e.value;return l.a.createElement(v.z,{ref:f,id:"evacSummary",name:"evacSummary","aria-labelledby":"evacSummaryLabel",size:"full",maxLength:4e3,disabled:h,validationState:(null==o?void 0:o.evacSummary)?v.A.ERROR:void 0,errorMessage:null==o||null===(a=o.evacSummary)||void 0===a?void 0:a.message,onChange:function(e){e.target.value=Object(c.d)(e.target.value).replace(/[^A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]/g,""),t(e)},onBlur:n,value:r})}}))))},I=t("/Tr7"),L=t("jIYg");var R,A=t("rZ4P"),z=t("RV9o"),F=t("wfq5"),M=function(e){var a,t,r,o=Object(s.a)(),i=o.isOpen,m=o.onOpen,u=o.onClose,p=e.hideTitle,f=Object(k.d)(),E=f.register,b=f.errors,g=f.setValue,h=Object(n.useRef)(null),D=Object(n.useRef)(null),y=Object(n.useRef)(null),C=Object(n.useRef)(null),x=Object(n.useRef)(null),O=Object(k.e)({name:"activeIndicator"}),S=Object(k.e)({name:"eventStartDate"}),w=Object(c.e)(),T=w.isView,R=w.isCreate;return l.a.createElement(c.c,{title:p?void 0:"Event Details",showDivider:R},l.a.createElement(d.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},l.a.createElement(v.i,{labelText:"Event Title",labelId:"eventTitleLabel",required:!0},l.a.createElement(v.y,{ref:E({required:"Please enter an Event Title",maxLength:{value:25,message:"Event Title cannot exceed 25 characters"}}),name:"eventTitle",id:"eventTitle",size:"full",disabled:T,maxLength:25,validationState:(null==b?void 0:b.eventTitle)?v.A.ERROR:void 0,errorMessage:null==b||null===(a=b.eventTitle)||void 0===a?void 0:a.message,onChange:function(e){e.target.value=e.target.value.replace(/^[^A-Za-z0-9]+/,"")}}))),l.a.createElement(j.a,{gridColumn:{base:"1 / -1"},gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(1,max-content)",md:"repeat(3,max-content)"}},l.a.createElement(v.i,{labelText:"Start Date",labelId:"eventStartDateLabel",required:!0},l.a.createElement(k.a,{as:l.a.createElement(v.f,null),id:"eventStartDate",name:"eventStartDate",rules:{required:"Please enter a Start Date"},inputRef:h,onFocus:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.focus()},maxDate:new Date,disabled:T,error:void 0!==(null==b?void 0:b.eventStartDate),errorMessage:null==b||null===(t=b.eventStartDate)||void 0===t?void 0:t.message})),l.a.createElement(v.i,{labelText:"End Date",labelId:"eventEndDateLabel"},l.a.createElement(k.a,{as:l.a.createElement(v.f,null),id:"eventEndDate",name:"eventEndDate",rules:{validate:{afterStartDate:function(e){return!!O||function(e,a){Object(L.a)(2,arguments);var t=Object(I.default)(e),n=Object(I.default)(a),l=t.getTime()-n.getTime();return l<0?-1:l>0?1:l}(e,S)>-1||"End Date must be equal to or later than Start Date"}}},inputRef:D,onFocus:function(){var e;return null===(e=D.current)||void 0===e?void 0:e.focus()},minDate:S||void 0,maxDate:new Date(2100,0,1),disabled:T,error:void 0!==(null==b?void 0:b.eventEndDate),errorMessage:null==b||null===(r=b.eventEndDate)||void 0===r?void 0:r.message})),l.a.createElement(v.i,{labelText:"Active",labelId:"activeIndicatorLabel"},l.a.createElement(v.x,{ref:E(),name:"activeIndicator",id:"activeIndicator",value:"Active",disabled:T,onChange:function(e){e.target.checked?g("eventEndDate",void 0):(g("activeIndicator",!0),m())}}))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",md:"1 / 5"}},l.a.createElement(v.i,{labelText:"Management Type",labelId:"managementTypeCodeLabel",required:!0},l.a.createElement(k.a,{name:"managementTypeCode",rules:{required:"Please select a Management Type"},onFocus:function(){var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,r=e.value;return l.a.createElement(v.w,{ref:y,id:"managementTypeCode",name:"managementTypeCode","aria-labelledby":"managementTypeCodeLabel",options:A,size:"full",disabled:T,validationState:(null==b?void 0:b.managementTypeCode)?v.A.ERROR:void 0,errorMessage:null==b||null===(a=b.managementTypeCode)||void 0===a?void 0:a.message,onChange:function(e){var a;t(null===(a=e.selectedItem)||void 0===a?void 0:a.value)},onBlur:n,value:r})}}))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",md:"1 / 5"}},l.a.createElement(v.i,{labelText:"Event Type",labelId:"eventTypeIdLabel",required:!0},l.a.createElement(k.a,{name:"eventTypeId",rules:{required:"Please select an Event Type"},onFocus:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,r=e.value;return l.a.createElement(v.w,{ref:C,id:"eventTypeId",name:"eventTypeId","aria-labelledby":"eventTypeIdLabel",options:z,size:"full",disabled:T,validationState:(null==b?void 0:b.eventTypeId)?v.A.ERROR:void 0,errorMessage:null==b||null===(a=b.eventTypeId)||void 0===a?void 0:a.message,onChange:function(e){var a;t(null===(a=e.selectedItem)||void 0===a?void 0:a.value)},onBlur:n,value:r})}}))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},l.a.createElement(v.i,{labelText:"Event Summary",labelId:"eventSummaryLabel"},l.a.createElement(k.a,{name:"eventSummary",rules:{pattern:{value:/^[A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]*$/,message:"Please enter only plain text in the Event Summary field"},maxLength:{value:4e3,message:"Event Summary cannot exceed 4000 characters"}},onFocus:function(){var e;return null===(e=x.current)||void 0===e?void 0:e.focus()},render:function(e){var a,t=e.onChange,n=e.onBlur,r=e.value;return l.a.createElement(v.z,{ref:x,id:"eventSummary",name:"eventSummary","aria-labelledby":"eventSummaryLabel",size:"full",maxLength:4e3,disabled:T,validationState:(null==b?void 0:b.eventSummary)?v.A.ERROR:void 0,errorMessage:null==b||null===(a=b.eventSummary)||void 0===a?void 0:a.message,onChange:function(e){e.target.value=Object(c.d)(e.target.value).replace(/[^A-Za-z0-9`~!@#$%^&*()_+•\-=[\]:";',./?\s]/g,""),t(e)},onBlur:n,value:r})}}))),l.a.createElement(F.a,{isOpen:i,onCancel:u,onConfirm:function(){g("activeIndicator",!1),g("eventEndDate",new Date),u()}}))},P=(t("Z2Ku"),t("f3/d"),t("+Z5E")),N=t("KEox"),B=t("7ncI");!function(e){e.talkingPoints="Talking Points",e.attachment="Attachment"}(R||(R={}));var U=function(e){var a=e.type,t=e.isOpen,n=e.onCancel,r=e.onConfirm,o="talkingPoints"===a?R.talkingPoints:"attachment"===a?R.attachment:"";return l.a.createElement(v.q,{isOpen:t,onClose:n,isCentered:!0,size:"sm"},l.a.createElement(v.u,null,l.a.createElement(v.m,null,"Delete ",o,"?")),l.a.createElement(v.s,null),l.a.createElement(v.r,null,l.a.createElement(v.v,null,"Are you sure you want to delete this ",o.toLowerCase,"? This action cannot be undone.")),l.a.createElement(v.t,null,l.a.createElement(u.a,{align:"center"},l.a.createElement(d.a,{marginRight:"20"},l.a.createElement(v.p,{onClick:n},"Cancel")),l.a.createElement(v.a,{size:"sm",onClick:r},"Delete"))))},Y=t("N2AM"),G=function(){var e=Object(s.a)(),a=e.isOpen,t=e.onOpen,r=e.onClose,o=Object(s.a)(),i=o.isOpen,m=o.onOpen,p=o.onClose,f=Object(n.useState)(""),E=f[0],b=f[1],g=Object(n.useState)(!1),h=g[0],D=g[1],y=Object(n.useRef)(null),C=Object(c.e)().isCreate,x=[{label:"Replace",value:"Replace",onClick:function(){var e;null===(e=y.current)||void 0===e||e.click()}},{label:"Remove",value:"Remove",onClick:function(){m()}}],O=["text/plain","application/pdf","application/rtf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],S=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var n={fileName:e.name,fileSize:e.size,fileMimeType:e.type,fileDataURL:t.result};a(n),D(!0)}};return l.a.createElement(c.c,{title:"Talking Points",showDivider:C},l.a.createElement(d.a,{gridColumn:{base:"1 / -1"}},h?l.a.createElement(v.v,null,"You have added talking points to this event. The default talking points have been removed."):l.a.createElement(v.v,null,"If Talking Points aren't available, ",l.a.createElement(v.o,{onClick:t},"default Talking Points")," will be presented based on the Event Type."),l.a.createElement(v.q,{isOpen:a,onClose:r,isCentered:!0,size:"lg"},l.a.createElement(v.u,null,l.a.createElement(v.m,null,"Default Talking Points")),l.a.createElement(v.s,null),l.a.createElement(d.a,{mt:{base:"-92px",sm:"-108px",md:"-144px"},gridColumn:{base:"1 / -1"}},l.a.createElement(v.v,null,"We are aware of the event at hand. We are monitoring the event closely and will update you with any new information that comes forth during this unprecedented time. We thank you for your understanding and ultimately for your cooperation.")),l.a.createElement(u.a,{justifyContent:"center",alignItems:"flex-end",gridColumn:{base:"1 / -1"}},l.a.createElement(v.a,{buttonType:"primary",onClick:r},"Close")))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",lg:"span 9"}},l.a.createElement(k.a,{name:"talkingPoints",render:function(e){var a=e.onChange,t=e.value;return D(!!t),l.a.createElement(v.i,{labelText:"Attachments",labelId:"talkingPointsLabel"},t?l.a.createElement(d.a,{mt:8},l.a.createElement(v.c,{id:"talkingPointItem"},l.a.createElement(P.a,{as:"input",type:"file",ref:y,name:"talkingPoints","aria-hidden":!0,tabIndex:-1,accept:O.join(),onChange:function(e){var t=e.target.files[0];O.includes(t.type)?t.size>5242880?b("File is larger than 5242880 bytes"):(b(""),S(t,a)):b("File type must be one of .doc, .docx, .txt, .rtf, .pdf")}}),l.a.createElement(u.a,{w:"full",my:{base:"-8px",sm:"-12px"},flexDir:{base:"row"}},l.a.createElement(u.a,{flexGrow:1,justifyContent:"flex-start"},l.a.createElement(v.o,{href:""+t.fileDataURL,download:t.fileName},t.fileName)),l.a.createElement(u.a,{display:{base:"none",md:"flex"},flexGrow:1,justifyContent:"flex-end"},l.a.createElement(v.o,{href:"","aria-label":"Replace",onClick:function(e){var a;e.preventDefault(),null===(a=y.current)||void 0===a||a.click()}},"Replace"),l.a.createElement(d.a,{mx:24},l.a.createElement(N.a,{position:"absolute",h:{base:16,sm:16},top:{base:-12,sm:-16},orientation:"vertical",color:"silver"})),l.a.createElement(v.o,{href:"","aria-label":"Remove",onClick:function(e){e.preventDefault(),m()}},"Remove"),l.a.createElement(U,{type:"talkingPoints",isOpen:i,onCancel:p,onConfirm:function(){D(!1),a(void 0),p()}})),l.a.createElement(u.a,{display:{md:"none"},justifyContent:"flex-end"},l.a.createElement(d.a,{position:"relative",right:{base:"-12px"}},l.a.createElement(B.a,{options:x,borderedRows:!0,width:"10rem",label:"Additional actions for "+t.fileName},l.a.createElement(d.a,{as:Y.a,color:"clickable"})))))),""!==E&&l.a.createElement(v.v,{color:"error"},E)):l.a.createElement(v.g,{id:"talkingPoints","aria-labelledby":"talkingPoints",name:"talkingPoints",maxSizeBytes:5242880,allowedFileTypes:[".doc",".docx",".txt",".rtf",".pdf"],onDrop:function(e,t){S(t[0],a),b("")},handleRejectedFiles:function(e,a){b(a[0].errors[0])},errorMessage:E}))}})))},W=function(e){var a,t,r,f=e.savedEvent,E=Object(c.e)(),b=E.isCreate,g=E.isEdit,h=E.formSection,D=Object(s.a)(),y=D.isOpen,C=D.onOpen,x=D.onClose,j=Object(s.a)(),w=j.isOpen,I=j.onOpen,L=j.onClose,R=Object(i.b)("ctfForms","events")[1],A={eventId:"OCS"+o()(new Date).format("YYYYDDD")+Math.floor(Math.random()*Math.floor(1e6)),eventTitle:"",eventStartDate:new Date,activeIndicator:!0,managementTypeCode:"mg",eventTypeId:"General",eventSummary:"",evacStatusCode:"NONE",evacSummary:"",lastUpdatedDateTime:new Date},z=Object(k.c)({mode:"onBlur",defaultValues:null!=f?f:A}),F=z.register,P=z.handleSubmit,N=z.getValues,B=Object(n.useCallback)((function(e,a){void 0===a&&(a=!1),e.lastUpdatedDateTime=new Date;var t=Object(i.a)("ctfForms","events",[]);if(g){var n=t.findIndex((function(a){return a.eventId===e.eventId})),l=Object.assign({},t[n],e);t.splice(n,1,l)}else t.push(e);R(t),I(),setTimeout((function(){if(a)L();else{var e={eventId:N("eventId"),formSection:h};Object(m.a)("/event",{state:e}),L()}}),2e3)}),[R,g,I,L,N,h]);return g?(a="Edit Event Details",t="Edit the basic information related to the developing crisis.",r=[{label:"Event",onClick:C},{label:"Edit Event Details"}]):(a="Create New Event",t="Enter the basic information related to the developing crisis. You can add more details later as the event unfolds."),l.a.createElement(S.a,{pageTitle:"Event Details",pageHeading:a,pageDescription:t,breadcrumbs:r},l.a.createElement(k.b,z,l.a.createElement(c.b,{name:"eventForm",id:"eventForm",onSubmit:P((function(e){B(e,!1)})),noValidate:!0},l.a.createElement("input",{name:"eventId",type:"hidden",ref:F}),(b||g&&"overview"===h)&&l.a.createElement(M,{hideTitle:g}),(b||g&&"overview"===h)&&l.a.createElement(G,null),(b||g&&"evacuation"===h)&&l.a.createElement(T,null),l.a.createElement(u.a,{as:"nav","aria-label":"page",id:"pageNav",gridColumn:"1 / -1",align:"center",justify:{base:"flex-end",md:"flex-start"},marginTop:{md:"72"}},l.a.createElement(d.a,{marginRight:"20"},l.a.createElement(v.p,{type:"button",onClick:C},"Cancel")),l.a.createElement(v.a,{type:"submit",size:g?"sm":"md"},g?"Save":"Create Event")),l.a.createElement(p.a,{isOpen:y,onClose:x,onLeave:function(){if(b)Object(m.a)("/");else{var e={eventId:N("eventId"),formSection:h};Object(m.a)("/event",{state:e})}}}),l.a.createElement(O,{isOpen:w,onClose:L,message:b?"Creating crisis event.":"Saving crisis information."}))))},q=(t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("CjxU")),V=t("+Cyc"),H=t("sK1y"),Z=t("LYUY"),_=Object(Z.a)(l.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z"}),"EditSharp"),K=function(e){var a,t,n,r=e.eventData,o=null===(a=z.find((function(e){return e.value===r.eventTypeId})))||void 0===a?void 0:a.label,i=null===(t=A.find((function(e){return e.value===r.managementTypeCode})))||void 0===t?void 0:t.label,c=null===(n=w.find((function(e){return e.value===r.evacStatusCode})))||void 0===n?void 0:n.label,s=r.talkingPoints,p=s&&s.fileName?s.fileName:"Talking Points SOP.docx",f=!!r.activeIndicator;return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{gridColumn:"1 / -1",gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(12, 1fr)",lg:"repeat(12, 1fr)"}},l.a.createElement(u.a,{gridColumn:"1 / -1",align:"center",justify:"space-between"},l.a.createElement(d.a,null,l.a.createElement(v.l,null,"Event Details")),l.a.createElement(d.a,null,l.a.createElement(v.p,{buttonIcon:{mdIcon:_,alignment:v.n.LEFT,color:"clickable"},onClick:function(){var e={eventId:r.eventId,isEdit:!0,formSection:"overview"};Object(m.a)("/event",{state:e})}}," Edit"))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"span 2"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Status")),l.a.createElement(H.a,{fontFamily:"default",color:f?"success":"label",fontSize:"base",fontWeight:"h3",lineHeight:"normal",margin:0},$(f?"Active":"Inactive"))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"7 / 9"},gridRow:{md:"3",lg:"auto"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Event Type")),l.a.createElement(v.v,null,$(o))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"3 / 5"},gridRow:{lg:"2"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Start Date")),l.a.createElement(v.v,null,$(X(r.eventStartDate)))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"5 / 7"},gridRow:{lg:"2"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"End Date")),l.a.createElement(v.v,null,$(X(r.eventEndDate)))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"span 2"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Management Type")),l.a.createElement(v.v,null,$(i))),l.a.createElement(d.a,{gridColumn:{base:"span 2",md:"span 4",lg:"span 2"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Evacuation Status")),l.a.createElement(v.v,null,$(c))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Event Description")),l.a.createElement(v.v,null,$(r.eventSummary)))),l.a.createElement(d.a,{gridColumn:"1 / -1",marginY:"16"},l.a.createElement(N.a,{borderColor:"disabledDark",marginY:"2",marginX:0,opacity:1})),l.a.createElement(j.a,{gridColumn:"1 / -1",gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(8, 1fr)",lg:"repeat(12, 1fr)"}},l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.l,null,"Talking Points")),l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.v,null,"Default Talking Points have been added, pending new Talking Points.")),l.a.createElement(d.a,{gridColumn:{base:"1 / -1"},marginTop:{base:"24",sm:"0",md:"24"}},l.a.createElement(d.a,{mb:{base:"4px",md:"-12px"}},l.a.createElement(v.h,{color:"label"},"Uploaded file"))),l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.c,{id:"talkingPointItem"},l.a.createElement(u.a,{w:"full",my:{base:"-8px",sm:"-0px"},flexDir:{base:"row"}},l.a.createElement(u.a,{flexGrow:1,justifyContent:"flex-start"},l.a.createElement(v.o,{href:s?""+s.fileDataURL:"https://clmccm-usdos.msappproxy.net/ccm/resource/itemName/com.ibm.team.workitem.Attachment/13685",download:p},p)))))),l.a.createElement(d.a,{gridColumn:"1 / -1",marginY:"16"},l.a.createElement(N.a,{borderColor:"disabledDark",marginY:"2",marginX:0,opacity:1})),l.a.createElement(j.a,{gridColumn:"1 / -1",gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(8, 1fr)",lg:"repeat(12, 1fr)"}},l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.l,null,"Impacted Posts")),l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.v,null,l.a.createElement(H.a,{color:"required",as:"span"},"* "),"Which Consular Posts are impacted by this event?  For a list of posts,"," ",l.a.createElement(v.o,{href:"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463",target:"_blank",rel:"noreferrer noopener"},"consult the FAM"),"."))))},X=function(e){return e?o()(e).format("MM/DD/YYYY"):""},$=function(e){return e||"-"},J=(t("Vd3H"),t("eJLp")),Q={default:{bg:"badge",color:"white",border:"none"},hoverFocus:{borderStyle:"solid",borderWidth:"2",borderColor:"accent"},active:{bg:"#a30014",border:"none"}},ee=function(e){var a=e.isOpen,t=e.onCancel,n=e.onConfirm,r=e.locationName,o=e.isActivate,i=o?"Activate":"Deactivate";return l.a.createElement(v.q,{isOpen:a,onClose:t,isCentered:!0,size:"sm"},l.a.createElement(v.u,null,l.a.createElement(v.m,null,i," Last Known Location?")),l.a.createElement(v.s,null),l.a.createElement(v.r,null,l.a.createElement(v.v,null,"Are you sure you want to ",i.toLocaleLowerCase()," ",null!=r?r:"this last known location?","?")),l.a.createElement(v.t,null,l.a.createElement(u.a,{align:"center"},l.a.createElement(d.a,{marginRight:"20"},l.a.createElement(v.p,{onClick:t},"Cancel")),void 0===o?l.a.createElement(v.a,{size:"sm",onClick:n},"YES"):o?l.a.createElement(v.a,{size:o?"md":"sm",onClick:n},i):l.a.createElement(J.a,Object.assign({height:"input",width:"buttonMd",textAlign:"center",borderRadius:0,fontFamily:"body",fontSize:"button",fontWeight:"button",px:20,py:12},Q.default,{_focus:Q.hoverFocus,_hover:Q.hoverFocus,_active:Q.active,onClick:n}),l.a.createElement(d.a,{flex:"1 1 0",lineHeight:"normal"},i)))))},ae=Object(Z.a)(l.a.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"}),"ExpandLessSharp"),te=Object(Z.a)(l.a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"}),"ExpandMoreSharp"),ne=Object(Z.a)(l.a.createElement(l.a.Fragment,null,l.a.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})),"LocationOnSharp"),le=Object(Z.a)(l.a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonSharp"),re=Object(Z.a)(l.a.createElement("path",{d:"M22 4H2v16h20V4zm-2 4l-8 5-8-5V6l8 5 8-5v2z"}),"EmailSharp"),oe=Object(Z.a)(l.a.createElement("path",{d:"M21 15.46l-5.27-.61-2.52 2.52c-2.83-1.44-5.15-3.75-6.59-6.59l2.53-2.53L8.54 3H3.03C2.45 13.18 10.82 21.55 21 20.97v-5.51z"}),"PhoneSharp"),ie=t("ZMKu"),ce=ie.b.custom(d.a),me=function(e){var a=e.lklData,t=e.setEventData,r=Object(i.b)("ctfForms","events"),o=r[0],c=r[1],m=a.activeIndicator,p=Object(n.useState)(!0),f=p[0],E=p[1],b=Object(n.useState)(!1),g=b[0],h=b[1],D=Object(n.useState)(1),y=D[0],C=D[1],x=Object(s.a)(),O=x.isOpen,k=x.onOpen,S=x.onClose,j={mr:4,alignSelf:"center",size:"iconPoc",color:"label"},w={display:"inline-block",py:4,fontWeight:600,fontSize:16,color:"headingLarge"},T=[{label:"Edit Location",value:"Edit",onClick:function(){}},{label:m?"Deactivate":"Activate",value:"Deactivate",type:m?"error":"primary",onClick:function(){k()}}],I=a.lookupLklDto,L=I.lklTitle,R=I.locationDesc,A=I.lklAddressDto,z=I.lklPocListDto,F=A.addressDto,M=F.address1,P=F.address2,U=F.city,G=F.stateCd,W=F.postalCode,q=F.countryCd,Z=M+" "+P+", "+("US"===q?U+", "+G+", "+W:U+", "+W)+", "+q,_=[];return z.map((function(e){var a={fullName:"",phone:Array(),email:Array()},t=e.personDto,n=t.givenName,l=t.surName,r=t.personEmailDtoList,o=t.personPhoneDtoList;a.fullName=n+" "+l,o.map((function(e){a.phone.push(e.phoneDto.phoneNum)})),r.map((function(e){a.email.push(e.emailDto.emailAddress)})),_.push(a)})),l.a.createElement(d.a,null,l.a.createElement(d.a,{backgroundColor:m?"success":"silver",h:3,w:"full"}),l.a.createElement(v.c,{id:"lklCard",maxWidth:"full"},l.a.createElement(u.a,{w:"full",mt:{base:"-8px",sm:"-16px"}},l.a.createElement(u.a,{flexDir:{base:"column",xl:"row"},flexGrow:1},l.a.createElement(d.a,{flexBasis:{xl:"65%"}},l.a.createElement(v.v,null,L)),l.a.createElement(d.a,{mb:4,flexBasis:{xl:"35%"}},l.a.createElement(v.h,{color:"label"},"U.S. Embassy in ",U,", ",q))),l.a.createElement(d.a,{position:"relative",right:{base:"-12px",sm:"-20px",md:"-12px"}},l.a.createElement(B.a,{options:T,borderedRows:!0,width:"10rem",label:"Additional actions for "+L},l.a.createElement(d.a,{as:Y.a,color:"clickable"}))),l.a.createElement(ee,{isOpen:O,onCancel:S,locationName:L,isActivate:!m,onConfirm:function(){var e=null,n=o.findIndex((function(t){var n=null;return t.eventId===a.eventId&&(n=t.eventLklDtoList.find((function(t,n){return t.eventLklId===a.eventLklId&&(e=n,!0)}))),!!n})),l=o[n].eventLklDtoList[e],r=o[n].eventLklDtoList;r.splice(e,1,Object.assign({},l,{activeIndicator:!m,lastUpdatedDateTime:new Date}));var i=Object.assign({},o[n],{eventLklDtoList:r});t(i),o.splice(n,1,i),c(o),S()}})),l.a.createElement(u.a,{mt:8,mb:-12},l.a.createElement(d.a,{as:"button",display:"inline-flex",cursor:"pointer",border:"none",backgroundColor:"transparent",onClick:function(){h(!g)},"aria-expanded":g,"aria-controls":"detailsToggleButton","aria-label":"Details toggle button for "+L,color:"clickable"},l.a.createElement(H.a,{my:0,fontSize:16},"Details"),g?l.a.createElement(ae,null):l.a.createElement(te,null))),g?l.a.createElement(d.a,{id:"detailsToggleButton",position:"relative",overflow:"hidden"},l.a.createElement(N.a,{borderColor:"silver",my:16}),l.a.createElement(d.a,{display:{xl:"none"}},l.a.createElement(u.a,{mb:16},l.a.createElement(V.a,Object.assign({},w,{borderWidth:0,borderBottom:f?3:0,borderBottomColor:"accent",borderStyle:"solid",color:"headingSmall",_hover:f?{}:{color:"clickable",borderBottomColor:"clickable",borderBottom:"3px",borderStyle:"solid"},onClick:function(){C(-1),E(!0)},mr:8}),l.a.createElement(H.a,{fontFamily:"headingSmall",margin:0,fontSize:"h4",fontWeight:"h4",lineHeight:"h4"},"Location")),l.a.createElement(d.a,{mx:8}),l.a.createElement(V.a,Object.assign({},w,{borderWidth:0,borderBottom:f?0:3,borderBottomColor:"accent",borderStyle:"solid",color:"headingSmall",_hover:f?{color:"clickable",borderBottomColor:"clickable",borderBottom:"3px",borderStyle:"solid"}:{},onClick:function(){C(1),E(!1)}}),l.a.createElement(H.a,{fontFamily:"headingSmall",margin:0,fontSize:"h4",fontWeight:"h4",lineHeight:"h4"},"Point of Contact"))),l.a.createElement(ie.a,{custom:y,initial:!1},l.a.createElement(ce,{position:"relative",initial:{transform:"translateX("+(y<0?"-100%":"100%")+")"},transition:{type:"tween",duration:.5,ease:"easeInOut"},animate:{transform:"translateX(0%)"},exit:function(e){return{transform:"translateX("+(e<0?"100%":"-100%")+")"}},width:"100%"},f?l.a.createElement(d.a,{key:"1"},l.a.createElement(u.a,{mb:12},l.a.createElement(d.a,Object.assign({as:ne},j)),l.a.createElement(v.h,null,Z)),l.a.createElement(d.a,{py:4},l.a.createElement(v.h,{color:"label"},"Description")),l.a.createElement(d.a,null,l.a.createElement(v.h,null,R))):l.a.createElement(d.a,{key:"2"},_.map((function(e,a){return l.a.createElement(u.a,{key:a,flexDir:{base:"column",md:"row"},border:1,borderStyle:"solid",borderColor:"silver",px:8,my:8,justifyContent:"space-around"},l.a.createElement(u.a,{py:4},l.a.createElement(d.a,Object.assign({as:le},j)),l.a.createElement(v.h,null,e.fullName)),e.email.map((function(e,a){return l.a.createElement(u.a,{py:4,key:a},l.a.createElement(d.a,Object.assign({as:re},j)),l.a.createElement(v.h,null,e))})),e.phone.map((function(e,a){return l.a.createElement(u.a,{py:4,key:a},l.a.createElement(d.a,Object.assign({as:oe},j)),l.a.createElement(v.h,null,e))})))})))))),l.a.createElement(u.a,{display:{base:"none",xl:"flex"}},l.a.createElement(d.a,{flexBasis:{xl:"63%"}},l.a.createElement(d.a,{pb:16},l.a.createElement(v.m,null,"Location")),l.a.createElement(u.a,{mb:12},l.a.createElement(d.a,Object.assign({as:ne},j)),l.a.createElement(v.h,null,Z)),l.a.createElement(d.a,{py:4},l.a.createElement(v.h,{color:"label"},"Description")),l.a.createElement(d.a,null,l.a.createElement(v.h,null,R))),l.a.createElement(N.a,{orientation:"vertical",flexBasis:{xl:"2%"},color:"silver"}),l.a.createElement(d.a,{flexBasis:{xl:"35%"}},l.a.createElement(d.a,{pb:16},l.a.createElement(v.m,null,"Point of Contact")),_.map((function(e,a){return l.a.createElement(u.a,{key:a,flexDir:"column",border:1,borderStyle:"solid",borderColor:"silver",px:8,my:8,justifyContent:"space-around",flexWrap:"wrap"},l.a.createElement(u.a,{py:4},l.a.createElement(d.a,Object.assign({as:le},j)),l.a.createElement(v.h,null,e.fullName)),e.email.map((function(e,a){return l.a.createElement(u.a,{py:4,key:a},l.a.createElement(d.a,Object.assign({as:re},j)),l.a.createElement(v.h,null,e))})),e.phone.map((function(e,a){return l.a.createElement(u.a,{py:4,key:a},l.a.createElement(d.a,Object.assign({as:oe},j)),l.a.createElement(v.h,null,e))})))}))))):null))},se=t("HJu1"),ue=t("l1im"),de=t("E2cU"),ve=v.b+" HH:mm:ss:SS ZZ",pe=function(e){var a,t,r=e.eventData,i=e.setEventData,c=null!==(a=null===(t=r.eventLklDtoList)||void 0===t?void 0:t.map((function(e){return Object.assign({},e,{createdDateTime:o()(e.createdDateTime,ve).toDate(),lastUpdatedDateTime:o()(e.lastUpdatedDateTime,ve).toDate()})})))&&void 0!==a?a:[],s=Object(n.useState)(1),p=s[0],f=s[1],E=Object(n.useState)(10),b=E[0],g=(E[1],Object(n.useState)(!0)),h=g[0],D=g[1];c.sort((function(e,a){var t,n,l=null!==(t=e.lastUpdatedDateTime)&&void 0!==t?t:new Date,r=null!==(n=a.lastUpdatedDateTime)&&void 0!==n?n:new Date;return l>r?-1:l<r?1:0}));var y=c.filter((function(e){return!h||e.activeIndicator})),C=Math.ceil(y.length/b);p>C&&f(C);var x=p*b,O=x-b,k=y.length>b?Math.ceil(y.length/b):1,S=1!==k?y.slice(O,x):y;return l.a.createElement(j.a,{gridColumn:"1 / -1",gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(12, 1fr)",lg:"repeat(12, 1fr)"}},l.a.createElement(u.a,{gridColumn:"1 / -1",align:"center",justify:"space-between"},l.a.createElement(d.a,null,l.a.createElement(v.l,null,"Last Known Locations")),l.a.createElement(d.a,{display:{base:"none",md:"block"}},l.a.createElement(v.p,{buttonIcon:{mdIcon:de.a,alignment:v.n.LEFT,color:"clickable"},onClick:function(){var e={eventId:r.eventId};Object(m.a)("/addLKL",{state:e})}}," Add Location"))),l.a.createElement(d.a,{gridColumn:"1 / -1",mt:-16},l.a.createElement(v.v,null,"Manage the last known locations for U.S. citizens involved in this crisis.")),l.a.createElement(d.a,{bottom:"16px",zIndex:2,right:"16px",position:"fixed",display:{md:"none"}},l.a.createElement(J.a,{borderColor:"transparent",boxShadow:"0 6px 6px 0 rgba(0, 0, 0, 0.4)",color:"white",height:"40px",width:"40px",rounded:"round",bg:"clickable",cursor:"pointer",_hover:{bg:"secondary"},onClick:function(){return Object(m.a)("/addLKL")}},l.a.createElement(d.a,{as:de.a,size:"iconMobileCreate"}))),l.a.createElement(u.a,{gridColumn:{base:"1 / 3",md:"1 / -1"},gridRow:{base:"3",md:"auto"},justify:{base:"flex-start",md:"flex-end"}},l.a.createElement(se.a,{onToggleHideInactive:function(){return D(!h)}})),S.map((function(e,a){return l.a.createElement(d.a,{key:a,gridColumn:"1 / -1"},l.a.createElement(me,{lklData:e,setEventData:i}))})),l.a.createElement(u.a,{gridColumn:"1 / -1",justify:"space-evenly"},l.a.createElement(v.v,null,c.length," results"),l.a.createElement(ue.a,{page:p,count:k,onChange:function(e,a){return f(a)},showLastButton:!0,size:"small"}),l.a.createElement("select",null,l.a.createElement("option",{value:"10"},"10"),l.a.createElement("option",{value:"20"},"20"))))},fe=function(e){var a,t=e.eventData,n=null===(a=w.find((function(e){return e.value===t.evacStatusCode})))||void 0===a?void 0:a.label;return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{gridColumn:"1 / -1",gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(12, 1fr)",lg:"repeat(12, 1fr)"}},l.a.createElement(u.a,{gridColumn:"1 / -1",align:"center",justify:"space-between"},l.a.createElement(d.a,null,l.a.createElement(v.l,null,"Evacuation Details")),l.a.createElement(d.a,null,l.a.createElement(v.p,{buttonIcon:{mdIcon:_,alignment:v.n.LEFT,color:"clickable"},onClick:function(){var e={eventId:t.eventId,isEdit:!0,formSection:"evacuation"};Object(m.a)("/event",{state:e})}}," Edit"))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",md:"span 4"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Evacuation Status")),l.a.createElement(v.v,null,be(n))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",sm:"span 2",md:"span 4",lg:"span 3"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Departure Authorized")),l.a.createElement(v.v,null,be(Ee(t.evacDepAuthDate)))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1",sm:"span 2",md:"span 4"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Departure Ordered")),l.a.createElement(v.v,null,be(Ee(t.evacDepOrdDate)))),l.a.createElement(d.a,{gridColumn:{base:"1 / -1"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Evacuation Summary")),l.a.createElement(v.v,null,be(t.evacSummary)))),l.a.createElement(d.a,{gridColumn:"1 / -1",marginY:"16"},l.a.createElement(N.a,{borderColor:"disabledDark",marginY:"2",marginX:0,opacity:1})))},Ee=function(e){return e?o()(e).format("MM/DD/YYYY"):""},be=function(e){return e||"-"},ge=(t("a1Th"),t("XfO3"),t("HEwt"),t("rE2o"),t("ioFf"),t("L9s1"),function(e){var a=e.attachmentDto,t=e.eventData,r=e.setEventData,o=e.setAttachmentDtoList,i=e.setErrorMsg,c=e.acceptedFileFormats,m=t.attachments,p=Object(s.a)(),f=p.isOpen,E=p.onOpen,b=p.onClose,g=Object(n.useRef)(null),h=[{label:"Replace",value:"Replace",onClick:function(){var e;null===(e=g.current)||void 0===e||e.click()}},{label:"Remove",value:"Remove",onClick:function(){E()}}];return l.a.createElement(d.a,null,l.a.createElement(v.c,{id:"attachmentCard",maxWidth:"full"},l.a.createElement(u.a,{w:"full",my:{base:"-8px",sm:"-12px"},flexDir:{base:"row"}},l.a.createElement(u.a,{flexGrow:1,justifyContent:"flex-start"},l.a.createElement(v.o,{href:""+a.fileDataURL,download:a.fileName},a.fileName)),l.a.createElement(u.a,{display:{base:"none",md:"flex"},flexGrow:1,justifyContent:"flex-end"},l.a.createElement(v.o,{onClick:function(e){var a;e.preventDefault(),i(""),null===(a=g.current)||void 0===a||a.click()}},"Replace"),l.a.createElement(d.a,{mx:24},l.a.createElement(N.a,{position:"absolute",h:{base:16,sm:16},top:{base:-12,sm:-16},orientation:"vertical",color:"silver"})),l.a.createElement(v.o,{onClick:function(e){e.preventDefault(),E()}},"Remove"),l.a.createElement(U,{type:"attachment",isOpen:f,onCancel:b,onConfirm:function(){var e,n=null==m?void 0:m.indexOf(a);t.attachments=null==m?void 0:m.filter((function(e,a){return a!==n})),r(t),o(null!==(e=t.attachments)&&void 0!==e?e:[]),b()}})),l.a.createElement(u.a,{display:{md:"none"},justifyContent:"flex-end"},l.a.createElement(d.a,{position:"relative",right:{base:"-12px"}},l.a.createElement(B.a,{options:h,borderedRows:!0,width:"10rem",label:"Additional actions for "+a.fileName},l.a.createElement(d.a,{as:Y.a,color:"clickable"})))))),l.a.createElement(P.a,{as:"input",type:"file",ref:g,name:"talkingPoints","aria-hidden":!0,tabIndex:-1,accept:c.join(),onChange:function(e){var n,l,m=e.target.files[0];c.includes(m.type)?(n=m,(l=new FileReader).readAsDataURL(n),l.onload=function(){t&&t.attachments&&(t.attachments[t.attachments.indexOf(a)]={fileName:n.name,fileSize:n.size,fileMimeType:n.type,fileDataURL:l.result},o(t.attachments),r(t))}):i("File type must be one of .jpg .jpeg .gif .png .xls .xlsx .doc .docx .txt .rtf .pdf")}}))});function he(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return De(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var ye=function(e){var a=e.eventData,t=e.setEventData,r=a.attachments,o=Object(n.useState)(""),i=o[0],c=o[1],m=Object(n.useState)(0),s=m[0],p=m[1],f=Object(n.useState)(null!=r?r:[]),E=f[0],b=f[1],g=["image/jpeg","image/gif","image/png","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/pdf"];return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{gridGap:{base:"16px",md:"24px"},gridTemplateColumns:{base:"repeat(4, 1fr)",md:"repeat(12, 1fr)"}},l.a.createElement(u.a,{gridColumn:"1 / -1",align:"center",justify:"space-between"},l.a.createElement(d.a,null,l.a.createElement(v.l,null,"Attachments"))),l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(v.v,null,"Add additional attachments related to this event.")),l.a.createElement(d.a,{gridColumn:{base:"1 / -1"}},l.a.createElement(d.a,{mb:4},l.a.createElement(v.h,{color:"label"},"Attachments")),l.a.createElement(v.g,{id:"attachments",maxSizeBytes:5242880,allowedFileTypes:[".jpg",".jpeg",".gif",".png",".xls",".xlsx",".doc",".docx",".txt",".rtf",".pdf"],progress:s,onDrop:function(e,n){p(0),n.map((function(e){var n,l=new FileReader;l.readAsDataURL(e),l.onload=function(){var r;n={fileName:e.name,fileSize:e.size,fileMimeType:e.type,fileDataURL:l.result},b((function(e){return[].concat(he(e),[n])})),null===(r=a.attachments)||void 0===r||r.push(n),t(a)}})),p(100),c("")},handleRejectedFiles:function(e,a){c(a[0].errors[0])}}),""!==i&&l.a.createElement(v.v,{color:"error"},i)),E.map((function(e,n){return l.a.createElement(d.a,{key:n,gridColumn:"1 / -1"},l.a.createElement(ge,{attachmentDto:e,eventData:a,setAttachmentDtoList:b,setEventData:t,setErrorMsg:c,acceptedFileFormats:g}))}))))};var Ce=[{label:"Event Overview",value:"overview"},{label:"Last Known Locations",value:"locations"},{label:"Evacuation",value:"evacuation"},{label:"Attachments",value:"attachments"}],xe=function(e){var a=e.onClick,t=e.isActive,n=e.children,r=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,["onClick","isActive","children"]),o=Object(q.b)();return l.a.createElement(V.a,Object.assign({},r,{as:"button",display:"inline-flex",alignItems:"flex-end",textAlign:"center",border:"none",borderRadius:0,background:"none",p:0,fontFamily:"body",fontSize:"base",fontWeight:"h4",color:"primary",borderBottom:"3",borderColor:t?"accent":"transparent",cursor:"pointer",_focus:{outline:"2px solid "+o.colors.primary},_hover:{outline:"none",borderColor:t?void 0:"clickable",color:t?void 0:"clickable"},onClick:a}),l.a.createElement(d.a,{flex:"1 1 0",lineHeight:"linkButton"},n))},Oe=function(e){var a=e.savedEvent,t=Object(c.e)().formSection,r=Object(n.useState)(a),o=r[0],i=r[1],m=null!=a?a:{eventId:"",eventTitle:"",managementTypeCode:"",eventTypeId:""},s=Object(n.useState)(t),u=s[0],p=s[1],f="overview"===u,E="locations"===u,b="evacuation"===u,g="attachments"===u,h=function(e,a){p(a),e.currentTarget.blur()};return l.a.createElement(S.a,{pageTitle:"View Event",pageHeading:m.eventTitle},l.a.createElement(d.a,{gridColumn:"1 / -1"},l.a.createElement(d.a,{marginTop:"12",display:{md:"none"}},l.a.createElement(v.w,{id:"eventTab",name:"eventTab","aria-label":"Event Tab",options:Ce,size:"full",onChange:function(e){var a;p(null===(a=e.selectedItem)||void 0===a?void 0:a.value)},value:u})),l.a.createElement(d.a,{marginTop:"12",display:{base:"none",md:"block"}},l.a.createElement(xe,{isActive:f,onClick:function(e){return h(e,"overview")},marginRight:{base:"48",xl:"72"}},"Event Overview"),l.a.createElement(xe,{isActive:E,onClick:function(e){return h(e,"locations")},marginRight:{base:"48",xl:"72"}},"Last Known Locations"),l.a.createElement(xe,{isActive:b,onClick:function(e){return h(e,"evacuation")},marginRight:{base:"48",xl:"72"}},"Evacuation"),l.a.createElement(xe,{isActive:g,onClick:function(e){return h(e,"attachments")},marginRight:{base:"48",xl:"72"}},"Attachments")),l.a.createElement(d.a,{gridColumn:"1 / -1",marginTop:{base:"16",md:"-3px"},marginBottom:"16"},l.a.createElement(N.a,{borderColor:"disabledDark",marginY:"2",marginX:0,opacity:1})),E?l.a.createElement(pe,{eventData:o,setEventData:i}):b?l.a.createElement(fe,{eventData:m}):g?l.a.createElement(ye,{eventData:m,setEventData:i}):l.a.createElement(K,{eventData:m})))};a.default=function(e){var a,t,n,r,m;if(null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.eventId){var s=Object(i.a)("ctfForms","events");(m=s&&s.find((function(a){var t,n;return a.eventId===(null===(t=e.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.eventId)})))&&(m.evacDepAuthDate&&(m.evacDepAuthDate=o()(m.evacDepAuthDate).toDate()),m.evacDepOrdDate&&(m.evacDepOrdDate=o()(m.evacDepOrdDate).toDate()),m.eventStartDate&&(m.eventStartDate=o()(m.eventStartDate).toDate()),m.eventEndDate&&(m.eventEndDate=o()(m.eventEndDate).toDate()),m.lastUpdatedDateTime&&(m.lastUpdatedDateTime=o()(m.lastUpdatedDateTime).toDate()))}var u=void 0===m?"create":e.location.state.isEdit?"edit":"view";return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{formMode:u,formSection:null!==(n=null===(r=e.location.state)||void 0===r?void 0:r.formSection)&&void 0!==n?n:"overview"},"view"===u?l.a.createElement(Oe,{savedEvent:m}):l.a.createElement(W,{savedEvent:m})))}}}]);
//# sourceMappingURL=component---src-pages-event-tsx-34c8528aa740795cc44c.js.map