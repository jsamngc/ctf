(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{QeBL:function(e,t,a){"use strict";a.r(t);a("f3/d"),a("a1Th"),a("Btvt"),a("XfO3"),a("HEwt"),a("rGqo"),a("rE2o"),a("ioFf"),a("INYr"),a("91GP"),a("Vd3H");var n=a("q1tI"),r=a.n(n),o=a("wd/R"),l=a.n(o),i=a("l1im"),c=a("ggNy"),d=a("Weur"),s=a("soUV"),u=(a("dRSK"),a("Wbzz")),m=a("7ncI"),p=a("LYUY"),b=Object(p.a)(r.a.createElement("path",{d:"M7 14l5-5 5 5H7z"}),"ArrowDropUpSharp"),v=a("+UkN"),f=a("E2cU"),E=a("CjxU"),g=a("BMxC"),h=a("+Cyc"),D=a("eJLp"),C=function(e){var t=e.sortByText,a=e.sortOption,n=e.onToggleSortBy,o=Object(E.b)(),l=[{label:"Event Type",value:"eventTypeId",onClick:n},{label:"Title",value:"eventTitle",onClick:n},{label:"Start Date",value:"eventStartDate",onClick:n},{label:"End Date",value:"eventEndDate",onClick:n},{label:"Evac. Status",value:"evacStatusCode",onClick:n},{label:"Status",value:"activeIndicator",onClick:n},{label:"Last Updated",value:"lastUpdatedDateTime",onClick:n}],i=function(e){var t,a;return null!==(t=null===(a=l.find((function(t){return t.label===e})))||void 0===a?void 0:a.value)&&void 0!==t?t:""};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{position:"relative",marginRight:"20"},r.a.createElement(d.a,{align:"center"},r.a.createElement(m.a,{options:l,width:"150px",label:"Sort events",menuProps:{marginTop:"4",right:-20},initialSelection:i(t),showSelected:!0},r.a.createElement(g.a,{as:"span",fontSize:"base",marginRight:2,cursor:"pointer"},"Sort by")),""===a?r.a.createElement(d.a,{wrap:"wrap",position:"relative",size:"iconMd"},r.a.createElement(g.a,{as:b,size:"iconSort",position:"absolute",top:-10,left:-6,color:"clickable"}),r.a.createElement(g.a,{as:v.a,size:"iconSort",position:"absolute",top:-1,left:-6,color:"clickable"})):"-"===a[0]?r.a.createElement(h.a,{as:"button",type:"button",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:0,border:"none",background:"none",size:"iconMd",cursor:"pointer","aria-label":"Sort by "+t+" ascending",onClick:function(){n(i(t),a.substring(1))},_focus:{outline:"1px dashed "+o.colors.accent}},r.a.createElement(g.a,{as:v.a,size:"icon",transform:"scale(2)",color:"clickable"})):r.a.createElement(h.a,{as:"button",type:"button",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:0,border:"none",background:"none",size:"iconMd",cursor:"pointer","aria-label":"Sort by "+t+" descending",onClick:function(){n(i(t),a)},_focus:{outline:"1px dashed "+o.colors.accent}},r.a.createElement(g.a,{as:b,size:"icon",transform:"scale(2)",color:"clickable"})))),r.a.createElement(g.a,{display:{base:"none",md:"block"}},r.a.createElement(c.a,{size:"lg",onClick:function(){return Object(u.a)("/event")}},"Create New Event")),r.a.createElement(g.a,{bottom:"16px",zIndex:2,right:"16px",position:"fixed",display:{md:"none"}},r.a.createElement(D.a,{borderColor:"transparent",boxShadow:"0 6px 6px 0 rgba(0, 0, 0, 0.4)",color:"white",height:"40px",width:"40px",rounded:"round",bg:"clickable",cursor:"pointer",_hover:{bg:"secondary"},onClick:function(){return Object(u.a)("/event")}},r.a.createElement(g.a,{as:f.a,size:"iconMobileCreate"}))))},y=a("N2AM"),S=a("wfq5"),x=a("o0pm"),w=a("XZ7F"),k=a("69N/"),j=function(e){var t,a=e.data,n=e.onConfirm,o=null!=a?a:{},i=o.activeIndicator,s=o.eventEndDate,p=o.eventStartDate,b=o.eventTitle,v=o.eventTypeId,f=o.evacStatusCode,E=o.lastUpdatedDateTime,h=o.eventId,D=Object(w.a)(),C=D.isOpen,j=D.onOpen,O=D.onClose,T=null===(t=x.find((function(e){return e.value===f})))||void 0===t?void 0:t.label,I="Monitoring"===v?"Monitored Event":"General"===v?"Working Event":"Crisis Event",z="Monitoring"===v?"monitor":"General"===v?"general":"error",U=null!=i&&i,M=[{label:"Edit",value:"option1",onClick:function(){var e={eventId:h,isEdit:!0};Object(u.a)("/event",{state:e})}},{label:U?"Deactivate":"Activate",value:"option2",type:U?"error":"primary",onClick:function(){j()}}],A=function(e){return l()(e).format("MM/DD/YYYY")};return r.a.createElement(g.a,{mb:{base:"16",md:"24"},bg:U?"white":"#f2f2f2",position:"relative"},r.a.createElement(g.a,{backgroundColor:U?z:"disabledBorder",position:"absolute",w:6,h:"full"}),r.a.createElement(c.c,{id:"ctfEvent",maxWidth:"full"},r.a.createElement(d.a,{position:"absolute",w:"full",top:{base:"-8px",sm:"-16px"}},r.a.createElement(g.a,{flexGrow:1},r.a.createElement(c.h,null,I)),r.a.createElement(g.a,{position:"relative",right:{base:"-12px",sm:"-20px",md:"-12px"}},r.a.createElement(m.a,{options:M,borderedRows:!0,label:"Additional actions for "+b},r.a.createElement(g.a,{as:y.a,color:"clickable"}))),r.a.createElement(S.a,{isOpen:C,onCancel:O,eventName:b,isActivate:!U,onConfirm:function(){n(U,h),O()}})),r.a.createElement(c.d,null,r.a.createElement(g.a,{display:{lg:"none"},mt:{base:24,md:20},fontSize:"base"},r.a.createElement(c.p,{onClick:function(){var e={eventId:h};Object(u.a)("/event",{state:e})}},r.a.createElement(g.a,{as:"span",fontSize:"base"},b)),r.a.createElement(k.a,{templateColumns:{base:"1fr 1fr",sm:"repeat(6,1fr)",md:"repeat(5, 1fr)"},columnGap:{base:"12",sm:"0",md:"16"},rowGap:{base:"12",md:"8"}},r.a.createElement(g.a,{gridColumn:{sm:"1 / 3",md:"auto"}},r.a.createElement(g.a,{pb:4},r.a.createElement(c.h,{color:"label"},"Start Date")),r.a.createElement(c.v,null,A(p))),r.a.createElement(g.a,{gridColumn:{sm:"span 2",md:"auto"}},U?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{pb:4},r.a.createElement(c.h,{color:"label"},"End Date")),r.a.createElement(c.v,null,s?A(s):""))),r.a.createElement(g.a,{gridColumn:{sm:"1 / 3",md:"auto"}},r.a.createElement(g.a,{pb:4},r.a.createElement(c.h,{color:"label"},"Evacuation Status")),r.a.createElement(c.v,null,T)),r.a.createElement(g.a,{gridColumn:{sm:"span 2",md:"auto"}},r.a.createElement(g.a,{pb:4},r.a.createElement(c.h,{color:"label"},"Last Updated")),r.a.createElement(c.v,null,A(E))),r.a.createElement(d.a,{gridColumn:{base:"2",sm:"span 2",md:"auto"},justifySelf:{sm:"end"},alignSelf:{sm:"center"},width:{base:"116px",sm:"135px",md:"150px"},fontFamily:"default",fontSize:"finePrint",align:"center",justify:"center",rounded:"chip",backgroundColor:U?"success":"disabledBackground",height:"32px",color:U?"white":"disabledButtonText",border:U?"none":"px",borderColor:"disabledBorder",paddingY:0},U?"Active":"Inactive"))),r.a.createElement(k.a,{mt:20,display:{base:"none",lg:"grid"},templateColumns:"repeat(6, 1fr)",columnGap:"16px",rowGap:"8px",fontSize:"base"},r.a.createElement(g.a,{gridColumn:"1 / 3"},r.a.createElement(g.a,null,r.a.createElement(c.o,{onClick:function(){var e={eventId:h};Object(u.a)("/event",{state:e})}},b)),r.a.createElement(d.a,{align:"center"},r.a.createElement(g.a,{marginRight:12},r.a.createElement(c.h,{color:"label"},"Start Date")),r.a.createElement(c.v,null,A(p)))),r.a.createElement(g.a,null,U?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(c.h,{color:"label"},"End Date"),r.a.createElement(c.v,null,s?A(s):""))),r.a.createElement(g.a,null,r.a.createElement(c.h,{color:"label"},"Evacuation Status"),r.a.createElement(c.v,null,T)),r.a.createElement(g.a,null,r.a.createElement(c.h,{color:"label"},"Last Updated"),r.a.createElement(c.v,null,A(E))),r.a.createElement(d.a,{justifySelf:"end",alignSelf:"center",width:"135px",fontFamily:"default",fontSize:"finePrint",align:"center",justify:"center",rounded:"chip",backgroundColor:U?"success":"disabledBackground",height:"32px",color:U?"white":"disabledButtonText",border:U?"none":"px",borderColor:"disabledBorder",paddingY:0},U?"Active":"Inactive")))))},O=a("HJu1"),T=a("bSwy"),I=a.n(T),z=a("ytJY"),U=a.n(z),M=a("dTpq"),A=a("KYQk"),B=a("FpzS"),L=function(e){var t=e.searchTerm,a=e.onSearchEvent,n={base:"100%"};return r.a.createElement(g.a,{mr:"auto",w:n},r.a.createElement(M.a,{width:n},r.a.createElement(A.a,{px:"inputX",width:"auto",height:"input",children:r.a.createElement(g.a,{as:I.a,color:"clickable",role:"presentation",size:"iconMd"})}),r.a.createElement(B.a,{color:"text",height:"input",display:"inline-block",fontFamily:"body",fontSize:"base",border:"px",borderColor:"inputBorder",boxSizing:"border-box",pl:40,py:4,maxLength:25,outline:"none",placeholder:"Search for an event",_disabled:{color:"disabledButtonText",bg:"disabledBackground",borderColor:"disabledBorder"},_focus:{borderWidth:"2",borderColor:"accent"},value:t,onKeyDown:function(e){27===e.keyCode&&a("")},onChange:function(e){a(e.target.value)}}),t?r.a.createElement(A.b,{width:"input",height:"input",onClick:function(){return a("")},children:r.a.createElement(g.a,{as:U.a,color:"inputPlaceholder",role:"presentation",size:"iconMd"})}):null))},Y=a("xP3E"),F=a("nB9M");function G(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var N=c.b+" HH:mm:ss:SS ZZ";t.default=function(){var e=Object(F.b)("ctfForms","events"),t=e[0],a=e[1],o=function(){var e=t;if(!t){var n=Y.map((function(e){return Object.assign({},e,{eventStartDate:e.eventStartDate?l()(e.eventStartDate,c.b).toDate():void 0,eventEndDate:e.eventEndDate?l()(e.eventEndDate,c.b).toDate():void 0,evacDepAuthDate:e.evacDepAuthDate?l()(e.evacDepAuthDate,c.b).toDate():void 0,evacDepOrdDate:e.evacDepOrdDate?l()(e.evacDepOrdDate,c.b).toDate():void 0,lastUpdatedDateTime:e.lastUpdatedDateTime?l()(e.lastUpdatedDateTime,N).toDate():void 0})}));a(n),e=n}var r=e.map((function(e){return Object.assign({},e,{eventStartDate:l()(e.eventStartDate).toDate(),eventEndDate:l()(e.eventEndDate).toDate(),evacDepAuthDate:l()(e.evacDepAuthDate).toDate(),evacDepOrdDate:l()(e.evacDepOrdDate).toDate(),lastUpdatedDateTime:l()(e.lastUpdatedDateTime).toDate()})}));return G(r).sort((function(e,t){var a,n,r=null!==(a=e.lastUpdatedDateTime)&&void 0!==a?a:new Date,o=null!==(n=t.lastUpdatedDateTime)&&void 0!==n?n:new Date;return r>o?-1:r<o?1:0}))},u=Object(n.useState)(o()),m=u[0],p=u[1],b=Object(n.useState)("-Last Updated"),v=b[0],f=b[1],E=Object(n.useState)(""),g=E[0],h=E[1],D=Object(n.useState)(!0),y=D[0],S=D[1],x=Object(n.useState)(1),w=x[0],k=x[1],T=Object(n.useState)(10),I=T[0],z=(T[1],"-"===v[0]?v.substring(1,v.length):v),U=m.filter((function(e){return!y||e.activeIndicator})),M=Math.ceil(U.length/I);w>M&&k(M);var A=w*I,B=A-I,H=U.length>I?Math.ceil(U.length/I):1,R=1!==H?U.slice(B,A):U;return r.a.createElement(s.a,{pageTitle:"Event Management",pageHeading:"Event Management"},r.a.createElement(d.a,{gridColumn:{base:"1 / -1",md:"1 / 5",lg:"1 / 8",xl:"1 / 9"},direction:"row",wrap:"wrap",justify:"flex-end"},r.a.createElement(L,{searchTerm:g,onSearchEvent:function(e){var t=o();if(""===e)p(t);else{var a=t.filter((function(t){return t.eventTitle.toLowerCase().indexOf(e.toLowerCase())>-1}));p(a)}h(e),f(""),k(1)}})),r.a.createElement(d.a,{align:"center",justify:"flex-end",gridColumn:{base:"3 / 5",md:"span 4",lg:"span 5",xl:"span 4"}},r.a.createElement(C,{sortByText:z,sortOption:v,onToggleSortBy:function(e,t){var a=e;v===t&&(a="-"+e,t="-"+t);var n=m.slice();if(n.sort((function(e,t){var n=1,r=a;"-"===r[0]&&(n=-1,r=r.substring(1));var o=e[r],l=t[r];if("boolean"==typeof e[r])o=e[r]?1:-1,l=t[r]?1:-1;else if("evacStatusCode"===r){var i,c;o="none"===(null===(i=e[r])||void 0===i?void 0:i.toLowerCase())?"":e[r],l="none"===(null===(c=t[r])||void 0===c?void 0:c.toLowerCase())?"":t[r]}else if("string"==typeof o&&"string"==typeof l){var d,s;o=null===(d=o)||void 0===d?void 0:d.toLowerCase(),l=null===(s=l)||void 0===s?void 0:s.toLowerCase()}return o>l?n:o<l?-n:0})),"eventEndDate"===e)for(var r=n.length,o=0;o<r;o++)n[o].activeIndicator&&(n.push(n.splice(o,1)[0]),o--,r--);p(n),f(t)}})),r.a.createElement(d.a,{gridColumn:{base:"1 / 3",md:"1 / -1"},gridRow:{base:"3",md:"auto"},justify:{base:"flex-start",md:"flex-end"}},r.a.createElement(O.a,{onToggleHideInactive:function(){S(!y)}})),r.a.createElement(d.a,{direction:"column",gridColumn:"1 / -1"},R.length>0?R.map((function(e,n){return r.a.createElement(j,{key:n,data:e,onConfirm:function(n,r){var o=n?new Date:void 0,l=Object.assign({},e,{activeIndicator:!n,lastUpdatedDateTime:new Date,eventEndDate:o}),i=t.findIndex((function(e){return e.eventId===r}));t.splice(i,1,l),a(t);var c=m.findIndex((function(e){return e.eventId===r}));m.splice(c,1,l),p(m)}})})):r.a.createElement(c.j,null,"data not found")),r.a.createElement(d.a,{gridColumn:"1 / -1",justify:"center",align:"center"},r.a.createElement("h3",null,"Total Events: ",U.length),r.a.createElement(i.a,{page:w,count:H,onChange:function(e,t){return k(t)}})))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-e4d83f2bc747b8ffe5cf.js.map