{"version":3,"sources":["webpack:///./node_modules/@chakra-ui/core/dist/es/List/index.js","webpack:///./src/components/Dropdown.tsx","webpack:///./node_modules/@material-ui/icons/esm/AddSharp.js","webpack:///./src/components/HideInactiveButton.tsx","webpack:///./src/components/Icons/eventLocationTabMap.inline.svg","webpack:///./node_modules/@material-ui/icons/esm/MoreVertSharp.js","webpack:///./src/components/Icons/icons.tsx","webpack:///./node_modules/@material-ui/icons/esm/ArrowDropUpSharp.js","webpack:///./static/impactedPosts.svg","webpack:///./src/components/Modals/DeactivateLklModal.tsx","webpack:///./src/components/Modals/DeactivateModal.tsx","webpack:///./src/components/Modals/ConfirmTalkingPointModal.tsx","webpack:///./src/components/FormSections/EvacDetails.tsx","webpack:///./src/components/Modals/DeleteFileModal.tsx","webpack:///./src/components/FormSections/EventDetails.tsx","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./node_modules/@material-ui/icons/esm/EditSharp.js","webpack:///./src/components/PageSections/EventOverviewTab.tsx","webpack:///./src/components/FormSections/TalkingPointsDetails.tsx","webpack:///./node_modules/@chakra-ui/core/dist/es/Image/index.js","webpack:///./node_modules/@material-ui/icons/esm/Delete.js","webpack:///./src/components/Modals/AddPostsModal.tsx","webpack:///./src/components/FormSections/ImpactedPostsDetails.tsx","webpack:///./src/components/Forms/EventForm.tsx","webpack:///./node_modules/@material-ui/icons/esm/ExpandLessSharp.js","webpack:///./node_modules/@material-ui/icons/esm/ExpandMoreSharp.js","webpack:///./node_modules/@material-ui/icons/esm/LocationOnSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PersonSharp.js","webpack:///./node_modules/@material-ui/icons/esm/EmailSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PhoneSharp.js","webpack:///./src/components/LKLCard.tsx","webpack:///./src/components/SortLKLFilter.tsx","webpack:///./src/components/PageSections/EventLklTab.tsx","webpack:///./src/components/PageSections/EventEvacDetailsTab.tsx","webpack:///./src/components/AttachmentCard.tsx","webpack:///./src/components/PageSections/EventAttachmentsTab.tsx","webpack:///./src/components/ViewEvent.tsx","webpack:///./src/pages/event.tsx"],"names":["List","_ref","ref","_ref$styleType","styleType","_ref$stylePos","stylePos","spacing","children","props","validChildren","Box","as","listStyleType","listStylePosition","map","child","index","count","displayName","ListItem","_ref2","PseudoBox","mb","diplayName","MotionBox","motion","custom","MotionPseudoBox","Dropdown","p","useState","isOpen","setOpen","borderedRows","width","options","label","menuProps","showSelected","initialSelection","theme","useTheme","dropdownRef","useRef","selectedVal","setSelectedVal","useEffect","closeDropdown","e","current","contains","target","document","addEventListener","removeEventListener","menuMotion","hidden","transform","transition","type","duration","length","ease","visible","listItemProps","display","alignItems","boxSizing","height","paddingX","paddingY","cursor","_notLast","borderBottom","borderColor","position","Flex","align","textAlign","border","borderRadius","background","fontFamily","fontSize","color","_focus","outline","colors","accent","_hover","onClick","aria-haspopup","aria-expanded","aria-label","flex","lineHeight","right","overflowY","variants","zIndex","when","initial","animate","role","tabIndex","m","backgroundColor","boxShadow","option","value","isSelected","hoverBg","colorProps","undefined","key","createElement","d","HideInactiveButton","onToggleHideInactive","id","defaultChecked","onChange","React","EventLocationTabMapInline","defaultProps","module","exports","default","EventLocationTabMapIcon","EventLocationTabMap","aria-hidden","focusable","SearchLocationMapIcon","SearchLocationMap","SearchLocationMapCompassIcon","SearchLocationMapCompass","buttonStyle","bg","hoverFocus","borderStyle","borderWidth","active","DeactivateLklModal","onCancel","onConfirm","locationName","isActivate","status","onClose","isCentered","size","toLocaleLowerCase","marginRight","fontWeight","px","py","_active","DeactivateModal","eventName","ConfirmTalkingPointModal","buttonType","EvacDetails","useFormContext","formState","errors","setValue","getValues","evacStatusCodeRef","evacDepAuthDateRef","orderedDateRef","evacSummaryRef","watchEvacStatus","useWatch","name","useCTFFormContext","isCreate","isView","dirtyFields","Form","title","gridColumn","base","md","lg","labelText","labelId","onFocus","focus","render","onBlur","aria-labelledby","evacStatuses","placeholder","disabled","validationState","evacStatusCode","ValidationState","ERROR","errorMessage","message","changes","newVal","selectedItem","evacDepOrdDate","evacDepAuthDate","Date","Grid","gridGap","gridTemplateColumns","inputRef","maxDate","error","rules","pattern","maxLength","evacSummary","replaceMSWordChars","replace","Type","EventDetails","useDisclosure","isDeactivateOpen","onDeactivateOpen","onOpen","onDeactivateClose","hideTitle","register","eventStartDateRef","eventEndDateRef","managementTypeCodeRef","eventTypeIdRef","eventSummaryRef","watchActiveIndicator","watchEventStartDate","showDivider","required","eventTitle","eventStartDate","validate","afterStartDate","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","compareAsc","minDate","eventEndDate","checked","mgmtTypes","managementTypeCode","eventTypes","eventTypeId","eventSummary","createSvgIcon","TALKINGPOINTSOPURL","OverviewTab","eventData","eventType","find","mgmtType","evacStatus","evaStatus","talkingPoint","talkingPoints","impactedPosts","talkingPointFileName","fileName","isActive","activeIndicator","justify","buttonIcon","mdIcon","EditSharp","alignment","IconAlignment","LEFT","pageState","eventId","isEdit","formSection","navigate","state","Text","margin","displayData","gridRow","formatDateField","marginY","Divider","marginX","opacity","w","my","sm","flexDir","flexGrow","justifyContent","href","fileDataURL","download","rel","templateRows","rowGap","post","maxWidth","postValue","countryValue","pb","countryName","postLabel","inputDate","moment","format","DeleteFileModal","targetType","attachment","TalkingPointDetails","removeModalOpen","onRemoveModalOpen","onRemoveModalClose","errorMsg","setErrorMsg","isTPExist","setIsTPExist","talkingPointRef","click","acceptedFileFormats","setFileInForm","file","reader","FileReader","readAsDataURL","onload","fileSize","fileMimeType","result","mt","VisuallyHidden","accept","join","uploadFile","files","includes","preventDefault","mx","h","top","orientation","MoreVertSharp","maxSizeBytes","allowedFileTypes","onDrop","_","handleRejectedFiles","NativeImage","htmlWidth","htmlHeight","alt","Image","src","fallbackSrc","onError","onLoad","ignoreFallback","rest","hasLoaded","_props$enabled","enabled","isMounted","_useState","setHasLoaded","image","window","event","onerror","useHasImageLoaded","Boolean","imageProps","AddPostsModal","selectedPosts","posts","onSetPosts","countries","useMemo","countriesList","countries_json","filter","push","sort","countryA","countryB","localeCompare","filterUnknowns","Set","selectedCountry","setCountry","postList","setPostList","unknownPostList","setUnknownPostList","countryRef","checkboxRef","addDisabled","filteredPosts","country_cd","unshift","gridRowGap","overflow","unknownChecked","has","uknPostSet","add","currList","postDto","forEach","delete","selectedPost","onClickUnknownCheckbox","isChecked","some","onClickCheckbox","postListWithUnknown","ImpactedPostsDetails","isPostModalOpen","onPostModalOpen","onPostModalClose","defaultValue","currPostList","slice","Delete","ImpactedPostsSvg","EventForm","pageHeading","pageDescription","breadcrumbs","savedEvent","formData","setFormData","updateSavedForm","useSavedForm","isDataLossOpen","onDataLossOpen","onDataLossClose","isTPConfirmOpen","onTPConfirmOpen","onTPConfirmClose","isSaveOpen","onSaveOpen","onSaveClose","defaultValues","Math","floor","random","attachments","lastUpdatedDateTime","formMethods","useForm","mode","handleSubmit","saveData","useCallback","data","skipNavigate","currForm","getSavedForm","savedIdx","findIndex","evt","updatedEvent","splice","setTimeout","Layout","pageTitle","onSubmit","noValidate","TalkingPointsDetails","marginTop","DataLossModal","onLeave","SaveModal","Fragment","LKLCard","lklData","setEventData","savedEvents","updateSavedEvents","checkActive","tabCurrent","setTabCurrent","isDetailOpen","setIsDetailOpen","direction","setDirection","pocIconProps","mr","alignSelf","detailsTabProps","eventLklId","lookupLklDto","lklTitle","locationDesc","lklAddressDto","lklPocListDto","addressDto","address1","address2","city","stateCd","postalCode","countryCd","addressTypeCd","province","latitude","longitude","fullAddress","pocInfo","extractedPoc","fullName","phone","Array","email","personDto","givenName","surName","personEmailDtoList","personPhoneDtoList","personPhoneDto","phoneDto","phoneNum","personEmailDto","emailDto","emailAddress","country","countryCaseFixed","toLowerCase","split","str","charAt","toUpperCase","substring","geoLocationDetails","locationType","locationTypes_json","ml","templateColumns","columnGap","xl","flexBasis","lklDtoIndex","updateEventIndex","foundLklDto","eventLklDtoList","lklDto","tempLklDto","tempLklDtoList","updatedEvents","aria-controls","ExpandLessSharp","ExpandMoreSharp","fontStyle","borderBottomColor","exit","currDirection","LocationOnSharp","poc","PersonSharp","EmailSharp","phoneNumber","PhoneSharp","SortLKLFilter","sortByText","sortOption","onSortByLookUpLklDto","onSortByLklDto","getOptionsValue","labelKey","arrowOnClick","sortBy","padding","ArrowDropDownSharp","ArrowDropUpSharp","LastKnownLocationTab","a","b","checkString","field","aLastUpdatedTime","bLastUpdatedTime","page","setPage","lklsPerPage","sortedLKLs","setSortedLKLs","setSortOption","hideInactive","setHideInactive","controlledLkls","numOfPages","ceil","indexOfLastEvent","indexOfFirstEvent","totalPages","lklsOnPage","AddSharp","bottom","rounded","sorted","aValue","bValue","Pagination","showLastButton","EvacDetailsTab","AttachmentCard","attachmentDto","setAttachmentDtoList","isAttachmentOpen","onAttachmentOpen","onAttachmentClose","attachmentRef","cardOptions","selectedIndex","indexOf","att","savedEventIndex","fileToReplace","AttachmentsTab","progress","setProgress","attachmentDtoList","fileToSet","eventTabs","TabButton","boxProps","primary","ViewEvent","currentEventData","selectedTab","setSelectedTab","inOverview","inLkl","inEvacuation","inAttachments","handleTabClick","tab","currentTarget","blur","outlineWidth","outlineStyle","outlineColor","_disabled","marginBottom","EventPage","location","formMode"],"mappings":"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","file":"component---src-pages-event-tsx-f1f99a6ca966515ad9f3.js","sourcesContent":["import \"core-js/modules/es6.array.map\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport { Children, cloneElement, forwardRef } from \"react\";\nimport Box from \"../Box\";\nimport Icon from \"../Icon\";\nimport PseudoBox from \"../PseudoBox\";\nimport { cleanChildren } from \"../utils\";\nvar List = forwardRef(function (_ref, ref) {\n  var _ref$styleType = _ref.styleType,\n      styleType = _ref$styleType === void 0 ? \"none\" : _ref$styleType,\n      _ref$stylePos = _ref.stylePos,\n      stylePos = _ref$stylePos === void 0 ? \"inside\" : _ref$stylePos,\n      spacing = _ref.spacing,\n      children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"styleType\", \"stylePos\", \"spacing\", \"children\"]);\n\n  var validChildren = cleanChildren(children);\n  return jsx(Box, _extends({\n    ref: ref,\n    as: \"ul\",\n    listStyleType: styleType,\n    listStylePosition: stylePos\n  }, props), validChildren.map(function (child, index) {\n    var isLast = index + 1 === Children.count(children);\n\n    if (isLast) {\n      return child;\n    }\n\n    return cloneElement(child, {\n      spacing: spacing\n    });\n  }));\n});\nList.displayName = \"List\";\nexport var ListItem = forwardRef(function (_ref2, ref) {\n  var spacing = _ref2.spacing,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"spacing\"]);\n\n  return jsx(PseudoBox, _extends({\n    ref: ref,\n    as: \"li\",\n    mb: spacing\n  }, props));\n});\nListItem.diplayName = \"ListItem\";\nexport var ListIcon = function ListIcon(_ref3) {\n  var icon = _ref3.icon,\n      props = _objectWithoutPropertiesLoose(_ref3, [\"icon\"]);\n\n  if (typeof icon === \"string\") {\n    return jsx(Icon, _extends({\n      name: icon,\n      mr: 2\n    }, props));\n  }\n\n  return jsx(Box, _extends({\n    as: icon,\n    d: \"inline\",\n    focusable: \"false\",\n    size: \"1em\",\n    color: \"currentColor\",\n    mr: 2\n  }, props));\n};\nexport default List;","import React, { useState, useEffect, useRef } from \"react\"\r\nimport { Box, BoxProps, PseudoBox, PseudoBoxProps, Flex, List, ListItem, useTheme } from \"@chakra-ui/core\"\r\nimport { motion } from \"framer-motion\"\r\n\r\ntype OmittedBoxProps = \"transition\" | \"style\" | \"onDrag\" | \"onDragEnd\" | \"onDragStart\" | \"onAnimationStart\"\r\n\r\nconst MotionBox = motion.custom<Omit<BoxProps, OmittedBoxProps>>(Box)\r\nconst MotionPseudoBox = motion.custom<Omit<PseudoBoxProps, OmittedBoxProps>>(PseudoBox)\r\n\r\nexport type OptionType = \"primary\" | \"error\"\r\n\r\nexport type DropdownClick = (label: string, value: string) => void\r\n\r\nexport interface DropdownOptions {\r\n\tlabel: string\r\n\tvalue: string\r\n\ttype?: OptionType\r\n\tonClick?: DropdownClick\r\n}\r\n\r\ntype DropdownProps = {\r\n\tchildren: React.ReactElement\r\n\t/**\r\n\t * Show borders between dropdown items\r\n\t */\r\n\tborderedRows?: boolean\r\n\twidth?: BoxProps[\"width\"]\r\n\toptions: DropdownOptions[]\r\n\t/**\r\n\t * Label for dropdown toggle/menu button\r\n\t */\r\n\tlabel: string\r\n\tmenuProps?: Omit<PseudoBoxProps, OmittedBoxProps>\r\n\t/**\r\n\t * Highlights currently selected option\r\n\t * when dropdown is opened\r\n\t */\r\n\tshowSelected?: boolean\r\n\t/**\r\n\t * Initially selected option\r\n\t * that will be highlighted\r\n\t *\r\n\t * (see `showSelected` property)\r\n\t */\r\n\tinitialSelection?: string\r\n}\r\n\r\nconst Dropdown: React.FC<DropdownProps> = (p: DropdownProps) => {\r\n\tconst [isOpen, setOpen] = useState(false)\r\n\tconst { children, borderedRows, width = \"buttonMd\", options = [], label, menuProps, showSelected, initialSelection } = p\r\n\tconst theme = useTheme()\r\n\tconst dropdownRef = useRef<HTMLDivElement>(null)\r\n\tconst [selectedVal, setSelectedVal] = useState<string | undefined>(initialSelection)\r\n\r\n\t/**\r\n\t * Auto-close dropdown if user clicks outside it\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tconst closeDropdown = (e: MouseEvent) => {\r\n\t\t\tif (dropdownRef.current && !dropdownRef.current.contains(e.target as Node)) {\r\n\t\t\t\tsetOpen(false)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener(\"click\", closeDropdown)\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"click\", closeDropdown)\r\n\t\t}\r\n\t}, [setOpen, dropdownRef])\r\n\r\n\tconst menuMotion = {\r\n\t\thidden: {\r\n\t\t\ttransform: \"translateY(-100%)\",\r\n\t\t\ttransition: {\r\n\t\t\t\ttype: \"tween\",\r\n\t\t\t\tduration: options.length > 3 ? 0.5 : 0.25,\r\n\t\t\t\tease: \"easeInOut\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tvisible: {\r\n\t\t\ttransform: \"translateY(0%)\",\r\n\t\t\ttransition: {\r\n\t\t\t\ttype: \"tween\",\r\n\t\t\t\tduration: options.length > 3 ? 0.5 : 0.25,\r\n\t\t\t\tease: \"easeInOut\",\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tconst menuContainerMotion = {\r\n\t\thidden: {\r\n\t\t\tdisplay: \"none\",\r\n\t\t\tzIndex: -1,\r\n\t\t\ttransition: {\r\n\t\t\t\twhen: \"afterChildren\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tvisible: {\r\n\t\t\tdisplay: \"block\",\r\n\t\t\tzIndex: 1,\r\n\t\t\ttransition: {\r\n\t\t\t\twhen: \"beforeChildren\",\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tconst listItemProps: PseudoBoxProps = {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tboxSizing: \"border-box\",\r\n\t\theight: \"option\",\r\n\t\tpaddingX: \"12\",\r\n\t\tpaddingY: \"4\",\r\n\t\tcursor: \"pointer\",\r\n\t}\r\n\r\n\tif (borderedRows) {\r\n\t\tlistItemProps._notLast = {\r\n\t\t\tborderBottom: \"px\",\r\n\t\t\tborderColor: \"disabledDark\",\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetOpen(!isOpen)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box position=\"relative\" ref={dropdownRef}>\r\n\t\t\t<Flex display=\"inline-flex\" align=\"center\">\r\n\t\t\t\t<PseudoBox\r\n\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\tdisplay=\"inline-flex\"\r\n\t\t\t\t\talignItems=\"flex-end\"\r\n\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\tborder=\"none\"\r\n\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\tbackground=\"none\"\r\n\t\t\t\t\tp={0}\r\n\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\tcolor=\"clickable\"\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t_focus={{\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\toutline: `1px solid ${theme.colors.accent}`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t_hover={{\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\toutline: `1px solid ${theme.colors.accent}`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\taria-haspopup=\"listbox\"\r\n\t\t\t\t\taria-expanded={isOpen}\r\n\t\t\t\t\taria-label={label}>\r\n\t\t\t\t\t<Box display=\"inline-flex\" flex=\"1 1 0\" lineHeight=\"linkButton\">\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</PseudoBox>\r\n\t\t\t</Flex>\r\n\r\n\t\t\t<MotionBox\r\n\t\t\t\tright={0}\r\n\t\t\t\t{...menuProps}\r\n\t\t\t\tposition=\"absolute\"\r\n\t\t\t\twidth={width}\r\n\t\t\t\toverflowY=\"hidden\"\r\n\t\t\t\tvariants={menuContainerMotion}\r\n\t\t\t\tinitial={false}\r\n\t\t\t\tanimate={isOpen ? \"visible\" : \"hidden\"}>\r\n\t\t\t\t<MotionPseudoBox\r\n\t\t\t\t\tas={List}\r\n\t\t\t\t\trole=\"listbox\"\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tp={0}\r\n\t\t\t\t\tm={0}\r\n\t\t\t\t\t_focus={{\r\n\t\t\t\t\t\toutline: \"none\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tbackgroundColor=\"white\"\r\n\t\t\t\t\tfontFamily=\"default\"\r\n\t\t\t\t\tfontSize=\"base\"\r\n\t\t\t\t\tborder=\"px\"\r\n\t\t\t\t\tborderColor=\"inputBorder\"\r\n\t\t\t\t\tboxShadow={isOpen ? \"0px 4px 6px rgba(0,0,0,0.4)\" : \"\"}\r\n\t\t\t\t\tboxSizing=\"border-box\"\r\n\t\t\t\t\tvariants={menuMotion}>\r\n\t\t\t\t\t{options.map((option: DropdownOptions, index) => {\r\n\t\t\t\t\t\tconst { onClick, value, label, type: type = \"primary\" } = option\r\n\t\t\t\t\t\tconst isSelected = showSelected && value === selectedVal\r\n\t\t\t\t\t\tconst hoverBg = type === \"primary\" ? \"clickable\" : \"error\"\r\n\t\t\t\t\t\tconst hoverColor = \"white\"\r\n\r\n\t\t\t\t\t\tconst colorProps: PseudoBoxProps = {\r\n\t\t\t\t\t\t\tcolor: isSelected ? hoverColor : type === \"primary\" ? \"text\" : \"error\",\r\n\t\t\t\t\t\t\tbackgroundColor: isSelected ? hoverBg : undefined,\r\n\t\t\t\t\t\t\t_hover: {\r\n\t\t\t\t\t\t\t\tcolor: hoverColor,\r\n\t\t\t\t\t\t\t\tbackgroundColor: hoverBg,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\tas={ListItem}\r\n\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t{...listItemProps}\r\n\t\t\t\t\t\t\t\t{...colorProps}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tonClick && onClick(value, label)\r\n\t\t\t\t\t\t\t\t\tsetSelectedVal(value)\r\n\t\t\t\t\t\t\t\t\tsetOpen(!isOpen)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</MotionPseudoBox>\r\n\t\t\t</MotionBox>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default Dropdown\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'AddSharp');","import React from \"react\"\r\nimport { Checkbox } from \"@c1ds/components\"\r\ntype HideInactiveProp = {\r\n\tonToggleHideInactive: () => void\r\n}\r\n/**\r\n * Hide Inactive button component which hide all events with inactive status.\r\n */\r\nconst HideInactiveButton: React.FC<HideInactiveProp> = ({ onToggleHideInactive }: HideInactiveProp) => (\r\n\t<Checkbox id=\"hideInactive\" aria-label=\"Hide inactive\" value=\"Hide Inactive\" defaultChecked onChange={onToggleHideInactive} />\r\n)\r\n\r\nexport default HideInactiveButton\r\n","var React = require('react');\n\nfunction EventLocationTabMapInline (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"defs\",{\"key\":0},[React.createElement(\"style\",{\"key\":0},\".cls-1{fill:#fff;}.cls-2{fill:#ccc;}.cls-3{fill:url(#linear-gradient);}.cls-4{fill:url(#linear-gradient-2);}.cls-5,.cls-6{fill:#999;}.cls-5{opacity:0.3;}\"),React.createElement(\"linearGradient\",{\"id\":\"linear-gradient\",\"x1\":\"36.64\",\"y1\":\"208.85\",\"x2\":\"55.11\",\"y2\":\"176.86\",\"gradientUnits\":\"userSpaceOnUse\",\"key\":1},[React.createElement(\"stop\",{\"offset\":\"0\",\"stopColor\":\"#fff\",\"key\":0}),React.createElement(\"stop\",{\"offset\":\"0.44\",\"stopColor\":\"#fcfcfc\",\"key\":1}),React.createElement(\"stop\",{\"offset\":\"0.76\",\"stopColor\":\"#f3f3f3\",\"key\":2}),React.createElement(\"stop\",{\"offset\":\"1\",\"stopColor\":\"#e6e6e6\",\"key\":3})]),React.createElement(\"linearGradient\",{\"id\":\"linear-gradient-2\",\"x1\":\"201.45\",\"y1\":\"216.77\",\"x2\":\"201.45\",\"y2\":\"190.77\",\"gradientUnits\":\"userSpaceOnUse\",\"key\":2},[React.createElement(\"stop\",{\"offset\":\"0\",\"stopColor\":\"#fff\",\"key\":0}),React.createElement(\"stop\",{\"offset\":\"0.19\",\"stopColor\":\"#f6f6f6\",\"key\":1}),React.createElement(\"stop\",{\"offset\":\"0.6\",\"stopColor\":\"#eaeaea\",\"key\":2}),React.createElement(\"stop\",{\"offset\":\"1\",\"stopColor\":\"#e6e6e6\",\"key\":3})])]),React.createElement(\"title\",{\"key\":1},\"Asset 2\"),React.createElement(\"g\",{\"id\":\"Layer_2\",\"data-name\":\"Layer 2\",\"key\":2},React.createElement(\"g\",{\"id\":\"Layer_1-2\",\"data-name\":\"Layer 1\"},React.createElement(\"g\",{\"id\":\"Map1\"},[React.createElement(\"polygon\",{\"className\":\"cls-1\",\"points\":\"12.95 150.77 91.95 222.77 202.95 190.77 318.95 219.77 265.95 54.77 201.95 45.77 133.95 70.77 81.95 38.77 12.95 150.77\",\"key\":0}),React.createElement(\"polygon\",{\"className\":\"cls-2\",\"points\":\"131.95 76.77 94.95 213.77 202.95 182.77 198.95 55.77 131.95 76.77\",\"key\":1}),React.createElement(\"polygon\",{\"className\":\"cls-2\",\"points\":\"198.95 55.77 261.95 68.77 307.95 209.77 202.95 182.77 198.95 55.77\",\"key\":2}),React.createElement(\"polygon\",{\"className\":\"cls-1\",\"points\":\"272.66 100.9 276.95 111.77 123.95 72.36 128.95 63.77 272.66 100.9\",\"key\":3}),React.createElement(\"polygon\",{\"className\":\"cls-3\",\"points\":\"19.51 156.3 0 187.7 82.67 213.75 19.51 156.3\",\"key\":4}),React.createElement(\"polygon\",{\"className\":\"cls-4\",\"points\":\"110.95 216.77 202.95 190.77 291.95 214.77 110.95 216.77\",\"key\":5}),React.createElement(\"polygon\",{\"className\":\"cls-2\",\"points\":\"84.95 48.77 131.95 76.77 94.95 213.77 22.95 149.77 84.95 48.77\",\"key\":6}),React.createElement(\"polygon\",{\"className\":\"cls-1\",\"points\":\"57.95 181.77 63.95 189.77 101.95 189.77 201.95 129.77 281.95 127.77 279.95 119.77 200.95 120.77 102.95 180.77 57.95 181.77\",\"key\":7}),React.createElement(\"polygon\",{\"className\":\"cls-1\",\"points\":\"39.95 119.77 45.95 111.77 121.95 111.77 172.95 83.77 198.95 69.77 223.95 60.77 239.95 63.77 199.95 76.77 119.95 119.77 39.95 119.77\",\"key\":8}),React.createElement(\"polygon\",{\"className\":\"cls-1\",\"points\":\"65.95 78.77 115.95 132.77 200.95 140.77 297.95 176.77 300.95 185.77 199.95 149.77 113.95 141.77 59.95 85.77 65.95 78.77\",\"key\":9}),React.createElement(\"polygon\",{\"className\":\"cls-5\",\"points\":\"131.95 76.77 94.95 213.77 202.95 182.77 198.95 55.77 131.95 76.77\",\"key\":10}),React.createElement(\"g\",{\"id\":\"Pin\",\"key\":11},[React.createElement(\"path\",{\"id\":\"Pin2\",\"className\":\"cls-6\",\"d\":\"M142,38.63a39,39,0,0,0-78,0,38.2,38.2,0,0,0,5.39,19.61A38.78,38.78,0,0,0,73.57,64h0l3.68,5.15,7.36,12.51,5.15,9.84,3.68,7.82,3.68,8.83,2.57,8.09,1.84,5.89.74,2.94.73,3.68.74-2.2.73-2.95.74-2.94.74-2.94,2.2-6.63L111,103.2,116.2,92l9.56-16.92,6.63-10.31,1.76-2.94A38.18,38.18,0,0,0,142,38.63Z\",\"key\":0}),React.createElement(\"circle\",{\"id\":\"Pin_circle\",\"data-name\":\"Pin circle\",\"className\":\"cls-1\",\"cx\":\"102.95\",\"cy\":\"40.47\",\"r\":\"24.28\",\"key\":1})])])))]);\n}\n\nEventLocationTabMapInline.defaultProps = {\"viewBox\":\"0 0 318.95 222.77\"};\n\nmodule.exports = EventLocationTabMapInline;\n\nEventLocationTabMapInline.default = EventLocationTabMapInline;\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVertSharp');","import React from \"react\"\r\nimport { Box, BoxProps } from \"@chakra-ui/core\"\r\n\r\nimport EventLocationTabMap from \"./eventLocationTabMap.inline.svg\"\r\nimport SearchLocationMap from \"./searchLocationMap.inline.svg\"\r\nimport SearchLocationMapCompass from \"./searchLocationMapCompass.inline.svg\"\r\n\r\nexport const EventLocationTabMapIcon: React.FC<BoxProps> = p => (\r\n\t<Box\r\n\t\t{...p}\r\n\t\tas={EventLocationTabMap}\r\n\t\taria-hidden=\"true\"\r\n\t\t// @ts-ignore\r\n\t\tfocusable={false}\r\n\t/>\r\n)\r\n\r\nexport const SearchLocationMapIcon: React.FC<BoxProps> = p => (\r\n\t<Box\r\n\t\t{...p}\r\n\t\tas={SearchLocationMap}\r\n\t\taria-hidden=\"true\"\r\n\t\t// @ts-ignore\r\n\t\tfocusable={false}\r\n\t/>\r\n)\r\n\r\nexport const SearchLocationMapCompassIcon: React.FC<BoxProps> = p => (\r\n\t<Box\r\n\t\t{...p}\r\n\t\tas={SearchLocationMapCompass}\r\n\t\taria-hidden=\"true\"\r\n\t\t// @ts-ignore\r\n\t\tfocusable={false}\r\n\t/>\r\n)\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M7 14l5-5 5 5H7z\"\n}), 'ArrowDropUpSharp');","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzE4Ljk1IDIyMi43NyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fS5jbHMtMntmaWxsOiNjY2M7fS5jbHMtM3tmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50KTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtMik7fS5jbHMtNSwuY2xzLTZ7ZmlsbDojOTk5O30uY2xzLTV7b3BhY2l0eTowLjM7fTwvc3R5bGU+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIzNi42NCIgeTE9IjIwOC44NSIgeDI9IjU1LjExIiB5Mj0iMTc2Ljg2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIwLjQ0IiBzdG9wLWNvbG9yPSIjZmNmY2ZjIi8+PHN0b3Agb2Zmc2V0PSIwLjc2IiBzdG9wLWNvbG9yPSIjZjNmM2YzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZTZlNmU2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iMjAxLjQ1IiB5MT0iMjE2Ljc3IiB4Mj0iMjAxLjQ1IiB5Mj0iMTkwLjc3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIwLjE5IiBzdG9wLWNvbG9yPSIjZjZmNmY2Ii8+PHN0b3Agb2Zmc2V0PSIwLjYiIHN0b3AtY29sb3I9IiNlYWVhZWEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNlNmU2ZTYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+QXNzZXQgMjwvdGl0bGU+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48ZyBpZD0iTWFwMSI+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjEyLjk1IDE1MC43NyA5MS45NSAyMjIuNzcgMjAyLjk1IDE5MC43NyAzMTguOTUgMjE5Ljc3IDI2NS45NSA1NC43NyAyMDEuOTUgNDUuNzcgMTMzLjk1IDcwLjc3IDgxLjk1IDM4Ljc3IDEyLjk1IDE1MC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIwMi45NSAxODIuNzcgMTk4Ljk1IDU1Ljc3IDEzMS45NSA3Ni43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxOTguOTUgNTUuNzcgMjYxLjk1IDY4Ljc3IDMwNy45NSAyMDkuNzcgMjAyLjk1IDE4Mi43NyAxOTguOTUgNTUuNzciLz48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMjcyLjY2IDEwMC45IDI3Ni45NSAxMTEuNzcgMTIzLjk1IDcyLjM2IDEyOC45NSA2My43NyAyNzIuNjYgMTAwLjkiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTkuNTEgMTU2LjMgMCAxODcuNyA4Mi42NyAyMTMuNzUgMTkuNTEgMTU2LjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTEwLjk1IDIxNi43NyAyMDIuOTUgMTkwLjc3IDI5MS45NSAyMTQuNzcgMTEwLjk1IDIxNi43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSI4NC45NSA0OC43NyAxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIyLjk1IDE0OS43NyA4NC45NSA0OC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI1Ny45NSAxODEuNzcgNjMuOTUgMTg5Ljc3IDEwMS45NSAxODkuNzcgMjAxLjk1IDEyOS43NyAyODEuOTUgMTI3Ljc3IDI3OS45NSAxMTkuNzcgMjAwLjk1IDEyMC43NyAxMDIuOTUgMTgwLjc3IDU3Ljk1IDE4MS43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIzOS45NSAxMTkuNzcgNDUuOTUgMTExLjc3IDEyMS45NSAxMTEuNzcgMTcyLjk1IDgzLjc3IDE5OC45NSA2OS43NyAyMjMuOTUgNjAuNzcgMjM5Ljk1IDYzLjc3IDE5OS45NSA3Ni43NyAxMTkuOTUgMTE5Ljc3IDM5Ljk1IDExOS43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI2NS45NSA3OC43NyAxMTUuOTUgMTMyLjc3IDIwMC45NSAxNDAuNzcgMjk3Ljk1IDE3Ni43NyAzMDAuOTUgMTg1Ljc3IDE5OS45NSAxNDkuNzcgMTEzLjk1IDE0MS43NyA1OS45NSA4NS43NyA2NS45NSA3OC43NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIxMzEuOTUgNzYuNzcgOTQuOTUgMjEzLjc3IDIwMi45NSAxODIuNzcgMTk4Ljk1IDU1Ljc3IDEzMS45NSA3Ni43NyIvPjxnIGlkPSJQaW4iPjxwYXRoIGlkPSJQaW4yIiBjbGFzcz0iY2xzLTYiIGQ9Ik0xNDIsMzguNjNhMzksMzksMCwwLDAtNzgsMCwzOC4yLDM4LjIsMCwwLDAsNS4zOSwxOS42MUEzOC43OCwzOC43OCwwLDAsMCw3My41Nyw2NGgwbDMuNjgsNS4xNSw3LjM2LDEyLjUxLDUuMTUsOS44NCwzLjY4LDcuODIsMy42OCw4LjgzLDIuNTcsOC4wOSwxLjg0LDUuODkuNzQsMi45NC43MywzLjY4Ljc0LTIuMi43My0yLjk1Ljc0LTIuOTQuNzQtMi45NCwyLjItNi42M0wxMTEsMTAzLjIsMTE2LjIsOTJsOS41Ni0xNi45Miw2LjYzLTEwLjMxLDEuNzYtMi45NEEzOC4xOCwzOC4xOCwwLDAsMCwxNDIsMzguNjNaIi8+PGNpcmNsZSBpZD0iUGluX2NpcmNsZSIgZGF0YS1uYW1lPSJQaW4gY2lyY2xlIiBjbGFzcz0iY2xzLTEiIGN4PSIxMDIuOTUiIGN5PSI0MC40NyIgcj0iMjQuMjgiLz48L2c+PC9nPjwvZz48L2c+PC9zdmc+\"","import React from \"react\"\r\nimport { Box, Flex, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeactivateModalProps {\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tlocationName?: string\r\n\t/**\r\n\t * Indicates whether modal is for last known location activation.\r\n\t *\r\n\t * If true, confirmation button/description will display \"Activate\"\r\n\t *\r\n\t * If false, confirmation button/description will display \"Deactivate\"\r\n\t *\r\n\t * If undefined, confirmation button/description will display \"Yes\"\r\n\t */\r\n\tisActivate?: boolean\r\n}\r\n\r\nconst buttonStyle = {\r\n\tdefault: {\r\n\t\tbg: \"badge\",\r\n\t\tcolor: \"white\",\r\n\t\tborder: \"none\",\r\n\t},\r\n\thoverFocus: {\r\n\t\tborderStyle: \"solid\",\r\n\t\tborderWidth: \"2\",\r\n\t\tborderColor: \"accent\",\r\n\t},\r\n\tactive: {\r\n\t\tbg: \"#a30014\",\r\n\t\tborder: \"none\",\r\n\t},\r\n}\r\n\r\nconst DeactivateLklModal: React.FC<DeactivateModalProps> = ({\r\n\tisOpen,\r\n\tonCancel,\r\n\tonConfirm,\r\n\tlocationName,\r\n\tisActivate,\r\n}: DeactivateModalProps) => {\r\n\t// if locationName and isActivate are not defined, it will prompt default Deactivate Modal with no event information.\r\n\tconst status = isActivate ? \"Activate\" : \"Deactivate\"\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>{status} Last Known Location?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>\r\n\t\t\t\t\tAre you sure you want to {status.toLocaleLowerCase()} {locationName ?? \"this last known location?\"}?\r\n\t\t\t\t</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{typeof isActivate === \"undefined\" ? (\r\n\t\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\t\tYES\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : !isActivate ? (\r\n\t\t\t\t\t\t// Deactivate button with warning background color.\r\n\t\t\t\t\t\t<ChakraButton\r\n\t\t\t\t\t\t\theight=\"input\"\r\n\t\t\t\t\t\t\twidth=\"buttonMd\"\r\n\t\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\t\t\tfontWeight=\"button\"\r\n\t\t\t\t\t\t\tpx={20}\r\n\t\t\t\t\t\t\tpy={12}\r\n\t\t\t\t\t\t\t{...buttonStyle.default}\r\n\t\t\t\t\t\t\t_focus={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_hover={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_active={buttonStyle.active}\r\n\t\t\t\t\t\t\tonClick={onConfirm}>\r\n\t\t\t\t\t\t\t<Box flex=\"1 1 0\" lineHeight=\"normal\">\r\n\t\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ChakraButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button size={isActivate ? \"md\" : \"sm\"} onClick={onConfirm}>\r\n\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeactivateLklModal\r\n","import React from \"react\"\r\nimport { Box, Flex, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeactivateModalProps {\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\teventName?: string\r\n\t/**\r\n\t * Indicates whether modal is for event activation.\r\n\t *\r\n\t * If true, confirmation button/description will display \"Activate\"\r\n\t *\r\n\t * If false, confirmation button/description will display \"Deactivate\"\r\n\t *\r\n\t * If undefined, confirmation button/description will display \"Yes\"\r\n\t */\r\n\tisActivate?: boolean\r\n}\r\n\r\nconst buttonStyle = {\r\n\tdefault: {\r\n\t\tbg: \"badge\",\r\n\t\tcolor: \"white\",\r\n\t\tborder: \"none\",\r\n\t},\r\n\thoverFocus: {\r\n\t\tborderStyle: \"solid\",\r\n\t\tborderWidth: \"2\",\r\n\t\tborderColor: \"accent\",\r\n\t},\r\n\tactive: {\r\n\t\tbg: \"#a30014\",\r\n\t\tborder: \"none\",\r\n\t},\r\n}\r\n\r\nconst DeactivateModal: React.FC<DeactivateModalProps> = ({\r\n\tisOpen,\r\n\tonCancel,\r\n\tonConfirm,\r\n\teventName,\r\n\tisActivate,\r\n}: DeactivateModalProps) => {\r\n\t// if eventName and isActivate are not defined, it will prompt default Deactivate Modal with no event information.\r\n\tconst status = isActivate ? \"Activate\" : \"Deactivate\"\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>{status} Event?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>\r\n\t\t\t\t\tAre you sure you want to {status.toLocaleLowerCase()} {eventName ?? \"this event\"}?\r\n\t\t\t\t</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{typeof isActivate === \"undefined\" ? (\r\n\t\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\t\tYES\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : !isActivate ? (\r\n\t\t\t\t\t\t// Deactivate button with warning background color.\r\n\t\t\t\t\t\t<ChakraButton\r\n\t\t\t\t\t\t\theight=\"input\"\r\n\t\t\t\t\t\t\twidth=\"buttonMd\"\r\n\t\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\t\t\tfontWeight=\"button\"\r\n\t\t\t\t\t\t\tpx={20}\r\n\t\t\t\t\t\t\tpy={12}\r\n\t\t\t\t\t\t\t{...buttonStyle.default}\r\n\t\t\t\t\t\t\t_focus={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_hover={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_active={buttonStyle.active}\r\n\t\t\t\t\t\t\tonClick={onConfirm}>\r\n\t\t\t\t\t\t\t<Box flex=\"1 1 0\" lineHeight=\"normal\">\r\n\t\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ChakraButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button size={isActivate ? \"md\" : \"sm\"} onClick={onConfirm}>\r\n\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeactivateModal\r\n","import React from \"react\"\r\nimport { H4, P, Button, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\n\r\ninterface ConfirmTalkingPointModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: () => void\r\n}\r\n\r\nexport const ConfirmTalkingPointModal: React.FC<ConfirmTalkingPointModalProps> = (p: ConfirmTalkingPointModalProps) => (\r\n\t<Modal isOpen={p.isOpen} onClose={p.onClose} isCentered={true} size=\"sm\">\r\n\t\t<ModalHeader>\r\n\t\t\t<H4>Empty Talking Point</H4>\r\n\t\t</ModalHeader>\r\n\t\t<ModalCloseButton />\r\n\t\t<ModalBody>\r\n\t\t\t<P>The event is saving with the pre-determined Talking Points. Would you like to continue?</P>\r\n\t\t</ModalBody>\r\n\r\n\t\t<ModalFooter>\r\n\t\t\t<Flex align=\"center\">\r\n\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t<LinkButton onClick={p.onClose}>\r\n                    Cancel\r\n                    </LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Button size=\"sm\" onClick={p.onConfirm} buttonType=\"secondary\">\r\n                    Continue\r\n\t\t\t\t</Button>\r\n\t\t\t</Flex>\r\n\t\t</ModalFooter>\r\n\t</Modal>\r\n)\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid } from \"@chakra-ui/core\"\r\nimport { DatePicker, Select, FormInput, ValidationState, Textarea } from \"@c1ds/components\"\r\n\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\n\r\nconst EvacDetails: React.FC = () => {\r\n\tconst { formState, errors, setValue, getValues } = useFormContext<EventFormData>()\r\n\r\n\tconst evacStatusCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst evacDepAuthDateRef = useRef<HTMLInputElement>(null)\r\n\tconst orderedDateRef = useRef<HTMLInputElement>(null)\r\n\tconst evacSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchEvacStatus = useWatch<string>({ name: \"evacStatusCode\" })\r\n\r\n\tconst { isCreate, isView } = useCTFFormContext()\r\n\r\n\tconst { dirtyFields } = formState\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Evacuation Details\">\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Status\" labelId=\"evacStatusCodeLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\tonFocus={() => evacStatusCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={evacStatusCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacStatusCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={evacStatuses}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacStatusCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacStatusCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tconst newVal = changes.selectedItem?.value\r\n\t\t\t\t\t\t\t\t\tonChange(newVal)\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.16.6 The system defaults the Authorized or Ordered Date to Todays date\r\n\t\t\t\t\t\t\t\t\t * when Evacuation Status is selected.\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (newVal === \"ADEP\" && !getValues(\"evacDepAuthDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepAuthDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"ODEP\" && !getValues(\"evacDepOrdDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepOrdDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"NONE\") {\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 9\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(2,max-content)\" }}>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Authorized\" labelId=\"evacDepAuthDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tname=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tinputRef={evacDepAuthDateRef}\r\n\t\t\t\t\t\tonFocus={() => evacDepAuthDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to blank\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.4 The system enables Date Departure Authorized\r\n\t\t\t\t\t\t * when Evacuation Status to Authorized\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ADEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepAuthDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepAuthDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Ordered\" labelId=\"orderedDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tname=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tinputRef={orderedDateRef}\r\n\t\t\t\t\t\tonFocus={() => orderedDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to blank\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.5 The system enables Date Departure Ordered\r\n\t\t\t\t\t\t * when Evacuation Status to Ordered\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ODEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepOrdDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepOrdDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Summary\" labelId=\"evacSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Evacuation Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Evacuation Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => evacSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={evacSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"evacSummary\"\r\n\t\t\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EvacDetails\r\n","import React from \"react\"\r\nimport { Box, Flex } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeleteFileModalProps {\r\n\ttype: string\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n}\r\nenum Type {\r\n\ttalkingPoint = \"Talking Point\",\r\n\tattachment = \"Attachment\",\r\n}\r\n\r\nconst DeleteFileModal: React.FC<DeleteFileModalProps> = ({ type, isOpen, onCancel, onConfirm }: DeleteFileModalProps) => {\r\n\tconst targetType = type === \"talking point\" ? Type.talkingPoint : type === \"attachment\" ? Type.attachment : \"\"\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Delete {targetType}?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>Are you sure you want to delete this {type}? This action cannot be undone.</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeleteFileModal\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Switch, DatePicker, Select, FormInput, Text, ValidationState, Textarea } from \"@c1ds/components\"\r\nimport { compareAsc } from \"date-fns\"\r\n\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\nimport DeactivateModal from \"../Modals/DeactivateModal\"\r\n\r\ninterface EventDetailsProps {\r\n\thideTitle?: boolean\r\n}\r\n\r\nconst EventDetails: React.FC<EventDetailsProps> = (p: EventDetailsProps) => {\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\tconst { hideTitle } = p\r\n\r\n\tconst { register, errors, setValue } = useFormContext<EventFormData>()\r\n\r\n\tconst eventStartDateRef = useRef<HTMLInputElement>(null)\r\n\tconst eventEndDateRef = useRef<HTMLInputElement>(null)\r\n\tconst managementTypeCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventTypeIdRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchActiveIndicator = useWatch<boolean>({ name: \"activeIndicator\" })\r\n\tconst watchEventStartDate: Date | undefined = useWatch({ name: \"eventStartDate\" }) as Date\r\n\r\n\tconst { isView, isCreate } = useCTFFormContext()\r\n\r\n\treturn (\r\n\t\t<FormSection title={hideTitle ? undefined : \"Event Details\"} showDivider={isCreate}>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Title\" labelId=\"eventTitleLabel\" required>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tref={register({\r\n\t\t\t\t\t\t\trequired: \"Please enter an Event Title\",\r\n\t\t\t\t\t\t\tmaxLength: { value: 25, message: \"Event Title cannot exceed 25 characters\" },\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tname=\"eventTitle\"\r\n\t\t\t\t\t\tid=\"eventTitle\"\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tmaxLength={25}\r\n\t\t\t\t\t\tvalidationState={errors?.eventTitle ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\terrorMessage={errors?.eventTitle?.message}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * 1.5 The system disallows a space or non-alphanumeric character (in plain text)\r\n\t\t\t\t\t\t\t * at beginning of the title field\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\te.target.value = e.target.value.replace(/^[^A-Za-z0-9]+/, \"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(3,max-content)\" }}>\r\n\t\t\t\t<FormInput labelText=\"Start Date\" labelId=\"eventStartDateLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventStartDate\"\r\n\t\t\t\t\t\tname=\"eventStartDate\"\r\n\t\t\t\t\t\trules={{ required: \"Please enter a Start Date\" }}\r\n\t\t\t\t\t\tinputRef={eventStartDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventStartDateRef.current?.focus()}\r\n\t\t\t\t\t\t/* 1.6.1 The user can edit the Start Date to any date before today's date\r\n\t\t\t\t\t\t * with valid date range: 01/01/1900 to 01/01/9999\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventStartDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventStartDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"End Date\" labelId=\"eventEndDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventEndDate\"\r\n\t\t\t\t\t\tname=\"eventEndDate\"\r\n\t\t\t\t\t\t/* The system displays appropriate error message\r\n\t\t\t\t\t\t * \"End Date must be equal or later than Start Date\"\r\n\t\t\t\t\t\t * when user editing End Date of a reactivate event.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tvalidate: {\r\n\t\t\t\t\t\t\t\tafterStartDate: value =>\r\n\t\t\t\t\t\t\t\t\t!!watchActiveIndicator ||\r\n\t\t\t\t\t\t\t\t\tcompareAsc(value, watchEventStartDate) > -1 ||\r\n\t\t\t\t\t\t\t\t\t\"End Date must be equal to or later than Start Date\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinputRef={eventEndDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventEndDateRef.current?.focus()}\r\n\t\t\t\t\t\tminDate={watchEventStartDate ? watchEventStartDate : undefined}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventEndDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventEndDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Active\" labelId=\"activeIndicatorLabel\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tref={register()}\r\n\t\t\t\t\t\tname=\"activeIndicator\"\r\n\t\t\t\t\t\tid=\"activeIndicator\"\r\n\t\t\t\t\t\tvalue=\"Active\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\tsetValue(\"eventEndDate\", undefined)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t * Note: Prevent default will not work as expected for checkboxes in React.\r\n\t\t\t\t\t\t\t\t * Instead, revert activeIndicator value back to true\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\tsetValue(\"activeIndicator\", true)\r\n\t\t\t\t\t\t\t\tonDeactivateOpen()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"1 / 5\" }}>\r\n\t\t\t\t<FormInput labelText=\"Management Type\" labelId=\"managementTypeCodeLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select a Management Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => managementTypeCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={managementTypeCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"managementTypeCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={mgmtTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.managementTypeCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.managementTypeCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"1 / 5\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Type\" labelId=\"eventTypeIdLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select an Event Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventTypeIdRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={eventTypeIdRef}\r\n\t\t\t\t\t\t\t\tid=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventTypeIdLabel\"\r\n\t\t\t\t\t\t\t\toptions={eventTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventTypeId ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventTypeId?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Summary\" labelId=\"eventSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Event Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Event Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={eventSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"eventSummary\"\r\n\t\t\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<DeactivateModal\r\n\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 1.11.2 The user clicks on [YES] on the confirmation message\r\n\t\t\t\t\t * to deactivate the event or clicks on [Cancel] to exit the deactivation.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t// 1.11.3 The system update the Event Active Indicator to No and Event End Date to today's date.\r\n\t\t\t\t\tsetValue(\"activeIndicator\", false)\r\n\t\t\t\t\tsetValue(\"eventEndDate\", new Date())\r\n\r\n\t\t\t\t\tonDeactivateClose()\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EventDetails\r\n","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z\"\n}), 'EditSharp');","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider, Text } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, Link, H3, IconAlignment, Card } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\nexport const TALKINGPOINTSOPURL = 'https://clmccm-usdos.msappproxy.net/ccm/resource/itemName/com.ibm.team.workitem.Attachment/13685'\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface OverviewTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const OverviewTab: React.FC<OverviewTabProps> = (p: OverviewTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst eventType = eventTypes.find((eventType: Option) => eventType.value === eventData.eventTypeId)?.label\r\n\tconst mgmtType = mgmtTypes.find((mgmtType: Option) => mgmtType.value === eventData.managementTypeCode)?.label\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\tconst talkingPoint = eventData.talkingPoints\r\n\tconst impactedPosts = eventData.impactedPosts\r\n\r\n\tconst talkingPointFileName = talkingPoint && talkingPoint.fileName ? talkingPoint.fileName : 'Talking Points SOP.docx'\r\n\r\n\tconst isActive = !!eventData.activeIndicator\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Event Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"overview\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tfontFamily=\"default\"\r\n\t\t\t\t\t\tcolor={isActive ? \"success\" : \"label\"}\r\n\t\t\t\t\t\tfontSize=\"base\"\r\n\t\t\t\t\t\tfontWeight=\"h3\"\r\n\t\t\t\t\t\tlineHeight=\"normal\"\r\n\t\t\t\t\t\tmargin={0}>\r\n\t\t\t\t\t\t{displayData(isActive ? \"Active\" : \"Inactive\")}\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"7 / 9\" }} gridRow={{ md: \"3\", lg: \"auto\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"3 / 5\" }} gridRow={{ lg: \"2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Start Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventStartDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"5 / 7\" }} gridRow={{ lg: \"2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">End Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventEndDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Management Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(mgmtType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 4\", lg: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Description</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.eventSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Talking Points</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }} >\r\n\t\t\t\t\t<Box mb={{ base: \"4px\", md: \"-12px\" }} >\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Attachments</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <P>{displayData(eventData.eventSummary)}</P> */}\r\n\t\t\t\t</Box>\r\n\t\t\t\t{/* 1.9 The system uses the Default Talking Points (see user story 177855) when no file has been uploaded.\r\n\t\t\t\t\t1.10 The user has an option to view the content of the Default Talking Points. */}\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<Card id={`talkingPointItem`} >\r\n\t\t\t\t\t\t<Flex \r\n\t\t\t\t\t\t\tw=\"full\" \r\n\t\t\t\t\t\t\tmy={{ base: \"-8px\", sm: \"-0px\" }} \r\n\t\t\t\t\t\t\tflexDir={{ base: \"row\" }}>\r\n\t\t\t\t\t\t\t<Flex flexGrow={1} justifyContent=\"flex-start\">\r\n\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\thref={talkingPoint ? `${talkingPoint.fileDataURL}` : TALKINGPOINTSOPURL} \r\n\t\t\t\t\t\t\t\t\tdownload={talkingPointFileName}>\r\n\t\t\t\t\t\t\t\t\t{talkingPointFileName}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Impacted Posts</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\"}}>\r\n\t\t\t\t\t<P>\r\n\t\t\t\t\t\t<Text color=\"required\" as=\"span\">\r\n\t\t\t\t\t\t\t*&nbsp;\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\tWhich Consular Posts are impacted by this event?&nbsp; For a list of posts,{\" \"}\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\thref=\"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noreferrer noopener\">\r\n\t\t\t\t\t\t\tconsult the FAM\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t.\r\n\t\t\t\t\t</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Grid\r\n                    gridColumn={{ base: \"1 / -1\"}}\r\n                    templateRows={{ base: \"1fr 1fr\"}}\r\n                    rowGap={{ base: \"16px\", md: \"24px\" }}>\r\n                    {impactedPosts && impactedPosts.map((post : PostDto) => {\r\n                        return (\r\n                            <Card id=\"ctfPost\" maxWidth=\"full\" key={`${post.postValue}-${post.countryValue}`}>\r\n                                <Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n\t\t\t\t\t\t\t\t\t<Box flexGrow={1}>\r\n\t\t\t\t\t\t\t\t\t\t<Box pb={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">{post.countryName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<P>U.S. Embassy in {post.postLabel}, {post.countryValue}</P>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n                                </Flex>\r\n                            </Card>\r\n                        )\r\n                    })}\r\n                </Grid>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"-\")\r\n","import React, { useRef, useState } from \"react\"\r\nimport { Controller } from \"react-hook-form\"\r\nimport { Box, Divider, VisuallyHidden, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { FormInput, P, FileUploader, Card, Link } from \"@c1ds/components\"\r\n\r\nimport { TALKINGPOINTSOPURL } from \"../PageSections/EventOverviewTab\"\r\nimport { FormSection, useCTFFormContext } from \"../Forms/Form\"\r\nimport Dropdown from \"../Dropdown\"\r\nimport DeleteFileModal from \"../Modals/DeleteFileModal\"\r\n\r\nimport { MoreVertSharp } from \"@material-ui/icons\"\r\n\r\nconst TalkingPointDetails: React.FC = () => {\r\n    const { isOpen: removeModalOpen, onOpen: onRemoveModalOpen, onClose: onRemoveModalClose } = useDisclosure()\r\n\r\n    const [ errorMsg, setErrorMsg ] = useState<string>('')\r\n    const [ isTPExist, setIsTPExist ] = useState<boolean>(false)\r\n\r\n    // Ref to the hidden input type=\"file\"\r\n\tconst talkingPointRef = useRef<HTMLInputElement>(null)\r\n\r\n    const { isCreate, isEdit } = useCTFFormContext()\r\n\r\n\tconst options = [\r\n\t\t{\r\n\t\t\tlabel: \"Replace\",\r\n\t\t\tvalue: \"Replace\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\ttalkingPointRef.current?.click()\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Remove\",\r\n\t\t\tvalue: \"Remove\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonRemoveModalOpen()\r\n\t\t\t},\r\n\t\t},\r\n    ]\r\n    \r\n    const maxSize = 1024 * 1024 * 5\r\n    const acceptedFileFormats = [\r\n        \"text/plain\",\r\n        \"application/pdf\",\r\n        \"application/rtf\",\r\n        \"application/msword\",\r\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n    ]\r\n\r\n    const setFileInForm = (file : File, onChange : (tp : TalkingPoint | undefined) => void) => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => {\r\n            const talkingPoint = {\r\n                fileName : file.name,\r\n                fileSize : file.size,\r\n                fileMimeType : file.type,\r\n                fileDataURL : reader.result\r\n            }\r\n            onChange(talkingPoint)\r\n            setIsTPExist(true)\r\n        }\r\n    }\r\n    \r\n\treturn (\r\n\t\t<FormSection title=\"Talking Points\" showDivider={isCreate || isEdit} >\r\n            <Box gridColumn={{ base: \"1 / -1\" }} >\r\n                {isTPExist ? \r\n                    <P>You have added talking points to this event. The default talking points have been removed.</P>\r\n                :\r\n                <P>If the approved talking points aren&apos;t \r\n                available, <Link href={TALKINGPOINTSOPURL}>pre-determined talking points</Link> will \r\n                be attached to this event.</P>\r\n                }\r\n            </Box>\r\n            \r\n            <Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n                <Controller\r\n                    name=\"talkingPoints\"\r\n                    render={({onChange, value}) => {\r\n                        // Check if Talking Point value exists\r\n                        setIsTPExist(value ? true : false)\r\n                        return (\r\n                            <FormInput labelText=\"Attachments\" labelId=\"talkingPointsLabel\">\r\n                                {value ?\r\n                                // Talking Point Card\r\n                                <Box mt={8}>\r\n                                    <Card id={`talkingPointItem`} >\r\n                                        <VisuallyHidden \r\n                                            as=\"input\" \r\n                                            // @ts-ignore\r\n                                            type=\"file\" \r\n                                            ref={talkingPointRef} \r\n                                            name=\"talkingPoints\"\r\n                                            aria-hidden={true}\r\n                                            tabIndex={-1}\r\n                                            accept={acceptedFileFormats.join()}\r\n                                            onChange={(e : React.FormEvent<HTMLInputElement>) => {\r\n                                                // @ts-ignore\r\n                                                const uploadFile = e.target.files[0]\r\n                                                if (!acceptedFileFormats.includes(uploadFile.type)){\r\n                                                    setErrorMsg(\"File type must be one of .doc, .docx, .txt, .rtf, .pdf\")\r\n                                                } else if (uploadFile.size > maxSize){\r\n                                                    setErrorMsg(\"File is larger than 5242880 bytes\")\r\n                                                } else{\r\n                                                    setErrorMsg('')\r\n                                                    setFileInForm(uploadFile, onChange)\r\n                                                }\r\n                                                \r\n                                            }}/>    \r\n                                        <Flex \r\n                                            w=\"full\" \r\n                                            my={{ base: \"-8px\", sm: \"-12px\" }} \r\n                                            flexDir={{ base: \"row\" }}>\r\n                                            <Flex flexGrow={1} justifyContent=\"flex-start\">\r\n                                                <Link \r\n                                                    href={`${value.fileDataURL}`} \r\n                                                    download={value.fileName}>\r\n                                                    {value.fileName}\r\n                                                </Link>\r\n                                            </Flex>\r\n                                            {/* Additional Talking Points actions Replace and Remove */}\r\n                                            <Flex display={{ base: \"none\", md:\"flex\" }} flexGrow={1} justifyContent=\"flex-end\">\r\n                                                <Link href=\"\" aria-label=\"Replace\" onClick={(e)=> {\r\n                                                    e.preventDefault()\r\n                                                    talkingPointRef.current?.click()} \r\n                                                }>\r\n                                                    Replace\r\n                                                    </Link>\r\n                                                <Box mx={24} >\r\n                                                    <Divider position=\"absolute\" \r\n                                                    h={{base:16, sm: 16 }}\r\n                                                    top={{base:-12, sm: -16}} \r\n                                                    orientation=\"vertical\" \r\n                                                    color=\"silver\" />\r\n                                                </Box>\r\n                                                <Link href=\"\" aria-label=\"Remove\" onClick={(e)=> {\r\n                                                    e.preventDefault()\r\n                                                    onRemoveModalOpen()\r\n                                                }}>\r\n                                                    Remove\r\n                                                    </Link>\r\n                                                <DeleteFileModal\r\n                                                    type=\"talking point\"\r\n                                                    isOpen={removeModalOpen}\r\n                                                    onCancel={onRemoveModalClose}\r\n                                                    onConfirm={() => {\r\n                                                        setIsTPExist(false)\r\n                                                        onChange(undefined)\r\n                                                        onRemoveModalClose()\r\n                                                    }}\r\n                                                />\r\n                                            </Flex>\r\n                                            <Flex display={{ md: \"none\" }} justifyContent=\"flex-end\">\r\n                                                <Box position=\"relative\" right={{ base: \"-12px\" }}>\r\n                                                    <Dropdown\r\n                                                        options={options}\r\n                                                        borderedRows={true}\r\n                                                        width=\"10rem\"\r\n                                                        label={`Additional actions for ${value.fileName}`}>\r\n                                                        <Box as={MoreVertSharp} color=\"clickable\" />\r\n                                                    </Dropdown>\r\n                                                </Box>\r\n                                            </Flex>\r\n                                        </Flex>\r\n                                    </Card>\r\n                                    { errorMsg !== '' && <P color=\"error\">{errorMsg}</P>}\r\n                                </Box>\r\n                                :\r\n                                <FileUploader\r\n                                    id=\"talkingPoints\"\r\n                                    aria-labelledby=\"talkingPoints\"\r\n                                    name=\"talkingPoints\"\r\n                                    maxSizeBytes={maxSize}\r\n                                    allowedFileTypes={[\r\n                                        \".doc\",\r\n                                        \".docx\",\r\n                                        \".txt\",\r\n                                        \".rtf\",\r\n                                        \".pdf\",\r\n                                    ]}\r\n                                    onDrop={(_, files) => {      \r\n                                        setFileInForm(files[0], onChange)\r\n                                        setErrorMsg('')\r\n                                    }}\r\n                                    handleRejectedFiles={(_, files) => {\r\n                                        setErrorMsg(files[0].errors[0])\r\n                                    }} \r\n                                    errorMessage={errorMsg}\r\n                                />\r\n                                }\r\n                            </FormInput>\r\n                        )\r\n                    }}\r\n                />\r\n            </Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default TalkingPointDetails\r\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport Box from \"../Box\";\nexport function useHasImageLoaded(props) {\n  var src = props.src,\n      onLoad = props.onLoad,\n      onError = props.onError,\n      _props$enabled = props.enabled,\n      enabled = _props$enabled === void 0 ? true : _props$enabled;\n  var isMounted = useRef(true);\n\n  var _useState = useState(false),\n      hasLoaded = _useState[0],\n      setHasLoaded = _useState[1];\n\n  useEffect(function () {\n    if (!src || !enabled) {\n      return;\n    }\n\n    var image = new window.Image();\n    image.src = src;\n\n    image.onload = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(true);\n        onLoad && onLoad(event);\n      }\n    };\n\n    image.onerror = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(false);\n        onError && onError(event);\n      }\n    };\n  }, [src, onLoad, onError, enabled]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return hasLoaded;\n}\nvar NativeImage = forwardRef(function (_ref, ref) {\n  var htmlWidth = _ref.htmlWidth,\n      htmlHeight = _ref.htmlHeight,\n      alt = _ref.alt,\n      props = _objectWithoutPropertiesLoose(_ref, [\"htmlWidth\", \"htmlHeight\", \"alt\"]);\n\n  return jsx(\"img\", _extends({\n    width: htmlWidth,\n    height: htmlHeight,\n    ref: ref,\n    alt: alt\n  }, props));\n});\nvar Image = forwardRef(function (props, ref) {\n  var src = props.src,\n      fallbackSrc = props.fallbackSrc,\n      onError = props.onError,\n      onLoad = props.onLoad,\n      ignoreFallback = props.ignoreFallback,\n      rest = _objectWithoutPropertiesLoose(props, [\"src\", \"fallbackSrc\", \"onError\", \"onLoad\", \"ignoreFallback\"]);\n\n  var hasLoaded = useHasImageLoaded({\n    src: src,\n    onLoad: onLoad,\n    onError: onError,\n    enabled: !Boolean(ignoreFallback)\n  });\n  var imageProps = ignoreFallback ? {\n    src: src,\n    onLoad: onLoad,\n    onError: onError\n  } : {\n    src: hasLoaded ? src : fallbackSrc\n  };\n  return jsx(Box, _extends({\n    as: NativeImage,\n    ref: ref\n  }, imageProps, rest));\n});\nImage.displayName = \"Image\";\nexport default Image;","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');","import React, {useState, useRef, useMemo} from \"react\"\r\nimport { H4, P, Button, Select, FormInput, Checkbox,\r\n\tModal, ModalFooter, ModalHeader, ModalCloseButton, LinkButton, } from \"@c1ds/components\"\r\nimport { Grid, Flex, Box } from \"@chakra-ui/core\"\r\nimport countries_json from \"../../../content/countries.json\"\r\nimport posts from \"../../../content/posts.json\"\r\n\r\ninterface AddPostsModalProps {\r\n\tposts: PostDto[]\r\n\tisOpen: boolean\r\n\tonClose(): void\r\n\tonSetPosts: (e: PostDto[]) => void\r\n}\r\n\r\ninterface Post {\r\n\tvalue: string\r\n\tlabel: string\r\n\tcountry_cd: string\r\n}\r\n\r\ninterface Country {\r\n\tvalue: string\r\n\tlabel: string\r\n}\r\n\r\nexport const AddPostsModal: React.FC<AddPostsModalProps> = (p: AddPostsModalProps) => {\r\n\tconst {isOpen, onClose, posts : selectedPosts, onSetPosts} = p\r\n\r\n\tconst countries = useMemo(() => {\r\n\t\tconst countriesList = countries_json.filter((_, index) => index % 5 === 0)\r\n\t\tcountriesList.push({\r\n\t\t\tlabel: \"UNITED STATES OF AMERICA\",\r\n\t\t\tvalue: \"USA\",\r\n\t\t})\r\n\t\tcountriesList.sort((countryA, countryB) => countryA.label.localeCompare(countryB.label))\r\n\t\treturn countriesList\r\n\t}, [])\r\n\r\n\tconst filterUnknowns = new Set<string>(selectedPosts.map((post : PostDto) => {\r\n\t\treturn post.postValue === \"Unknown\" ? post.countryValue : ''\r\n\t}))\r\n\r\n\tconst [selectedCountry, setCountry] = useState<Country>()\r\n\tconst [postList, setPostList] = useState<Array<PostDto>>(selectedPosts)\r\n\tconst [unknownPostList, setUnknownPostList] = useState<Set<string>>(filterUnknowns)\r\n\r\n\tconst countryRef = useRef<HTMLButtonElement>(null)\r\n\tconst checkboxRef = useRef<HTMLInputElement>(null)\r\n\t\r\n\tconst addDisabled = postList.length === 0\r\n\r\n\r\n\tconst filteredPosts = posts.filter(post => post.country_cd === selectedCountry?.value)\r\n\tif(selectedCountry && filteredPosts.length > 1){\r\n\t\tfilteredPosts.unshift({\r\n\t\t\tvalue: 'Unknown',\r\n\t\t\tlabel: 'Unknown Location',\r\n\t\t\tcountry_cd: selectedCountry.value\r\n\t\t})\r\n\t}\r\n\r\n\tconst onClickCheckbox = (e: React.ChangeEvent<HTMLInputElement>, post : Post)=>{\r\n\t\tif (e.target.checked && selectedCountry) {\r\n\t\t\t// Add checked post\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\tconst postDto: PostDto = {\r\n\t\t\t\t\tcountryValue: selectedCountry.value,\r\n\t\t\t\t\tcountryName: selectedCountry.label,\r\n\t\t\t\t\tpostLabel: post.label,\r\n\t\t\t\t\tpostValue: post.value\r\n\t\t\t\t}\r\n\t\t\t\treturn [...currList, postDto]\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// Remove unchecked post\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\treturn currList.filter((selectedPost : PostDto) => {\r\n\t\t\t\t\treturn selectedPost.postValue !== post.value\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst onClickUnknownCheckbox = (e: React.ChangeEvent<HTMLInputElement>, post : Post)=>{\r\n\t\t// value: 'Unknown',\r\n\t\t// label: 'Unknown Location',\r\n\t\t// country_cd: selectedCountry.value\r\n\r\n\t\tif (e.target.checked && selectedCountry) {\r\n\t\t\t// Add unknown post country in the list\r\n\t\t\tsetUnknownPostList(uknPostSet => {\r\n\t\t\t\tuknPostSet.add(post.country_cd)\r\n\t\t\t\treturn uknPostSet\r\n\t\t\t})\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\tconst postDto: PostDto = {\r\n\t\t\t\t\tcountryValue: selectedCountry.value,\r\n\t\t\t\t\tcountryName: selectedCountry.label,\r\n\t\t\t\t\tpostLabel: 'Unknown Location',\r\n\t\t\t\t\tpostValue: 'Unknown'\r\n\t\t\t\t}\r\n\t\t\t\treturn [...currList, postDto]\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// Remove unknown post country in the list\r\n\t\t\tsetUnknownPostList(uknPostSet => {\r\n\t\t\t\tuknPostSet.forEach(country_cd => {\r\n\t\t\t\t\tif(country_cd === post.country_cd){\r\n\t\t\t\t\t\tuknPostSet.delete(country_cd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn uknPostSet\r\n\t\t\t})\r\n\t\t\tsetPostList(currList => {\r\n\t\t\t\treturn currList.filter((selectedPost : PostDto) => {\r\n\t\t\t\t\treturn !(selectedPost.postValue === 'Unknown' && selectedPost.countryValue === post.country_cd)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst onAddPosts= () => {\r\n\t\t// Extract any post which has same country_cd from unknownPostList\r\n\t\tconst postListWithUnknown = postList.filter((post) => {\r\n\t\t\t// extract posts that have same country_cd except Unknown post\r\n\t\t\treturn unknownPostList.has(post.countryValue) ? post.postValue === 'Unknown' : true\r\n\t\t})\r\n\t\tsetCountry(undefined)\r\n\t\tonSetPosts(postListWithUnknown)\r\n\t\tonClose()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onClose} isCentered={true} size=\"lg\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Add Impacted Posts</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<Grid \r\n\t\t\t\tgridColumn={{ base: \"1 / -1\"}}\r\n\t\t\t\tgridRowGap={16}>\r\n\t\t\t\t<FormInput labelText=\"Country\" labelId=\"stateLabel\" required>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tref={countryRef}\r\n\t\t\t\t\t\tid=\"country\"\r\n\t\t\t\t\t\tname=\"country\"\r\n\t\t\t\t\t\taria-labelledby=\"countryLabel\"\r\n\t\t\t\t\t\toptions={countries}\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\tif(changes && changes.selectedItem)\r\n\t\t\t\t\t\t\t\tsetCountry(changes.selectedItem)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tplaceholder={selectedCountry ? selectedCountry.label : 'Select a country'}\r\n\t\t\t\t\t\tvalue={selectedCountry ? selectedCountry.label : 'Select a country'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Post\" labelId=\"stateLabel\" required>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tp={12}\r\n\t\t\t\t\t\th={320}\r\n\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\tborderWidth={1}\r\n\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\t\t\ttemplateRows={{ base: \"repeat(6,1fr)\"}}\r\n\t\t\t\t\t\trowGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\t\t\toverflow=\"auto\">\r\n\r\n\t\t\t\t\t\t{(selectedCountry && selectedCountry.label) ?\r\n\r\n\t\t\t\t\t\t\tfilteredPosts.length !== 0 ?\r\n\t\t\t\t\t\t\t// Filtered posts are posts that have same country code including unknown posts\r\n\t\t\t\t\t\t\tfilteredPosts.map((post : Post, index) => {\r\n\t\t\t\t\t\t\t\tconst unknownChecked = unknownPostList.has(selectedCountry.value)\r\n\t\t\t\t\t\t\t\tif(filteredPosts.length > 1 && index === 0){\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t// If number of posts are more than 1 (1 < n) then this unknown post will be created\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox \r\n\t\t\t\t\t\t\t\t\t\t\tref={checkboxRef}\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"unknownPost\" \r\n\t\t\t\t\t\t\t\t\t\t\tkey={`${post.value}-${post.country_cd}`}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={unknownChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={`Unknown Post in ${selectedCountry.label}`} \r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => {onClickUnknownCheckbox(e, post)}} />\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t// Check if posts were already selected before modal opens\r\n\t\t\t\t\t\t\t\t\tconst isChecked = selectedPosts.some((selectedPost : PostDto) => selectedPost.postValue === post.value)\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox \r\n\t\t\t\t\t\t\t\t\t\t\tid=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tkey={`${post.value}-${post.country_cd}`}\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"post\" \r\n\t\t\t\t\t\t\t\t\t\t\tvalue={`U.S. Embassy in ${post.label}, ${selectedCountry.label}`} \r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={unknownChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => onClickCheckbox(e, post)} />\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<Flex gridRow=\"1/-1\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<Box w={200} textAlign=\"center\">\r\n\t\t\t\t\t\t\t\t\t<P color=\"label\">There are no consular posts in this country.</P>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Flex gridRow=\"1/-1\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Box w={200} textAlign=\"center\">\r\n\t\t\t\t\t\t\t\t<P color=\"label\">Select a country to see a list of consular posts.</P>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={() => {\r\n\t\t\t\t\t\t\tsetCountry(undefined)\r\n\t\t\t\t\t\t\tonClose()\r\n\t\t\t\t\t\t}}>Leave</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button size=\"sm\"\r\n\t\t\t\t\t\tbuttonType=\"primary\"\r\n\t\t\t\t\t\tdisabled={addDisabled}\r\n\t\t\t\t\t\tonClick={onAddPosts}>\r\n\t\t\t\t\t\tAdd\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\n","import React, { useRef, useState } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Flex, Text, Grid, Image, useDisclosure, VisuallyHidden } from \"@chakra-ui/core\"\r\nimport { Delete } from \"@material-ui/icons\"\r\nimport { Link, P, FinePrint, Card } from \"@c1ds/components\"\r\n\r\nimport { FormSection, useCTFFormContext } from \"../Forms/Form\"\r\n\r\nimport { AddPostsModal } from \"../Modals/AddPostsModal\"\r\nimport ImpactedPostsSvg from \"../../../static/impactedPosts.svg\"\r\n\r\ninterface ImpactedPostsProps {\r\n\timpactedPosts?: PostDto[]\r\n}\r\n\r\nconst ImpactedPostsDetails: React.FC<ImpactedPostsProps> = (p: ImpactedPostsProps) => {\r\n\tconst { impactedPosts } = p\r\n\tconst { register } = useFormContext<EventFormData>()\r\n\tconst { isOpen: isPostModalOpen, onOpen: onPostModalOpen, onClose: onPostModalClose } = useDisclosure()\r\n\tconst [postList, setPostList] = useState<Array<PostDto>>(impactedPosts ?? [])\r\n\r\n\tconst { isCreate } = useCTFFormContext()\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Impacted Posts\" showDivider={isCreate}>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t<P>\r\n\t\t\t\t\t<Text color=\"required\" as=\"span\">\r\n\t\t\t\t\t\t*&nbsp;\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t\tWhich Consular Posts are impacted by this event?&nbsp; For a list of posts,{\" \"}\r\n\t\t\t\t\t<Link href=\"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463\" target=\"_blank\" rel=\"noreferrer noopener\">\r\n\t\t\t\t\t\tconsult the FAM\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t.\r\n\t\t\t\t</P>\r\n\t\t\t</Box>\r\n\r\n\t\t\t{postList.length > 0 ? (\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tgridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}\r\n\t\t\t\t\ttemplateRows={{ base: \"1fr 1fr\" }}\r\n\t\t\t\t\trowGap={{ base: \"16px\", md: \"24px\" }}>\r\n\t\t\t\t\t{postList.map((post: PostDto, index: number) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Card id=\"ctfPost\" maxWidth=\"full\" key={`${post.postValue}-${post.countryValue}-${index}`}>\r\n\t\t\t\t\t\t\t\t<Controller ref={register} name={`impactedPosts[${index}]`} defaultValue={post} />\r\n\t\t\t\t\t\t\t\t<Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n\t\t\t\t\t\t\t\t\t<Box flexGrow={1}>\r\n\t\t\t\t\t\t\t\t\t\t<Box pb={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">{post.countryName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<P>\r\n\t\t\t\t\t\t\t\t\t\t\tU.S. Embassy in {post.postLabel}, {post.countryValue}\r\n\t\t\t\t\t\t\t\t\t\t</P>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Box display={{ base: \"none\", md: \"flex\" }} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetPostList(currPostList => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn [...currPostList.slice(0, index), ...currPostList.slice(index + 1)]\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Flex display={{ base: \"flex\", md: \"none\" }} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t<Box as={Delete} right={{ base: \"-12px\" }} color=\"clickable\" />\r\n\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<Link onClick={onPostModalOpen} rel=\"noreferrer noopener\">\r\n\t\t\t\t\t\tAdd Additional Posts\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</Grid>\r\n\t\t\t) : (\r\n\t\t\t\t<Flex\r\n\t\t\t\t\th={{ base: \"240px\", md: \"280px\" }}\r\n\t\t\t\t\tflexDir=\"column\"\r\n\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\tgridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\th={{ base: \"172px\", md: \"212px\" }}\r\n\t\t\t\t\t\tsrc={ImpactedPostsSvg}\r\n\t\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t\talt=\"Posts\"\r\n\t\t\t\t\t\tonClick={onPostModalOpen}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Box textAlign=\"center\" width={{ base: \"240px\", md: \"280px\" }}>\r\n\t\t\t\t\t\t<P color=\"label\">\r\n\t\t\t\t\t\t\tThere are no posts associated with this event.&nbsp;\r\n\t\t\t\t\t\t\t<Link onClick={onPostModalOpen} rel=\"noreferrer noopener\">\r\n\t\t\t\t\t\t\t\tAdd Post\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t)}\r\n\t\t\t<AddPostsModal\r\n\t\t\t\tkey={postList.length}\r\n\t\t\t\tposts={postList}\r\n\t\t\t\tisOpen={isPostModalOpen}\r\n\t\t\t\tonClose={onPostModalClose}\r\n\t\t\t\tonSetPosts={setPostList}\r\n\t\t\t/>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default ImpactedPostsDetails\r\n","import React, { useState, useCallback } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Button, LinkButton } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { ConfirmTalkingPointModal } from '../Modals/ConfirmTalkingPointModal'\r\nimport { DataLossModal } from \"../Modals/DataLossModal\"\r\nimport { SaveModal } from \"../Modals/SaveModal\"\r\nimport { useForm, FormProvider } from \"react-hook-form\"\r\nimport { getSavedForm, useSavedForm } from \"../../components/Utility/formHelpers\"\r\nimport { Form, useCTFFormContext } from \"./Form\"\r\nimport Layout, { LayoutProps } from \"../../components/Layout\"\r\nimport EvacDetails from \"../FormSections/EvacDetails\"\r\nimport EventDetails from \"../FormSections/EventDetails\"\r\nimport TalkingPointsDetails from \"../FormSections/TalkingPointsDetails\"\r\nimport ImpactedPostsDetails from \"../FormSections/ImpactedPostsDetails\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst EventForm: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { isCreate, isEdit, formSection } = useCTFFormContext()\r\n\r\n\tconst [ formData, setFormData] = useState<EventFormData>()\r\n\tconst [, updateSavedForm] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst { isOpen: isDataLossOpen, onOpen: onDataLossOpen, onClose: onDataLossClose } = useDisclosure()\r\n\tconst { isOpen: isTPConfirmOpen, onOpen: onTPConfirmOpen, onClose: onTPConfirmClose } = useDisclosure()\r\n\tconst { isOpen: isSaveOpen, onOpen: onSaveOpen, onClose: onSaveClose } = useDisclosure()\r\n\t\r\n\r\n\tconst defaultValues = {\r\n\t\t// Mimic key generation for Crisis\r\n\t\teventId: `OCS${moment(new Date()).format(\"YYYYDDD\")}${Math.floor(Math.random() * Math.floor(1000000))}`,\r\n\t\teventTitle: \"\",\r\n\t\teventStartDate: new Date(),\r\n\t\tactiveIndicator: true,\r\n\t\tattachments: [],\r\n\t\tmanagementTypeCode: \"mg\",\r\n\t\t// 1.13 The system defaults the Event Type to General.\r\n\t\teventTypeId: \"General\",\r\n\t\teventSummary: \"\",\r\n\t\t// 1.16.1 The system defaults the Evacuation Status to blank\r\n\t\tevacStatusCode: \"NONE\",\r\n\t\tevacSummary: \"\",\r\n\t\timpactedPosts: [],\r\n\t\tlastUpdatedDateTime: new Date(),\r\n\t}\r\n\r\n\tconst formMethods = useForm<EventFormData>({\r\n\t\tmode: \"onBlur\",\r\n\t\tdefaultValues: savedEvent ?? defaultValues,\r\n\t})\r\n\tconst { register, handleSubmit, getValues } = formMethods\r\n\r\n\tconst saveData = useCallback((data, skipNavigate : boolean) => {\r\n\t\tconst currForm = getSavedForm<EventFormData[]>(\"ctfForms\", \"events\", [])\r\n\t\t\tif (isEdit) {\r\n\t\t\t\tconst savedIdx = currForm.findIndex((evt: EventFormData) => evt.eventId === data.eventId)\r\n\t\t\t\t// Merge existing saved data with updates in case any fields are not present in section's form data\r\n\t\t\t\tconst updatedEvent = { ...currForm[savedIdx], ...data }\r\n\t\t\t\tcurrForm.splice(savedIdx, 1, updatedEvent)\r\n\t\t\t} else {\r\n\t\t\t\tcurrForm.push(data)\r\n\t\t\t}\r\n\t\t\tupdateSavedForm(currForm)\r\n\t\t\tonSaveOpen()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (skipNavigate) {\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: Once microservice is connected, use returned eventId/event data\r\n\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t\tformSection,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t}\r\n\t\t\t}, 2000)\r\n\t}, [updateSavedForm, isEdit, onSaveOpen, onSaveClose, getValues, formSection])\r\n\r\n\tconst onSubmit = (data: EventFormData, skipNavigate = false) => {\r\n\t\tdata.lastUpdatedDateTime = new Date()\r\n\t\tdata.impactedPosts = data.impactedPosts ?? []\r\n\t\tdata.attachments = []\r\n\t\tif (data.talkingPoints !== undefined) {\r\n\t\t\tsaveData(data, skipNavigate)\r\n\t\t} else {\r\n\t\t\tsetFormData(data)\r\n\t\t\tonTPConfirmOpen()\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlet pageHeading, pageDescription, breadcrumbs: LayoutProps[\"breadcrumbs\"]\r\n\tif (isEdit) {\r\n\t\tif (formSection === \"overview\") {\r\n\t\t\tpageHeading = \"Edit Event Details\"\r\n\t\t\tpageDescription = \"Edit the basic information related to the developing crisis.\"\r\n\t\t\tbreadcrumbs = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Event\",\r\n\t\t\t\t\tonClick: onDataLossOpen,\r\n\t\t\t\t},\r\n\t\t\t\t{ label: \"Edit Event Details\" },\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\tpageHeading = \"Edit Event Details\"\r\n\t\t\tpageDescription = \"Edit the basic information related to the developing crisis.\"\r\n\t\t\tbreadcrumbs = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Event\",\r\n\t\t\t\t\tonClick: onDataLossOpen,\r\n\t\t\t\t},\r\n\t\t\t\t{ label: \"Edit Event Details\" },\r\n\t\t\t]\r\n\t\t}\r\n\t} else {\r\n\t\tpageHeading = \"Create New Event\"\r\n\t\tpageDescription =\r\n\t\t\t\"Enter the basic information related to the developing crisis. You can add more details later as the event unfolds.\"\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Layout pageTitle=\"Event Details\" pageHeading={pageHeading} pageDescription={pageDescription} breadcrumbs={breadcrumbs}>\r\n\t\t\t<FormProvider {...formMethods}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"eventForm\"\r\n\t\t\t\t\tid=\"eventForm\"\r\n\t\t\t\t\tonSubmit={handleSubmit(data => {\r\n\t\t\t\t\t\tonSubmit(data as EventFormData, false)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tnoValidate={true}>\r\n\t\t\t\t\t<input name=\"eventId\" type=\"hidden\" ref={register} />\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && <EventDetails hideTitle={isEdit} />}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && <TalkingPointsDetails />}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && (\r\n\t\t\t\t\t\t<ImpactedPostsDetails impactedPosts={savedEvent?.impactedPosts} />\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"evacuation\")) && <EvacDetails />}\r\n\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tas=\"nav\"\r\n\t\t\t\t\t\taria-label=\"page\"\r\n\t\t\t\t\t\tid=\"pageNav\"\r\n\t\t\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\tjustify={{ base: \"flex-end\", md: \"flex-start\" }}\r\n\t\t\t\t\t\tmarginTop={{ md: \"72\" }}>\r\n\t\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t\t<LinkButton type=\"button\" onClick={onDataLossOpen}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Button type=\"submit\" size={isEdit ? \"sm\" : \"md\"}>\r\n\t\t\t\t\t\t\t{isEdit ? \"Save\" : \"Create Event\"}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Flex>\r\n\r\n\t\t\t\t\t<DataLossModal\r\n\t\t\t\t\t\tisOpen={isDataLossOpen}\r\n\t\t\t\t\t\tonClose={onDataLossClose}\r\n\t\t\t\t\t\tonLeave={() => {\r\n\t\t\t\t\t\t\tif (isCreate) {\r\n\t\t\t\t\t\t\t\tnavigate(\"/\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t\t\t\t\tformSection,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SaveModal\r\n\t\t\t\t\t\tisOpen={isSaveOpen}\r\n\t\t\t\t\t\tonClose={onSaveClose}\r\n\t\t\t\t\t\tmessage={isCreate ? \"Creating crisis event.\" : \"Saving crisis information.\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ConfirmTalkingPointModal\r\n\t\t\t\t\t\tisOpen={isTPConfirmOpen}\r\n\t\t\t\t\t\tonClose={onTPConfirmClose}\r\n\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\tsaveData(formData, false)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t</FormProvider>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nexport default EventForm\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z\"\n}), 'ExpandLessSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"\n}), 'ExpandMoreSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"\n})), 'LocationOnSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'PersonSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M22 4H2v16h20V4zm-2 4l-8 5-8-5V6l8 5 8-5v2z\"\n}), 'EmailSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M21 15.46l-5.27-.61-2.52 2.52c-2.83-1.44-5.15-3.75-6.59-6.59l2.53-2.53L8.54 3H3.03C2.45 13.18 10.82 21.55 21 20.97v-5.51z\"\n}), 'PhoneSharp');","import React, { useState } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\n\r\nimport { Grid, Flex, Box, PseudoBox, Divider, Text, useDisclosure, BoxProps } from \"@chakra-ui/core\"\r\nimport { P, H4, Card, FinePrint } from \"@c1ds/components\"\r\n\r\nimport Dropdown from \"../components/Dropdown\"\r\nimport { LocationPageState } from \"../pages/newLocation\"\r\nimport DeactivateLklModal from \"../components/Modals/DeactivateLklModal\"\r\nimport { useSavedForm } from \"../components/Utility/formHelpers\"\r\n\r\nimport countries_json from \"../../content/countries.json\"\r\nimport locationTypes_json from \"../../content/locationTypes.json\"\r\n\r\nimport {\r\n\tMoreVertSharp,\r\n\tLocationOnSharp,\r\n\tPersonSharp,\r\n\tEmailSharp,\r\n\tPhoneSharp,\r\n\tExpandLessSharp,\r\n\tExpandMoreSharp,\r\n} from \"@material-ui/icons\"\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\n\r\ntype OmittedBoxProps = \"transition\" | \"style\"\r\n\r\nconst MotionBox = motion.custom<Omit<BoxProps, OmittedBoxProps>>(Box)\r\ninterface LKLCard {\r\n\tlklData: LklDto\r\n\tsetEventData: (eventdata: EventFormData) => void\r\n}\r\n\r\nconst LKLCard: React.FC<LKLCard> = ({ lklData, setEventData }: LKLCard) => {\r\n\tconst [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst checkActive = lklData.activeIndicator\r\n\t// If tabCurrent is true, Location Tab selected otherwise, POC Tab selected\r\n\tconst [tabCurrent, setTabCurrent] = useState(true)\r\n\tconst [isDetailOpen, setIsDetailOpen] = useState(false)\r\n\tconst [direction, setDirection] = useState(1)\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\r\n\tconst pocIconProps = {\r\n\t\tmr: 4,\r\n\t\talignSelf: \"center\",\r\n\t\tsize: \"iconPoc\",\r\n\t\tcolor: \"label\",\r\n\t}\r\n\tconst detailsTabProps = {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tpy: 4,\r\n\t\tfontWeight: 600,\r\n\t\tfontSize: 16,\r\n\t\tcolor: \"headingLarge\",\r\n\t}\r\n\r\n\t// TODO : need to improve how to update entire Event DTO efficiently\r\n\tconst onChangeActivation = () => {\r\n\t\tlet lklDtoIndex = null\r\n\t\tconst updateEventIndex = savedEvents.findIndex((evt: EventFormData) => {\r\n\t\t\tlet foundLklDto = null\r\n\t\t\tif (evt.eventId === lklData.eventId) {\r\n\t\t\t\tfoundLklDto = evt.eventLklDtoList.find((lklDto: LklDto, index: number) => {\r\n\t\t\t\t\tif (lklDto.eventLklId === lklData.eventLklId) {\r\n\t\t\t\t\t\tlklDtoIndex = index\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn foundLklDto ? true : false\r\n\t\t})\r\n\t\tconst tempLklDto = savedEvents[updateEventIndex].eventLklDtoList[lklDtoIndex]\r\n\t\tconst tempLklDtoList = savedEvents[updateEventIndex].eventLklDtoList\r\n\t\ttempLklDtoList.splice(lklDtoIndex, 1, {\r\n\t\t\t...tempLklDto,\r\n\t\t\tactiveIndicator: !checkActive,\r\n\t\t\tlastUpdatedDateTime: new Date(),\r\n\t\t})\r\n\t\tconst updatedEvents = {\r\n\t\t\t...savedEvents[updateEventIndex],\r\n\t\t\teventLklDtoList: tempLklDtoList,\r\n\t\t}\r\n\t\t// Update the current Event to reflect the new LKL list in ViewEvent component\r\n\t\tsetEventData(updatedEvents)\r\n\t\tsavedEvents.splice(updateEventIndex, 1, updatedEvents)\r\n\r\n\t\tupdateSavedEvents(savedEvents)\r\n\t\tonDeactivateClose()\r\n\t}\r\n\r\n\tconst options = [\r\n\t\t{\r\n\t\t\tlabel: \"Edit Location\",\r\n\t\t\tvalue: \"Edit\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tconst pageState: LocationPageState = {\r\n\t\t\t\t\teventId: lklData.eventId,\r\n\t\t\t\t\teventLklId: lklData.eventLklId,\r\n\t\t\t\t}\r\n\t\t\t\tnavigate(\"/newLocation\", { state: pageState })\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: checkActive ? \"Deactivate\" : \"Activate\",\r\n\t\t\tvalue: \"Deactivate\",\r\n\t\t\ttype: checkActive ? (\"error\" as const) : (\"primary\" as const),\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonDeactivateOpen()\r\n\t\t\t},\r\n\t\t},\r\n\t]\r\n\r\n\tconst { lklTitle, locationDesc, lklAddressDto, lklPocListDto }: LookupLklDto = lklData.lookupLklDto\r\n\tconst {\r\n\t\taddress1,\r\n\t\taddress2,\r\n\t\tcity,\r\n\t\tstateCd,\r\n\t\tpostalCode,\r\n\t\tcountryCd,\r\n\t\taddressTypeCd,\r\n\t\tprovince,\r\n\t\tlatitude,\r\n\t\tlongitude,\r\n\t}: AddressDto = lklAddressDto.addressDto\r\n\tconst isUSA = countryCd === \"US\" ? `${city}, ${stateCd}, ${postalCode}` : `${city}, ${province}, ${postalCode}`\r\n\tconst fullAddress = `${address1} ${address2}, ${isUSA}`\r\n\r\n\tconst pocInfo: Array<{ fullName: string; phone: string[]; email: string[] }> = []\r\n\r\n\tif (lklPocListDto && lklPocListDto?.length !== 0) {\r\n\t\tlklPocListDto.map((lklPocListDto: LklPocListDto) => {\r\n\t\t\tconst extractedPoc = { fullName: \"\", phone: Array<string>(), email: Array<string>() }\r\n\t\t\tconst { givenName, surName, personEmailDtoList, personPhoneDtoList }: PersonDto = lklPocListDto.personDto\r\n\t\t\textractedPoc.fullName = `${givenName} ${surName}`\r\n\r\n\t\t\t// TODO: cases for multiple phones and emails\r\n\t\t\tpersonPhoneDtoList.map((personPhoneDto: PersonPhoneDto) => {\r\n\t\t\t\textractedPoc.phone.push(personPhoneDto.phoneDto.phoneNum)\r\n\t\t\t})\r\n\t\t\tpersonEmailDtoList.map((personEmailDto: PersonEmailDto) => {\r\n\t\t\t\textractedPoc.email.push(personEmailDto.emailDto.emailAddress)\r\n\t\t\t})\r\n\t\t\tpocInfo.push(extractedPoc)\r\n\t\t})\r\n\t}\r\n\r\n\tconst country =\tcountries_json.find(country => country.value === countryCd)?.label\r\n\r\n\tconst countryCaseFixed = country\r\n\t\t?.toLowerCase()\r\n\t\t.split(\" \")\r\n\t\t.map(str => {\r\n\t\t\treturn str.charAt(0).toUpperCase() + str.substring(1)\r\n\t\t})\r\n\t\t.join(\" \")\r\n\r\n\tconst geoLocationDetails = () => {\r\n\t\tconst locationType = locationTypes_json.find(locationType => locationType.value === addressTypeCd)\r\n\t\treturn (\r\n\t\t\t<Box>\r\n\t\t\t\t{/* Below 768px */}\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tdisplay={{ base: \"grid\", md: \"none\" }}\r\n\t\t\t\t\tml={24}\r\n\t\t\t\t\tmb={12}\r\n\t\t\t\t\tmaxWidth={600}\r\n\t\t\t\t\ttemplateColumns={{ base: \"repeat(2,1fr)\", sm: \"repeat(3,1fr)\" }}\r\n\t\t\t\t\tcolumnGap={{ base: \"12\" }}\r\n\t\t\t\t\trowGap={{ base: \"12\" }}>\r\n\t\t\t\t\t<Box gridColumn=\"1 / 2\">\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Latitude:</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box gridColumn=\"2 / 3\">\r\n\t\t\t\t\t\t<P>{latitude}</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box gridColumn=\"1 / 2\">\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Longitude:</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box gridColumn=\"2 / 3\">\r\n\t\t\t\t\t\t<P>{longitude}</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box gridColumn=\"1 / 2\">\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Location Type:</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box gridColumn=\"2 / 3\">\r\n\t\t\t\t\t\t<P>{locationType?.label}</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{/* Above 768px */}\r\n\t\t\t\t<Flex display={{ base: \"none\", md: \"flex\" }} mb={12} ml={24} justifyContent=\"space-between\" maxWidth={600}>\r\n\t\t\t\t\t<Flex>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Latitude:&nbsp;</FinePrint>\r\n\t\t\t\t\t\t<P>{latitude}</P>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Flex>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Longitude:&nbsp;</FinePrint>\r\n\t\t\t\t\t\t<P>{longitude}</P>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Flex>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Location Type:&nbsp;</FinePrint>\r\n\t\t\t\t\t\t<P>{locationType?.label}</P>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t</Flex>\r\n\t\t\t</Box>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Box backgroundColor={checkActive ? \"success\" : \"silver\"} h={3} w=\"full\" />\r\n\t\t\t<Card id=\"lklCard\" maxWidth=\"full\">\r\n\t\t\t\t<Flex w=\"full\" mt={{ base: \"-8px\", sm: \"-16px\" }}>\r\n\t\t\t\t\t<Flex flexDir={{ base: \"column\", xl: \"row\" }} flexGrow={1}>\r\n\t\t\t\t\t\t<Box flexBasis={{ xl: \"74%\" }}>\r\n\t\t\t\t\t\t\t<P>{lklTitle}</P>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* location address */}\r\n\t\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t\t<FinePrint color=\"label\">\r\n\t\t\t\t\t\t\t\tU.S. Embassy in {city}, {countryCaseFixed}\r\n\t\t\t\t\t\t\t</FinePrint>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Flex position=\"relative\" right={{ base: \"-12px\", sm: \"-20px\", md: \"-12px\" }}>\r\n\t\t\t\t\t\t<Box display={{ base: \"none\", lg: \"flex\" }} mr={checkActive ? \"72px\" : \"60px\"}>\r\n\t\t\t\t\t\t\t<H4 color={checkActive ? \"success\" : \"label\"}>\r\n\t\t\t\t\t\t\t\t{checkActive ? \"Active\" : \"Inactive\"}\r\n\t\t\t\t\t\t\t</H4>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tborderedRows={true}\r\n\t\t\t\t\t\t\twidth=\"10rem\"\r\n\t\t\t\t\t\t\tlabel={`Additional actions for ${lklTitle}`}>\r\n\t\t\t\t\t\t\t<Box as={MoreVertSharp} color=\"clickable\" />\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<DeactivateLklModal\r\n\t\t\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\t\t\tlocationName={lklTitle}\r\n\t\t\t\t\t\tisActivate={!checkActive}\r\n\t\t\t\t\t\tonConfirm={onChangeActivation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Detail, hide when  */}\r\n\t\t\t\t<Flex mt={8} mb={-12} justifyContent=\"space-between\">\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\t\tdisplay=\"inline-flex\"\r\n\t\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t\tborder=\"none\"\r\n\t\t\t\t\t\tbackgroundColor=\"transparent\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetIsDetailOpen(!isDetailOpen)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\taria-expanded={isDetailOpen}\r\n\t\t\t\t\t\taria-controls=\"detailsToggleButton\"\r\n\t\t\t\t\t\taria-label={`Details toggle button for ${lklTitle}`}\r\n\t\t\t\t\t\tcolor=\"clickable\">\r\n\t\t\t\t\t\t<Text my={0} fontSize={16}>\r\n\t\t\t\t\t\t\tDetails\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t{isDetailOpen ? <ExpandLessSharp /> : <ExpandMoreSharp />}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box fontStyle=\"bold\" display={{ base: \"block\", lg: \"none\" }}>\r\n\t\t\t\t\t\t<H4 color={checkActive ? \"success\" : \"label\"}>\r\n\t\t\t\t\t\t\t{checkActive ? \"Active\" : \"Inactive\"}\r\n\t\t\t\t\t\t</H4>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Location */}\r\n\t\t\t\t{isDetailOpen ? (\r\n\t\t\t\t\t// TODO: Dynamic height with useEffect\r\n\t\t\t\t\t<Box id=\"detailsToggleButton\" position=\"relative\" overflow=\"hidden\">\r\n\t\t\t\t\t\t<Divider borderColor=\"silver\" my={16} />\r\n\t\t\t\t\t\t{/* Detail Tabs before extra large view*/}\r\n\t\t\t\t\t\t<Box display={{ xl: \"none\" }}>\r\n\t\t\t\t\t\t\t<Flex mb={16}>\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 3 : 0}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {}\r\n\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(-1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(true)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmr={8}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t\t<Box mx={8} />\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 0 : 3}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t: {}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(false)\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tPoint of Contact\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t<AnimatePresence custom={direction} initial={false}>\r\n\t\t\t\t\t\t\t\t<MotionBox\r\n\t\t\t\t\t\t\t\t\tposition=\"relative\"\r\n\t\t\t\t\t\t\t\t\tinitial={{ transform: `translateX(${direction < 0 ? \"-100%\" : \"100%\"})` }}\r\n\t\t\t\t\t\t\t\t\ttransition={{\r\n\t\t\t\t\t\t\t\t\t\ttype: \"tween\",\r\n\t\t\t\t\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\t\t\t\t\tease: \"easeInOut\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tanimate={{\r\n\t\t\t\t\t\t\t\t\t\ttransform: \"translateX(0%)\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\texit={(currDirection: number) => ({\r\n\t\t\t\t\t\t\t\t\t\ttransform: `translateX(${currDirection < 0 ? \"100%\" : \"-100%\"})`,\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\twidth=\"100%\">\r\n\t\t\t\t\t\t\t\t\t{tabCurrent ? (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t{geoLocationDetails()}\r\n\t\t\t\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexDir={{ base: \"column\", md: \"row\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpx={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmy={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent=\"space-around\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</MotionBox>\r\n\t\t\t\t\t\t\t</AnimatePresence>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* Detail Tabs at extra large view*/}\r\n\t\t\t\t\t\t<Flex display={{ base: \"none\", xl: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"63%\" }}>\r\n\t\t\t\t\t\t\t\t<Box pb={16}>\r\n\t\t\t\t\t\t\t\t\t<H4>Location</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t{geoLocationDetails()}\r\n\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" flexBasis={{ xl: \"2%\" }} color=\"silver\" />\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"35%\" }}>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<H4>Point of Contact</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tp={16}\r\n\t\t\t\t\t\t\t\t\t\t\tmy={16}\r\n\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\tcolumnGap={{ base: \"4\" }}\r\n\t\t\t\t\t\t\t\t\t\t\trowGap={{ base: \"4\" }}\r\n\t\t\t\t\t\t\t\t\t\t\ttemplateColumns=\"repeat(2,1fr)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index} gridColumn=\"1 / 2\" gridRow={index+2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber: string, index: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index} gridColumn=\"2 / 3\" gridRow={index+2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t) : null}\r\n\t\t\t</Card>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default LKLCard\r\n","import React from \"react\"\r\n\r\nimport Dropdown, { DropdownOptions } from \"./Dropdown\"\r\nimport { ArrowDropUpSharp, ArrowDropDownSharp } from \"@material-ui/icons\"\r\nimport { Box, PseudoBox, Flex, useTheme } from \"@chakra-ui/core\"\r\n\r\ntype SortFilterProps = {\r\n\tsortByText: string\r\n\tsortOption: string\r\n\tonSortByLklDto: (value: string, label: string) => void\r\n\tonSortByLookUpLklDto: (value: string, label: string) => void\r\n}\r\n\r\n/**\r\n *  SortLKLFilter component for sorting the LKL list based on a filter (ASC/DESC).\r\n */\r\nconst SortLKLFilter: React.FC<SortFilterProps> = ({ sortByText, sortOption, onSortByLookUpLklDto, onSortByLklDto }: SortFilterProps) => {\r\n\tconst theme = useTheme()\r\n\r\n\t// Sort option labels, values and onClick event handlers. Order is identical to the option menu\r\n\tconst options: DropdownOptions[] = [\r\n\t\t{ label: \"Title\", value: \"lklTitle\", onClick: onSortByLookUpLklDto },\r\n\t\t{ label: \"Country\", value: \"countryCd\", onClick: onSortByLookUpLklDto },\r\n\t\t{ label: \"Post\", value: \"postCd\", onClick: onSortByLookUpLklDto },\r\n\t\t{ label: \"Status\", value: \"activeIndicator\", onClick: onSortByLklDto },\r\n\t\t{ label: \"Last Updated\", value: \"lastUpdatedDateTime\", onClick: onSortByLklDto },\r\n\t]\r\n\r\n\t// Get value of the options based on the labelKey\r\n\tconst getOptionsValue = (labelKey: string) => {\r\n\t\treturn options.find(option => option.label === labelKey)?.value ?? \"\"\r\n    }\r\n    \r\n    const arrowOnClick = () => {\r\n        const sortBy = options.find((option : DropdownOptions) => option.label === sortByText)\r\n        sortBy?.onClick ? sortBy.onClick(getOptionsValue(sortByText), \r\n        sortOption[0] === \"-\" ? sortOption.substring(1) : sortOption) : null\r\n    }\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Box position=\"relative\" marginRight=\"20\">\r\n                <Flex align=\"center\">\r\n                    <Dropdown\r\n                        options={options}\r\n                        width=\"150px\"\r\n                        label=\"Sort events\"\r\n                        menuProps={{\r\n                            marginTop: \"4\",\r\n                            right: -20,\r\n                        }}\r\n                        initialSelection={getOptionsValue(\"Last Updated\")}\r\n                        showSelected>\r\n                        <Box as=\"span\" fontSize=\"base\" marginRight={2} cursor=\"pointer\">\r\n                            Sort by\r\n                        </Box>\r\n                    </Dropdown>\r\n                    {sortOption[0] === \"-\" ? \r\n                        <PseudoBox\r\n                            as=\"button\"\r\n                            // @ts-ignore\r\n                            type=\"button\"\r\n                            display=\"inline-flex\"\r\n                            alignItems=\"center\"\r\n                            justifyContent=\"center\"\r\n                            padding={0}\r\n                            border=\"none\"\r\n                            background=\"none\"\r\n                            size=\"iconMd\"\r\n                            cursor=\"pointer\"\r\n                            aria-label={`Sort by ${sortByText} ascending`}\r\n                            onClick={arrowOnClick}\r\n                            _focus={{\r\n                                // @ts-ignore\r\n                                outline: `1px dashed ${theme.colors.accent}`,\r\n                            }}>\r\n                            <Box as={ArrowDropDownSharp} size=\"icon\" transform=\"scale(2)\" color=\"clickable\" />\r\n                        </PseudoBox>\r\n                    :\r\n                        <PseudoBox\r\n                            as=\"button\"\r\n                            // @ts-ignore\r\n                            type=\"button\"\r\n                            display=\"inline-flex\"\r\n                            alignItems=\"center\"\r\n                            justifyContent=\"center\"\r\n                            padding={0}\r\n                            border=\"none\"\r\n                            background=\"none\"\r\n                            size=\"iconMd\"\r\n                            cursor=\"pointer\"\r\n                            aria-label={`Sort by ${sortByText} descending`}\r\n                            onClick={arrowOnClick}\r\n                            _focus={{\r\n                                // @ts-ignore\r\n                                outline: `1px dashed ${theme.colors.accent}`,\r\n                            }}>\r\n                            <Box as={ArrowDropUpSharp} size=\"icon\" transform=\"scale(2)\" color=\"clickable\" />\r\n                        </PseudoBox>\r\n                    }\r\n                </Flex>\r\n\t\t\t</Box>\r\n\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default SortLKLFilter\r\n","import React, { useState } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport moment from \"moment\"\r\n\r\nimport { Flex, Box, Grid, PseudoBox, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, H3, LinkButton, IconAlignment, Link } from \"@c1ds/components\"\r\n\r\nimport LKLCard from \"../LKLCard\"\r\nimport SortLKLFilter from \"../SortLKLFilter\"\r\nimport HideInactiveButton from \"../HideInactiveButton\"\r\nimport Dropdown, { DropdownOptions, DropdownClick } from \"../Dropdown\"\r\n\r\nimport Pagination from \"@material-ui/lab/Pagination\"\r\nimport { AddSharp, ArrowDropUpSharp, ArrowDropDownSharp } from \"@material-ui/icons\"\r\nimport { EventPageState } from \"../../pages/event\"\r\nimport { AddLocationPageState } from \"../../pages/addLocation\"\r\nimport { EventLocationTabMapIcon } from \"../Icons/icons\"\r\n\r\ninterface LastKnownLocationTabProps {\r\n\teventData: EventFormData\r\n\tsetEventData: (eventdata: EventFormData) => void\r\n}\r\n\r\nexport const LastKnownLocationTab: React.FC<LastKnownLocationTabProps> = (p: LastKnownLocationTabProps) => {\r\n\t// Currently using the first event eventLklDtoList for demonstration\r\n\tconst { eventData, setEventData } = p\r\n\r\n\tconst eventLklDtoList: LklDto[] = eventData.eventLklDtoList ?? []\r\n\r\n\teventLklDtoList.sort((a: LklDto, b: LklDto) => {\r\n\t\t// Temporary solution to string date properties\r\n\t\tconst checkString = (field: string | Date | undefined) => {\r\n\t\t\tif (typeof field === \"object\") return field\r\n\t\t\tif (typeof field === \"string\") return moment(field).toDate()\r\n\t\t\treturn new Date()\r\n\t\t}\r\n\t\tconst aLastUpdatedTime = checkString(a.lastUpdatedDateTime)\r\n\t\tconst bLastUpdatedTime = checkString(b.lastUpdatedDateTime)\r\n\t\t// Descending order\r\n\t\tconst direction = -1\r\n\t\tif (aLastUpdatedTime > bLastUpdatedTime) return direction\r\n\t\tif (aLastUpdatedTime < bLastUpdatedTime) return -direction\r\n\t\treturn 0\r\n\t})\r\n\r\n\tconst [page, setPage] = useState(1)\r\n\tconst [lklsPerPage, setLklsPerPage] = useState(10)\r\n\tconst [sortedLKLs, setSortedLKLs] = useState<LklDto[]>(eventLklDtoList)\r\n\tconst [sortOption, setSortOption] = useState(\"-Last Updated\")\r\n\tconst [hideInactive, setHideInactive] = useState(true)\r\n\r\n\tconst sortByText = sortOption[0] === \"-\" ? sortOption.substring(1, sortOption.length) : sortOption\r\n\t//Sort by activeIndicator or lastUpdatedDateTime\r\n\tconst onSortByLklDto: DropdownClick = (value, label) => {\r\n\t\tlet option = value\r\n\t\tif (sortOption === label) {\r\n\t\t\toption = \"-\" + value\r\n\t\t\tlabel = \"-\" + label\r\n\t\t}\r\n\r\n\t\tconst sorted = sortedLKLs.slice()\r\n\t\tsorted.sort((a: LklDto, b: LklDto) => {\r\n\t\t\tlet direction = 1\r\n\t\t\tlet field = option\r\n\t\t\tif (field[0] === \"-\") {\r\n\t\t\t\tdirection = -1\r\n\t\t\t\tfield = field.substring(1)\r\n\t\t\t}\r\n\r\n\t\t\tlet aValue, bValue\r\n\t\t\t// for boolean values such as : activeIndicator\r\n\t\t\tif (typeof a[field] === \"boolean\") {\r\n\t\t\t\t;(aValue = a[field] ? 1 : -1), (bValue = b[field] ? 1 : -1)\r\n\t\t\t} else {\r\n\t\t\t\t;(aValue = a[field]), (bValue = b[field])\r\n\t\t\t}\r\n\r\n\t\t\tif ((aValue as Date | number) > (bValue as Date | number)) return direction\r\n\t\t\tif ((aValue as Date | number) < (bValue as Date | number)) return -direction\r\n\t\t\treturn 0\r\n\t\t})\r\n\r\n\t\tsetSortedLKLs(sorted)\r\n\t\tsetSortOption(label)\r\n\t}\r\n\t//Sort by conutry, post, or title\r\n\tconst onSortByLookUpLklDto: DropdownClick = (value, label) => {\r\n\t\tlet option = value\r\n\t\tif (sortOption === label) {\r\n\t\t\toption = \"-\" + value\r\n\t\t\tlabel = \"-\" + label\r\n\t\t}\r\n\r\n\t\tconst sorted = sortedLKLs.slice()\r\n\t\tsorted.sort((a: LklDto, b: LklDto) => {\r\n\t\t\tlet direction = 1\r\n\t\t\tlet field = option\r\n\t\t\tif (field[0] === \"-\") {\r\n\t\t\t\tdirection = -1\r\n\t\t\t\tfield = field.substring(1)\r\n\t\t\t}\r\n\r\n\t\t\tconst aValue = a.lookupLklDto[field],\r\n\t\t\t\tbValue = b.lookupLklDto[field]\r\n\t\t\tif ((aValue as string) > (bValue as string)) return direction\r\n\t\t\tif ((aValue as string) < (bValue as string)) return -direction\r\n\t\t\treturn 0\r\n\t\t})\r\n\r\n\t\tsetSortedLKLs(sorted)\r\n\t\tsetSortOption(label)\r\n\t}\r\n\r\n\tconst controlledLkls = sortedLKLs.filter((event: LklDto) => {\r\n\t\tif (hideInactive) return event.activeIndicator\r\n\t\telse return true\r\n\t})\r\n\r\n\tconst numOfPages = Math.ceil(controlledLkls.length / lklsPerPage)\r\n\t// Update the page number when inactive events are hidden\r\n\tif (page > numOfPages) setPage(numOfPages)\r\n\r\n\tconst indexOfLastEvent = page * lklsPerPage\r\n\tconst indexOfFirstEvent = indexOfLastEvent - lklsPerPage\r\n\r\n\tconst isMultiplePages = controlledLkls.length > lklsPerPage\r\n\tconst totalPages = isMultiplePages ? Math.ceil(controlledLkls.length / lklsPerPage) : 1\r\n\tconst lklsOnPage = totalPages !== 1 ? controlledLkls.slice(indexOfFirstEvent, indexOfLastEvent) : controlledLkls\r\n\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\tgridTemplateColumns={{\r\n\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t}}>\r\n\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<H3>Last Known Locations</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\tbuttonIcon={{ mdIcon: AddSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst pageState: AddLocationPageState = {\r\n\t\t\t\t\t\t\t\tsavedEvent: eventData,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnavigate(\"/addLocation\", { state: pageState })\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t&nbsp;Add Location\r\n\t\t\t\t\t</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t</Flex>\r\n\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t<P>Manage the last known locations for U.S. citizens involved in this crisis.</P>\r\n\t\t\t</Box>\r\n\t\t\t<Box bottom=\"16px\" zIndex={2} right=\"16px\" position=\"fixed\" display={{ md: \"none\" }}>\r\n\t\t\t\t<ChakraButton\r\n\t\t\t\t\tborderColor=\"transparent\"\r\n\t\t\t\t\tboxShadow=\"0 6px 6px 0 rgba(0, 0, 0, 0.4)\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\theight=\"40px\"\r\n\t\t\t\t\twidth=\"40px\"\r\n\t\t\t\t\trounded=\"round\"\r\n\t\t\t\t\tbg=\"clickable\"\r\n\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t_hover={{\r\n\t\t\t\t\t\tbg: \"secondary\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tconst pageState: AddLocationPageState = {\r\n\t\t\t\t\t\t\tsavedEvent: eventData,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnavigate(\"/addLocation\", { state: pageState })\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<Box as={AddSharp} size=\"iconMobileCreate\" />\r\n\t\t\t\t</ChakraButton>\r\n\t\t\t</Box>\r\n\t\t\t{eventLklDtoList.length != 0 ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\t\t\tgridRow={{ base: \"3\", md: \"auto\" }}\r\n\t\t\t\t\t\t// justify={{ base: \"flex-start\", md: \"flex-end\" }}>\r\n\t\t\t\t\t\tjustifyContent={{ base: \"space-between\" }}>\r\n\t\t\t\t\t\t<HideInactiveButton onToggleHideInactive={() => setHideInactive(!hideInactive)} />\r\n\t\t\t\t\t\t<SortLKLFilter\r\n\t\t\t\t\t\t\tsortByText={sortByText}\r\n\t\t\t\t\t\t\tsortOption={sortOption}\r\n\t\t\t\t\t\t\tonSortByLklDto={onSortByLklDto}\r\n\t\t\t\t\t\t\tonSortByLookUpLklDto={onSortByLookUpLklDto}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Flex>\r\n\r\n\t\t\t\t\t{lklsOnPage.map((lklData: LklDto, index: number) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Box key={`${lklData.eventLklId}-${index}`} gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t\t\t<LKLCard lklData={lklData} setEventData={setEventData} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t<Flex gridColumn=\"1 / -1\" justify=\"space-evenly\">\r\n\t\t\t\t\t\t<P>{controlledLkls.length} results</P>\r\n\t\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\t\tcount={totalPages}\r\n\t\t\t\t\t\t\tonChange={(_, value) => setPage(value)}\r\n\t\t\t\t\t\t\tshowLastButton\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<select>\r\n\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t<option value=\"20\">20</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Flex gridColumn=\"1 / -1\" justifyContent=\"center\">\r\n\t\t\t\t\t\t<EventLocationTabMapIcon width={{ base: \"192px\", md: \"240px\" }} height={{ base: \"168px\", md: \"210px\" }} />\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Flex gridColumn=\"1 / -1\" justifyContent=\"center\" textAlign=\"center\">\r\n\t\t\t\t\t\t<Box width={{ sm: \"252px\", md: \"full\" }}>\r\n\t\t\t\t\t\t\t<P color=\"label\">\r\n\t\t\t\t\t\t\t\tThere are no last known locations.&nbsp;\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tconst pageState: AddLocationPageState = {\r\n\t\t\t\t\t\t\t\t\t\t\tsavedEvent: eventData,\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tnavigate(\"/addLocation\", { state: pageState })\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tAdd location now.\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</P>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, H3, IconAlignment } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface EvacDetailsTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const EvacDetailsTab: React.FC<EvacDetailsTabProps> = (p: EvacDetailsTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Evacuation Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"evacuation\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Authorized</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepAuthDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Ordered</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepOrdDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Summary</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.evacSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"-\")\r\n","import React, { useRef } from \"react\"\r\nimport { Box, useDisclosure, Flex, Divider, VisuallyHidden } from \"@chakra-ui/core\"\r\nimport { Link, Card } from \"@c1ds/components\"\r\nimport { MoreVertSharp } from \"@material-ui/icons\"\r\nimport { useSavedForm } from \"./Utility/formHelpers\"\r\nimport DeleteFileModal from \"./Modals/DeleteFileModal\"\r\nimport Dropdown from \"./Dropdown\"\r\n\r\ninterface AttachmentCardProp {\r\n    attachmentDto: AttachmentDto\r\n    eventData: EventFormData\r\n    setAttachmentDtoList: React.Dispatch<React.SetStateAction<AttachmentDto[]>>\r\n    setEventData: (eventData: EventFormData) => void\r\n    setErrorMsg: React.Dispatch<React.SetStateAction<string>>\r\n}\r\n\r\nconst AttachmentCard: React.FC<AttachmentCardProp> = (p: AttachmentCardProp) => {\r\n    const { attachmentDto, eventData, setAttachmentDtoList, setEventData, setErrorMsg } = p\r\n    const { attachments } = eventData\r\n\r\n    const [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n    const { isOpen: isAttachmentOpen, onOpen: onAttachmentOpen, onClose: onAttachmentClose } = useDisclosure()\r\n\r\n    const attachmentRef = useRef<HTMLInputElement>(null)\r\n\r\n    // 1.5 The system accepts the following file format of the selected file\r\n\t//  Image(.jpg, .jpeg, .gif, .png)\r\n\t//  Spreadsheet(.xls, .xlsx)\r\n\t//  Text File(.doc, docx, .txt, .rtf, .pdf)\r\n\tconst acceptedFileFormats = [\r\n\t\t\"image/jpeg\",\r\n\t\t\"image/gif\",\r\n\t\t\"image/png\",\r\n\t\t\"application/vnd.ms-excel\",\r\n\t\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n\t\t\"application/msword\",\r\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n\t\t\"text/plain\",\r\n\t\t\"application/rtf\",\r\n\t\t\"application/pdf\",\r\n    ]\r\n    \r\n    const cardOptions = [\r\n\t\t{\r\n\t\t\tlabel: \"Replace\",\r\n\t\t\tvalue: \"Replace\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tattachmentRef.current?.click()\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Remove\",\r\n\t\t\tvalue: \"Remove\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\tonAttachmentOpen()\r\n\t\t\t},\r\n\t\t},\r\n\t]\r\n\r\n    const setFileOnCard = (file: File) => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => {\r\n            if (eventData && eventData.attachments) {\r\n                eventData.attachments[eventData.attachments.indexOf(attachmentDto)] = {\r\n                    fileName: file.name,\r\n                    fileSize: file.size,\r\n                    fileMimeType: file.type,\r\n                    fileDataURL: reader.result,\r\n                }\r\n                setAttachmentDtoList([...eventData.attachments])\r\n                setEventData(eventData)\r\n                const savedEventIndex = savedEvents.findIndex((evt: EventFormData) => evt.eventId === eventData.eventId)\r\n                savedEvents.splice(savedEventIndex, 1, eventData)\r\n                updateSavedEvents(savedEvents)\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <Card id=\"attachmentCard\" maxWidth=\"full\">\r\n                <Flex w=\"full\" my={{ base: \"-8px\", sm: \"-12px\" }} flexDir={{ base: \"row\" }}>\r\n                    {/* 1.4 The user can see the following information on the Attachment card\r\n                 Filename name (hyperlinked)\r\n                 [Replace] Function\r\n                 [Remove] function */}\r\n                    {/* 1.5 The user can click on the hyperlinked Attachment filename to download the file and view the content. */}\r\n                    <Flex flexGrow={1} justifyContent=\"flex-start\">\r\n                        <Link href={`${attachmentDto.fileDataURL}`} download={attachmentDto.fileName}>\r\n                            {attachmentDto.fileName}\r\n                        </Link>\r\n                    </Flex>\r\n                    <Flex display={{ base: \"none\", md: \"flex\" }} flexGrow={1} justifyContent=\"flex-end\">\r\n                        <Link\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                setErrorMsg(\"\")\r\n                                attachmentRef.current?.click()\r\n                            }}>\r\n                            Replace\r\n                        </Link>\r\n                        <Box mx={24}>\r\n                            <Divider\r\n                                position=\"absolute\"\r\n                                h={{ base: 16, sm: 16 }}\r\n                                top={{ base: -12, sm: -16 }}\r\n                                orientation=\"vertical\"\r\n                                color=\"silver\"\r\n                            />\r\n                        </Box>\r\n                        <Link\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                onAttachmentOpen()\r\n                            }}>\r\n                            Remove\r\n                        </Link>\r\n\r\n                        <DeleteFileModal\r\n                            type=\"attachment\"\r\n                            isOpen={isAttachmentOpen}\r\n                            onCancel={onAttachmentClose}\r\n                            onConfirm={() => {\r\n                                const selectedIndex = attachments?.indexOf(attachmentDto)\r\n                                eventData.attachments = attachments?.filter((att, index) => index !== selectedIndex)\r\n                                setAttachmentDtoList(eventData.attachments ?? [])\r\n                                setEventData(eventData)\r\n                                const savedEventIndex = savedEvents.findIndex(\r\n                                    (evt: EventFormData) => evt.eventId === eventData.eventId\r\n                                )\r\n                                savedEvents.splice(savedEventIndex, 1, eventData)\r\n                                updateSavedEvents(savedEvents)\r\n                                onAttachmentClose()\r\n                            }}\r\n                        />\r\n                    </Flex>\r\n\r\n                    <Flex display={{ md: \"none\" }} justifyContent=\"flex-end\">\r\n                        <Box position=\"relative\" right={{ base: \"-12px\" }}>\r\n                            <Dropdown\r\n                                options={cardOptions}\r\n                                borderedRows={true}\r\n                                width=\"10rem\"\r\n                                label={`Additional actions for ${attachmentDto.fileName}`}>\r\n                                <Box as={MoreVertSharp} color=\"clickable\" />\r\n                            </Dropdown>\r\n                        </Box>\r\n                    </Flex>\r\n                </Flex>\r\n            </Card>\r\n\r\n            <VisuallyHidden\r\n                as=\"input\"\r\n                /* @ts-ignore */\r\n                type=\"file\"\r\n                ref={attachmentRef}\r\n                name=\"talkingPoints\"\r\n                aria-hidden={true}\r\n                tabIndex={-1}\r\n                accept={acceptedFileFormats.join()}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) => {\r\n                    // @ts-ignore\r\n                    const fileToReplace = e.target.files[0]\r\n                    !acceptedFileFormats.includes(fileToReplace.type)\r\n                        ? setErrorMsg(\"File type must be one of .jpg .jpeg .gif .png .xls .xlsx .doc .docx .txt .rtf .pdf\")\r\n                        : setFileOnCard(fileToReplace)\r\n                }}\r\n            />\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default AttachmentCard","import React, { useState } from \"react\"\r\nimport { Box, Grid, Flex } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, H3, FileUploader } from \"@c1ds/components\"\r\nimport { useSavedForm } from \"../Utility/formHelpers\"\r\nimport AttachmentCard from \"../AttachmentCard\"\r\n\r\ninterface AttachmentTabProps {\r\n\teventData: EventFormData\r\n\tsetEventData: (eventData: EventFormData) => void\r\n}\r\n\r\nexport const AttachmentsTab: React.FC<AttachmentTabProps> = (p: AttachmentTabProps) => {\r\n\tconst { eventData, setEventData } = p\r\n\tconst { attachments } = eventData\r\n\r\n\tconst [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\t// 1.6 The system displays appropriate error message when the selected file is in the unacceptable format.\r\n\t// 1.7 The system displays appropriate error message when the file size exceeding 5MB\r\n\tconst [errorMsg, setErrorMsg] = useState<string>(\"\")\r\n\tconst [progress, setProgress] = useState(0)\r\n\tconst [attachmentDtoList, setAttachmentDtoList] = useState(attachments ?? [])\r\n\r\n\tconst maxSizeBytes = 1024 * 1024 * 5\r\n\tconst acceptedFileExtensions = [\".jpg\", \".jpeg\", \".gif\", \".png\", \".xls\", \".xlsx\", \".doc\", \".docx\", \".txt\", \".rtf\", \".pdf\"]\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/*1.1 The user can access the Attachment screen from Edit Event option.*/}\r\n\t\t\t<Grid\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Attachments</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>Add additional attachments related to this event.</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Attachments</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* 1.2 The user can see the following section on the Attachment screen when there is no attachments.\r\n\t\t\t\t\t\t Upload File Area: [Drop/Browse] */}\r\n\t\t\t\t\t{/* 1.6 The system displays the Upload File Area: [Drop/Browse] always on top of the file list */}\r\n\t\t\t\t\t{/* 1.4 The user can upload file by using the Upload File Area: [Drop/Browse] */}\r\n\t\t\t\t\t{/* 1.4.1 (Drop function) The user can drag a file from users local desktop and drop it into the [Drop/Browse] area to upload the file */}\r\n\t\t\t\t\t{/* 1.4.2 (Browse Function) The user can click [Drop/Browse] area to launch an interface (e.g. File Explorer) which allows the user to identify the proper document to be uploaded. */}\r\n\t\t\t\t\t<FileUploader\r\n\t\t\t\t\t\tid=\"attachments\"\r\n\t\t\t\t\t\tmaxSizeBytes={maxSizeBytes}\r\n\t\t\t\t\t\tallowedFileTypes={acceptedFileExtensions}\r\n\t\t\t\t\t\tprogress={progress}\r\n\t\t\t\t\t\tonDrop={(e, files) => {\r\n\t\t\t\t\t\t\tsetProgress(0)\r\n\t\t\t\t\t\t\tconst fileToSet = files[0]\r\n\t\t\t\t\t\t\tconst reader = new FileReader()\r\n\t\t\t\t\t\t\tlet attachment: AttachmentDto\r\n\t\t\t\t\t\t\treader.readAsDataURL(fileToSet)\r\n\t\t\t\t\t\t\treader.onload = () => {\r\n\t\t\t\t\t\t\t\tattachment = {\r\n\t\t\t\t\t\t\t\t\tfileName: fileToSet.name,\r\n\t\t\t\t\t\t\t\t\tfileSize: fileToSet.size,\r\n\t\t\t\t\t\t\t\t\tfileMimeType: fileToSet.type,\r\n\t\t\t\t\t\t\t\t\tfileDataURL: reader.result,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\teventData.attachments?.push(attachment)\r\n\t\t\t\t\t\t\t\tsetAttachmentDtoList(eventData.attachments ?? [])\r\n\t\t\t\t\t\t\t\tsetEventData(eventData)\r\n\t\t\t\t\t\t\t\tconst savedEventIndex = savedEvents.findIndex(\r\n\t\t\t\t\t\t\t\t\t(evt: EventFormData) => evt.eventId === eventData.eventId\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tsavedEvents.splice(savedEventIndex, 1, eventData)\r\n\t\t\t\t\t\t\t\tupdateSavedEvents(savedEvents)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetProgress(100)\r\n\t\t\t\t\t\t\tsetErrorMsg(\"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\thandleRejectedFiles={(_, files) => {\r\n\t\t\t\t\t\t\tsetErrorMsg(files[0].errors[0])\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{errorMsg !== \"\" && <P color=\"error\">{errorMsg}</P>}\r\n\t\t\t\t</Box>\r\n\r\n\t\t\t\t{/* 1.3 The user can see the following section on the Attachment screen when there are pre-existing attachments\r\n\t\t\t\t Upload File Area: [Drop/Browse]\r\n\t\t\t\t Attachment Card */}\r\n\t\t\t\t{attachmentDtoList.map((value: AttachmentDto, index: number) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Box key={index} gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t\t<AttachmentCard \r\n\t\t\t\t\t\t\t\teventData={eventData}\r\n\t\t\t\t\t\t\t\tsetEventData={setEventData}\r\n\t\t\t\t\t\t\t\tsetErrorMsg={setErrorMsg}\r\n\t\t\t\t\t\t\t\tsetAttachmentDtoList={setAttachmentDtoList}\r\n\t\t\t\t\t\t\t\tattachmentDto={value} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useState } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, BoxProps, Divider, PseudoBox, useTheme, Flex } from \"@chakra-ui/core\"\r\nimport { Select } from \"@c1ds/components\"\r\nimport { EventFormSections, useCTFFormContext } from \"./Forms/Form\"\r\nimport { OverviewTab } from \"./PageSections/EventOverviewTab\"\r\nimport { LastKnownLocationTab } from \"./PageSections/EventLklTab\"\r\nimport { EvacDetailsTab } from \"./PageSections/EventEvacDetailsTab\"\r\nimport { AttachmentsTab } from \"./PageSections/EventAttachmentsTab\"\r\nimport Layout from \"./Layout\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst eventTabs: { label: string; value: EventFormSections }[] = [\r\n\t{ label: \"Event Overview\", value: \"overview\" },\r\n\t{ label: \"Last Known Locations\", value: \"locations\" },\r\n\t{ label: \"Evacuation\", value: \"evacuation\" },\r\n\t{ label: \"Attachments\", value: \"attachments\" },\r\n]\r\n\r\nconst ViewEvent: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { formSection } = useCTFFormContext()\r\n\r\n\tconst [currentEventData, setEventData] = useState(savedEvent)\r\n\r\n\tconst eventData: EventFormData = savedEvent ?? { eventId: \"\", eventTitle: \"\", managementTypeCode: \"\", eventTypeId: \"\" }\r\n\r\n\tconst [selectedTab, setSelectedTab] = useState<EventFormSections | undefined>(formSection)\r\n\tconst inOverview = selectedTab === \"overview\",\r\n\t\tinLkl = selectedTab === \"locations\",\r\n\t\tinEvacuation = selectedTab === \"evacuation\",\r\n\t\tinAttachments = selectedTab === \"attachments\"\r\n\r\n\tconst handleTabClick = (e: React.MouseEvent<HTMLButtonElement>, tab: EventFormSections) => {\r\n\t\tsetSelectedTab(tab)\r\n\t\te.currentTarget.blur()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Layout pageTitle=\"View Event\" pageHeading={eventData.eventTitle}>\r\n\t\t\t{/* TODO: Remove temp home nav button once Header/Footer integrated */}\r\n\t\t\t<Flex display=\"inline-flex\" align=\"center\" position=\"absolute\" top=\"42px\" right={{ base: \"16px\", md: \"24px\" }}>\r\n\t\t\t\t<PseudoBox\r\n\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tid=\"goToHome\"\r\n\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\tdisplay=\"inline-flex\"\r\n\t\t\t\t\talignItems=\"flex-end\"\r\n\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\tborder=\"none\"\r\n\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\tbackground=\"none\"\r\n\t\t\t\t\tp={0}\r\n\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\t_focus={{\r\n\t\t\t\t\t\tcolor: \"text\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\toutlineWidth: \"2px\",\r\n\t\t\t\t\t\toutlineStyle: \"solid\",\r\n\t\t\t\t\t\toutlineColor: \"accent\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t_hover={{\r\n\t\t\t\t\t\tcolor: \"text\",\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\toutlineWidth: \"2px\",\r\n\t\t\t\t\t\toutlineStyle: \"solid\",\r\n\t\t\t\t\t\toutlineColor: \"accent\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t_disabled={{\r\n\t\t\t\t\t\tcolor: \"inputBorder\",\r\n\t\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tnavigate(\"/\")\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<Box flex=\"1 1 0\" lineHeight=\"linkButton\">\r\n\t\t\t\t\t\tHOME\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</PseudoBox>\r\n\t\t\t</Flex>\r\n\r\n\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t<Box marginTop=\"12\" display={{ md: \"none\" }}>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tid=\"eventTab\"\r\n\t\t\t\t\t\tname=\"eventTab\"\r\n\t\t\t\t\t\taria-label=\"Event Tab\"\r\n\t\t\t\t\t\toptions={eventTabs}\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\tsetSelectedTab(changes.selectedItem?.value as EventFormSections)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvalue={selectedTab}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box marginTop=\"12\" display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inOverview}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"overview\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tEvent Overview\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inLkl}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"locations\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tLast Known Locations\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inEvacuation}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"evacuation\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tEvacuation\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\tisActive={inAttachments}\r\n\t\t\t\t\t\tonClick={e => handleTabClick(e, \"attachments\")}\r\n\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\tAttachments\r\n\t\t\t\t\t</TabButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\" marginTop={{ base: \"16\", md: \"-3px\" }} marginBottom=\"16\">\r\n\t\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t{inLkl ? (\r\n\t\t\t\t\t<LastKnownLocationTab eventData={currentEventData} setEventData={setEventData} />\r\n\t\t\t\t) : inEvacuation ? (\r\n\t\t\t\t\t<EvacDetailsTab eventData={eventData} />\r\n\t\t\t\t) : inAttachments ? (\r\n\t\t\t\t\t<AttachmentsTab eventData={eventData} setEventData={setEventData} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<OverviewTab eventData={eventData} />\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\ntype TabButtonProps = {\r\n\tonClick?: React.MouseEventHandler<HTMLButtonElement>\r\n\t/**\r\n\t * Indicates if tab is currently active\r\n\t */\r\n\tisActive?: boolean\r\n} & Omit<BoxProps, \"onClick\">\r\n\r\nconst TabButton: React.FC<TabButtonProps> = p => {\r\n\tconst { onClick, isActive, children, ...boxProps } = p\r\n\tconst theme = useTheme()\r\n\treturn (\r\n\t\t<PseudoBox\r\n\t\t\t{...boxProps}\r\n\t\t\tas=\"button\"\r\n\t\t\tdisplay=\"inline-flex\"\r\n\t\t\talignItems=\"flex-end\"\r\n\t\t\ttextAlign=\"center\"\r\n\t\t\tborder=\"none\"\r\n\t\t\tborderRadius={0}\r\n\t\t\tbackground=\"none\"\r\n\t\t\tp={0}\r\n\t\t\tfontFamily=\"body\"\r\n\t\t\tfontSize=\"base\"\r\n\t\t\tfontWeight=\"h4\"\r\n\t\t\tcolor=\"primary\"\r\n\t\t\tborderBottom=\"3\"\r\n\t\t\tborderColor={isActive ? \"accent\" : \"transparent\"}\r\n\t\t\tcursor=\"pointer\"\r\n\t\t\t_focus={{\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\toutline: `2px solid ${theme.colors.primary}`,\r\n\t\t\t}}\r\n\t\t\t_hover={{\r\n\t\t\t\toutline: \"none\",\r\n\t\t\t\tborderColor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t\tcolor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t}}\r\n\t\t\tonClick={onClick}>\r\n\t\t\t<Box flex=\"1 1 0\" lineHeight=\"linkButton\">\r\n\t\t\t\t{children}\r\n\t\t\t</Box>\r\n\t\t</PseudoBox>\r\n\t)\r\n}\r\n\r\nexport default ViewEvent\r\n","import React from \"react\"\r\nimport moment from \"moment\"\r\nimport { getSavedForm } from \"../components/Utility/formHelpers\"\r\nimport { CTFFormProvider, CTFFormProviderProps } from \"../components/Forms/Form\"\r\nimport EventForm from \"../components/Forms/EventForm\"\r\nimport ViewEvent from \"../components/ViewEvent\"\r\n\r\nexport interface EventPageState {\r\n\teventId?: string\r\n\tisEdit?: boolean\r\n\tformSection?: CTFFormProviderProps[\"formSection\"]\r\n}\r\n\r\ntype EventPageProps = {\r\n\tlocation: {\r\n\t\tstate: EventPageState\r\n\t}\r\n}\r\n\r\nconst DEFAULT_SECTION: CTFFormProviderProps[\"formSection\"] = \"overview\"\r\n\r\nconst EventPage: React.FC<EventPageProps> = (p: EventPageProps) => {\r\n\tlet savedEvent: EventFormData | undefined\r\n\tif (p.location?.state?.eventId) {\r\n\t\tconst savedEvents = getSavedForm<Array<EventFormData>>(\"ctfForms\", \"events\")\r\n\t\tsavedEvent = savedEvents && savedEvents.find((event: EventFormData) => event.eventId === p.location?.state?.eventId)\r\n\t\tif (savedEvent) {\r\n\t\t\tif (savedEvent.evacDepAuthDate) savedEvent.evacDepAuthDate = moment(savedEvent.evacDepAuthDate).toDate()\r\n\t\t\tif (savedEvent.evacDepOrdDate) savedEvent.evacDepOrdDate = moment(savedEvent.evacDepOrdDate).toDate()\r\n\t\t\tif (savedEvent.eventStartDate) savedEvent.eventStartDate = moment(savedEvent.eventStartDate).toDate()\r\n\t\t\tif (savedEvent.eventEndDate) savedEvent.eventEndDate = moment(savedEvent.eventEndDate).toDate()\r\n\t\t\tif (savedEvent.lastUpdatedDateTime) savedEvent.lastUpdatedDateTime = moment(savedEvent.lastUpdatedDateTime).toDate()\r\n\t\t}\r\n\t}\r\n\r\n\tconst formMode: CTFFormProviderProps[\"formMode\"] =\r\n\t\ttypeof savedEvent === \"undefined\" ? \"create\" : !p.location.state.isEdit ? \"view\" : \"edit\"\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<CTFFormProvider formMode={formMode} formSection={p.location.state?.formSection ?? DEFAULT_SECTION}>\r\n\t\t\t\t{formMode === \"view\" ? <ViewEvent savedEvent={savedEvent} /> : <EventForm savedEvent={savedEvent} />}\r\n\t\t\t</CTFFormProvider>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventPage\r\n"],"sourceRoot":""}