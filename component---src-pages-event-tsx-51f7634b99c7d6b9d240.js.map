{"version":3,"sources":["webpack:///./src/components/Utility/formHelpers.tsx","webpack:///./src/components/Modals/DataLossModal.tsx","webpack:///./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","webpack:///./src/components/ProgressIndicator.tsx","webpack:///./src/components/Modals/SaveModal.tsx","webpack:///./src/components/FormSections/EvacDetails.tsx","webpack:///./src/components/FormSections/EventDetails.tsx","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./src/components/Forms/EventForm.tsx","webpack:///./src/pages/event.tsx"],"names":["getSavedForm","rootKey","formName","defaultValue","formData","window","storedData","sessionStorage","getItem","savedForm","JSON","parse","useSavedForm","useState","setFormData","useEffect","setItem","stringify","clearFormData","removeItem","addEventListener","removeEventListener","formVals","prevFormData","DataLossModal","p","isOpen","onClose","isCentered","size","Flex","align","Box","marginRight","onClick","onLeave","easeOut","t","value","min","max","Math","props","ref","classes","className","_props$color","color","_props$disableShrink","disableShrink","_props$size","style","_props$thickness","thickness","_props$value","_props$variant","variant","other","circleStyle","rootStyle","rootProps","circumference","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","root","capitalize","indeterminate","width","height","role","svg","viewBox","SIZE","circle","circleDisableShrink","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","CircularProgress","SaveModal","pl","EvacDetails","useFormContext","formState","errors","setValue","getValues","evacStatusCodeRef","useRef","evacDepAuthDateRef","orderedDateRef","evacSummaryRef","watchEvacStatus","useWatch","useCTFFormContext","isCreate","isView","dirtyFields","Form","title","gridColumn","base","md","lg","labelText","labelId","onFocus","current","focus","render","onChange","onBlur","id","aria-labelledby","options","evacStatuses","placeholder","disabled","validationState","evacStatusCode","ValidationState","ERROR","undefined","errorMessage","message","changes","newVal","selectedItem","evacDepOrdDate","evacDepAuthDate","Date","Grid","gridGap","gridTemplateColumns","as","inputRef","maxDate","error","rules","pattern","maxLength","evacSummary","e","target","replaceMSWordChars","replace","EventDetails","useDisclosure","isDeactivateOpen","onDeactivateOpen","onOpen","onDeactivateClose","register","eventStartDateRef","eventEndDateRef","managementTypeCodeRef","eventTypeIdRef","eventSummaryRef","watchActiveIndicator","watchEventStartDate","showDivider","required","eventTitle","eventStartDate","validate","afterStartDate","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","compareAsc","minDate","eventEndDate","checked","mgmtTypes","managementTypeCode","eventTypes","eventTypeId","eventSummary","DeactivateModal","onCancel","onConfirm","saveBanner","status","Status","success","console","log","EventForm","savedEvent","isEdit","isDataLossOpen","onDataLossOpen","onDataLossClose","isSaveOpen","onSaveOpen","onSaveClose","showSaveBanner","useBanner","updateSavedForm","defaultValues","eventId","moment","format","floor","random","activeIndicator","lastUpdatedDateTime","formMethods","useForm","mode","handleSubmit","onSubmit","useCallback","data","skipNavigate","currForm","savedIdx","findIndex","evt","splice","push","setTimeout","navigate","state","Layout","pageTitle","pageHeading","pageDescription","noValidate","type","aria-label","justify","marginTop","preventDefault","EventPage","location","savedEvents","find","event","initFormMode","formMode"],"mappings":"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","file":"component---src-pages-event-tsx-51f7634b99c7d6b9d240.js","sourcesContent":["import { useEffect, useState } from \"react\"\r\n\r\n/**\r\n * Retrieve saved form data,\r\n * optionally initialized to default values if not found\r\n *\r\n * @param rootKey Key for top-level object containing all forms' data\r\n * @param formName Name page-level specific form data to retrieve.\r\n *  Returns top-level form object with all pages' data if not specified\r\n * @param defaultValue Default value to be returned if no form data is found\r\n *\r\n * @returns Saved form data or default value if none is found\r\n */\r\nexport const getSavedForm = <T extends Record<string, unknown> | Array<Record<string, unknown>>>(\r\n\trootKey: string,\r\n\tformName?: string,\r\n\tdefaultValue?: T\r\n): T => {\r\n\tlet formData\r\n\tif (typeof window !== \"undefined\") {\r\n\t\tconst storedData = window.sessionStorage.getItem(rootKey)\r\n\t\tconst savedForm = storedData && JSON.parse(storedData)\r\n\t\tformData = savedForm && formName ? savedForm[formName] : savedForm\r\n\t}\r\n\r\n\treturn formData || defaultValue\r\n}\r\n\r\n/**\r\n * Clear all stored form data\r\n *\r\n * @param {string} rootKey Key for top-level object containing all forms' data\r\n */\r\nexport const clearAllFormData = (rootKey: string): void => {\r\n\ttypeof window !== \"undefined\" && window.sessionStorage.removeItem(rootKey)\r\n}\r\n\r\ntype useSavedFormOverload = {\r\n\t<T extends Record<string, unknown>>(rootKey: string): [T, (formData: T) => void]\r\n\t<T extends Array<Record<string, unknown>>>(rootKey: string, formName: string): [T, (formData: T) => void]\r\n}\r\n\r\n/**\r\n * Custom hook to manage saved form data.\r\n *\r\n * @param {string} rootKey Key for top-level object containing all forms' data\r\n * @param {string} formName Name page-level specific form data to retrieve (ex. Child Information (1 of 2) form data).\r\n *  Returns top-level form object with all pages' data if not specified\r\n *\r\n * @returns Current stateful form data and a function to update it\r\n */\r\nexport const useSavedForm: useSavedFormOverload = <T extends Record<string, unknown> | Array<Record<string, unknown>>>(\r\n\trootKey: string,\r\n\tformName?: string\r\n): [T, (formData: T) => void] => {\r\n\tconst [formData, setFormData] = useState<T>(() => {\r\n\t\tlet formData\r\n\t\tif (typeof window !== \"undefined\") {\r\n\t\t\tconst storedData = window.sessionStorage.getItem(rootKey)\r\n\t\t\tformData = storedData && JSON.parse(storedData)\r\n\t\t}\r\n\t\treturn formData ?? {}\r\n\t})\r\n\r\n\t// Update storage when from data changes\r\n\tuseEffect(() => {\r\n\t\twindow.sessionStorage.setItem(rootKey, JSON.stringify(formData))\r\n\t}, [formData, rootKey])\r\n\r\n\t// Clear form data from session storage on unload\r\n\tuseEffect(() => {\r\n\t\tconst clearFormData = () => window.sessionStorage.removeItem(rootKey)\r\n\t\twindow.addEventListener(\"beforeunload\", clearFormData)\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"beforeunload\", clearFormData)\r\n\t\t}\r\n\t}, [rootKey])\r\n\r\n\t// Update the form data with new sub-form values\r\n\tconst saveFormData = (formVals: T) => {\r\n\t\tformName ? setFormData(prevFormData => ({ ...prevFormData, [formName]: formVals })) : setFormData(formVals)\r\n\t}\r\n\r\n\treturn [formName ? (formData as Record<string, T>)[formName] : formData, saveFormData]\r\n}\r\n","import React from \"react\"\r\nimport { H4, P, Button, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\n\r\ninterface DataLossModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonLeave: (e: React.MouseEvent<HTMLButtonElement>) => void\r\n}\r\n\r\nexport const DataLossModal: React.FC<DataLossModalProps> = (p: DataLossModalProps) => (\r\n\t<Modal isOpen={p.isOpen} onClose={p.onClose} isCentered={true} size=\"sm\">\r\n\t\t<ModalHeader>\r\n\t\t\t<H4>Leave Page?</H4>\r\n\t\t</ModalHeader>\r\n\t\t<ModalCloseButton />\r\n\t\t<ModalBody>\r\n\t\t\t<P>Do you want to leave this page and lose unsaved data?</P>\r\n\t\t</ModalBody>\r\n\r\n\t\t<ModalFooter>\r\n\t\t\t<Flex align=\"center\">\r\n\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t<LinkButton onClick={p.onLeave}>Leave</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Button size=\"sm\" onClick={p.onClose}>\r\n\t\t\t\t\tStay\r\n\t\t\t\t</Button>\r\n\t\t\t</Flex>\r\n\t\t</ModalFooter>\r\n\t</Modal>\r\n)\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\n\nfunction getRelativeValue(value, min, max) {\n  return (Math.min(Math.max(min, value), max) - min) / (max - min);\n}\n\nfunction easeOut(t) {\n  t = getRelativeValue(t, 0, 1); // https://gist.github.com/gre/1650294\n\n  t = (t -= 1) * t * t + 1;\n  return t;\n}\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    \"static\": {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n\n    if (variant === 'static') {\n      circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n      rootStyle.transform = 'rotate(-90deg)';\n    } else {\n      circleStyle.strokeDashoffset = \"\".concat((easeIn((100 - value) / 100) * circumference).toFixed(3), \"px\");\n      rootStyle.transform = \"rotate(\".concat((easeOut(value / 70) * 270).toFixed(3), \"deg)\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'indeterminate': classes.indeterminate,\n      'static': classes[\"static\"]\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import React from \"react\"\r\nimport { Box } from \"@chakra-ui/core\"\r\nimport { CircularProgress as MuiCircularProgress } from \"@material-ui/core\"\r\n\r\nexport const CircularProgress: React.FC = () => (\r\n\t<Box color=\"clickable\">\r\n\t\t<MuiCircularProgress color=\"inherit\" size={48} thickness={7.5} />\r\n\t</Box>\r\n)\r\n","import React from \"react\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\nimport { H4, P, Modal, ModalBody, ModalHeader } from \"@c1ds/components\"\r\nimport { CircularProgress } from \"../ProgressIndicator\"\r\n\r\ninterface SaveModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n}\r\n\r\nexport const SaveModal: React.FC<SaveModalProps> = (p: SaveModalProps) => (\r\n\t<Modal isOpen={p.isOpen} onClose={p.onClose} isCentered={true} size=\"sm\">\r\n\t\t<ModalHeader>\r\n\t\t\t<H4>Please Wait...</H4>\r\n\t\t</ModalHeader>\r\n\t\t<ModalBody>\r\n\t\t\t<Flex align=\"center\">\r\n\t\t\t\t<Box color=\"clickable\">\r\n\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box pl=\"24\">\r\n\t\t\t\t\t<P>Saving your information</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Flex>\r\n\t\t</ModalBody>\r\n\t</Modal>\r\n)\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid } from \"@chakra-ui/core\"\r\nimport { DatePicker, Select, FormInput, ValidationState, Textarea } from \"@c1ds/components\"\r\n\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\nimport { EventFormData } from \"../Forms/EventForm\"\r\n\r\nconst EvacDetails: React.FC = () => {\r\n\tconst { formState, errors, setValue, getValues } = useFormContext<EventFormData>()\r\n\r\n\tconst evacStatusCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst evacDepAuthDateRef = useRef<HTMLInputElement>(null)\r\n\tconst orderedDateRef = useRef<HTMLInputElement>(null)\r\n\tconst evacSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchEvacStatus = useWatch<string>({ name: \"evacStatusCode\" })\r\n\r\n\tconst { isCreate, isView } = useCTFFormContext()\r\n\r\n\tconst { dirtyFields } = formState\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Evacuation Details\">\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Status\" labelId=\"evacStatusCodeLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\tonFocus={() => evacStatusCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={evacStatusCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacStatusCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={evacStatuses}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacStatusCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacStatusCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tconst newVal = changes.selectedItem?.value\r\n\t\t\t\t\t\t\t\t\tonChange(newVal)\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.16.6 The system defaults the Authorized or Ordered Date to Today’s date\r\n\t\t\t\t\t\t\t\t\t * when Evacuation Status is selected.\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (newVal === \"ADEP\" && !getValues(\"evacDepAuthDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepAuthDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"ODEP\" && !getValues(\"evacDepOrdDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepOrdDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"NONE\") {\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 9\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(2,max-content)\" }}>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Authorized\" labelId=\"evacDepAuthDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tname=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tinputRef={evacDepAuthDateRef}\r\n\t\t\t\t\t\tonFocus={() => evacDepAuthDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to “blank”\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.4 The system enables Date Departure Authorized\r\n\t\t\t\t\t\t * when Evacuation Status to “Authorized”\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ADEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepAuthDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepAuthDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Ordered\" labelId=\"orderedDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tname=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tinputRef={orderedDateRef}\r\n\t\t\t\t\t\tonFocus={() => orderedDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to “blank”\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.5 The system enables Date Departure Ordered\r\n\t\t\t\t\t\t * when Evacuation Status to “Ordered”\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ODEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepOrdDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepOrdDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Summary\" labelId=\"evacSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Evacuation Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Evacuation Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => evacSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={evacSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"evacSummary\"\r\n\t\t\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EvacDetails\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Switch, DatePicker, Select, FormInput, Text, ValidationState, Textarea } from \"@c1ds/components\"\r\nimport { compareAsc } from \"date-fns\"\r\n\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\nimport { EventFormData } from \"../Forms/EventForm\"\r\nimport DeactivateModal from \"../Modals/DeactivateModal\"\r\n\r\nconst EventDetails: React.FC = () => {\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\r\n\tconst { register, errors, setValue } = useFormContext<EventFormData>()\r\n\r\n\tconst eventStartDateRef = useRef<HTMLInputElement>(null)\r\n\tconst eventEndDateRef = useRef<HTMLInputElement>(null)\r\n\tconst managementTypeCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventTypeIdRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchActiveIndicator = useWatch<boolean>({ name: \"activeIndicator\" })\r\n\tconst watchEventStartDate: Date | undefined = useWatch({ name: \"eventStartDate\" }) as Date\r\n\r\n\tconst { isView, isCreate } = useCTFFormContext()\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Event Details\" showDivider={true}>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Title\" labelId=\"eventTitleLabel\" required>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tref={register({\r\n\t\t\t\t\t\t\trequired: \"Please enter an Event Title\",\r\n\t\t\t\t\t\t\tmaxLength: { value: 25, message: \"Event Title cannot exceed 25 characters\" },\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tname=\"eventTitle\"\r\n\t\t\t\t\t\tid=\"eventTitle\"\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tmaxLength={25}\r\n\t\t\t\t\t\tvalidationState={errors?.eventTitle ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\terrorMessage={errors?.eventTitle?.message}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * 1.5 The system disallows a space or non-alphanumeric character (in plain text)\r\n\t\t\t\t\t\t\t * at beginning of the title field\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\te.target.value = e.target.value.replace(/^[^A-Za-z0-9]+/, \"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(3,max-content)\" }}>\r\n\t\t\t\t<FormInput labelText=\"Start Date\" labelId=\"eventStartDateLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventStartDate\"\r\n\t\t\t\t\t\tname=\"eventStartDate\"\r\n\t\t\t\t\t\trules={{ required: \"Please enter a Start Date\" }}\r\n\t\t\t\t\t\tinputRef={eventStartDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventStartDateRef.current?.focus()}\r\n\t\t\t\t\t\t/* 1.6.1 The user can edit the Start Date to any date before today's date\r\n\t\t\t\t\t\t * with valid date range: 01/01/1900 to 01/01/9999\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventStartDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventStartDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"End Date\" labelId=\"eventEndDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventEndDate\"\r\n\t\t\t\t\t\tname=\"eventEndDate\"\r\n\t\t\t\t\t\t/* The system displays appropriate error message\r\n\t\t\t\t\t\t * \"End Date must be equal or later than Start Date\"\r\n\t\t\t\t\t\t * when user editing End Date of a reactivate event.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tvalidate: {\r\n\t\t\t\t\t\t\t\tafterStartDate: value =>\r\n\t\t\t\t\t\t\t\t\twatchActiveIndicator ||\r\n\t\t\t\t\t\t\t\t\tcompareAsc(value, watchEventStartDate) > -1 ||\r\n\t\t\t\t\t\t\t\t\t\"End Date must be equal to or later than Start Date\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinputRef={eventEndDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventEndDateRef.current?.focus()}\r\n\t\t\t\t\t\tminDate={watchEventStartDate ? watchEventStartDate : undefined}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\tdisabled={!isCreate && (isView || watchActiveIndicator)}\r\n\t\t\t\t\t\terror={typeof errors?.eventEndDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventEndDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Active\" labelId=\"activeIndicatorLabel\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tref={register()}\r\n\t\t\t\t\t\tname=\"activeIndicator\"\r\n\t\t\t\t\t\tid=\"activeIndicator\"\r\n\t\t\t\t\t\tvalue=\"Active\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\tsetValue(\"eventEndDate\", undefined)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t * Note: Prevent default will not work as expected for checkboxes in React.\r\n\t\t\t\t\t\t\t\t * Instead, revert activeIndicator value back to true\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\tsetValue(\"activeIndicator\", true)\r\n\t\t\t\t\t\t\t\tonDeactivateOpen()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t<FormInput labelText=\"Management Type\" labelId=\"managementTypeCodeLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select a Management Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => managementTypeCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={managementTypeCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"managementTypeCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={mgmtTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.managementTypeCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.managementTypeCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Type\" labelId=\"eventTypeIdLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select an Event Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventTypeIdRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={eventTypeIdRef}\r\n\t\t\t\t\t\t\t\tid=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventTypeIdLabel\"\r\n\t\t\t\t\t\t\t\toptions={eventTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventTypeId ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventTypeId?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Summary\" labelId=\"eventSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Event Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Event Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={eventSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"eventSummary\"\r\n\t\t\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<DeactivateModal\r\n\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 1.11.2 The user clicks on [YES] on the confirmation message\r\n\t\t\t\t\t * to deactivate the event or clicks on [Cancel] to exit the deactivation.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t// 1.11.3 The system update the Event Active Indicator to No and Event End Date to today's date.\r\n\t\t\t\t\tsetValue(\"activeIndicator\", false)\r\n\t\t\t\t\tsetValue(\"eventEndDate\", new Date())\r\n\r\n\t\t\t\t\tonDeactivateClose()\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EventDetails\r\n","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","import React, { useCallback } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Button, Banner, useBanner, Status, LinkButton } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { DataLossModal } from \"../Modals/DataLossModal\"\r\nimport { SaveModal } from \"../Modals/SaveModal\"\r\nimport { useForm, FormProvider } from \"react-hook-form\"\r\nimport { getSavedForm, useSavedForm } from \"../../components/Utility/formHelpers\"\r\nimport { Form, useCTFFormContext } from \"./Form\"\r\nimport Layout from \"../../components/Layout\"\r\nimport EvacDetails from \"../FormSections/EvacDetails\"\r\nimport EventDetails from \"../FormSections/EventDetails\"\r\n\r\nexport interface EventFormData extends Record<string, boolean | Date | string | number | undefined> {\r\n\teventId: string\r\n\teventTitle: string\r\n\teventStartDate?: Date\r\n\teventEndDate?: Date\r\n\tactiveIndicator?: boolean\r\n\tmanagementTypeCode: string\r\n\teventTypeId: string\r\n\teventSummary?: string\r\n\tevacStatusCode?: string\r\n\tevacDepAuthDate?: Date\r\n\tevacDepOrdDate?: Date\r\n\tevacSummary?: string\r\n\tlastUpdatedDateTime?: Date\r\n}\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst EventForm: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { isView, isEdit } = useCTFFormContext()\r\n\r\n\tconst { isOpen: isDataLossOpen, onOpen: onDataLossOpen, onClose: onDataLossClose } = useDisclosure()\r\n\r\n\tconst { isOpen: isSaveOpen, onOpen: onSaveOpen, onClose: onSaveClose } = useDisclosure()\r\n\tconst showSaveBanner = useBanner(saveBanner, 2)\r\n\tconst [, updateSavedForm] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst defaultValues = {\r\n\t\t// Mimic key generation for Crisis\r\n\t\teventId: `OCS${moment(new Date()).format(\"YYYYDDD\")}${Math.floor(Math.random() * Math.floor(1000000))}`,\r\n\t\teventTitle: \"\",\r\n\t\teventStartDate: new Date(),\r\n\t\tactiveIndicator: true,\r\n\t\tmanagementTypeCode: \"mg\",\r\n\t\t// 1.13 The system defaults the Event Type to General.\r\n\t\teventTypeId: \"General\",\r\n\t\teventSummary: \"\",\r\n\t\t// 1.16.1 The system defaults the Evacuation Status to “blank”\r\n\t\tevacStatusCode: \"NONE\",\r\n\t\tevacSummary: \"\",\r\n\t\tlastUpdatedDateTime: new Date(),\r\n\t}\r\n\r\n\tconst formMethods = useForm<EventFormData>({\r\n\t\tmode: \"onBlur\",\r\n\t\tdefaultValues: savedEvent ?? defaultValues,\r\n\t})\r\n\tconst { register, handleSubmit, getValues } = formMethods\r\n\r\n\tconst onSubmit = useCallback(\r\n\t\t(data, skipNavigate = false) => {\r\n\t\t\tdata.lastUpdatedDateTime = new Date()\r\n\t\t\tconst currForm = getSavedForm<EventFormData[]>(\"ctfForms\", \"events\", [])\r\n\t\t\tif (isEdit) {\r\n\t\t\t\tconst savedIdx = currForm.findIndex((evt: EventFormData) => evt.eventId === data.eventId)\r\n\t\t\t\tcurrForm.splice(savedIdx, 1, data)\r\n\t\t\t} else {\r\n\t\t\t\tcurrForm.push(data)\r\n\t\t\t}\r\n\t\t\tupdateSavedForm(currForm)\r\n\t\t\tonSaveOpen()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (skipNavigate) {\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: Once microservice is connected, use returned eventId/event data\r\n\t\t\t\t\tnavigate(\"/event\", { state: { eventId: getValues(\"eventId\") } })\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t}\r\n\t\t\t\tshowSaveBanner()\r\n\t\t\t}, 2000)\r\n\t\t},\r\n\t\t[updateSavedForm, isEdit, onSaveOpen, onSaveClose, showSaveBanner, getValues]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Layout\r\n\t\t\tpageTitle=\"Event Details\"\r\n\t\t\tpageHeading={\r\n\t\t\t\tisView ? `View ${savedEvent?.eventTitle}` : isEdit ? `Edit ${savedEvent?.eventTitle}` : \"Create New Event\"\r\n\t\t\t}\r\n\t\t\tpageDescription=\"Please enter as much information as you have related to this crisis.\">\r\n\t\t\t<FormProvider {...formMethods}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"eventForm\"\r\n\t\t\t\t\tid=\"eventForm\"\r\n\t\t\t\t\tonSubmit={handleSubmit(data => {\r\n\t\t\t\t\t\tonSubmit(data, false)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tnoValidate={true}>\r\n\t\t\t\t\t<input name=\"eventId\" type=\"hidden\" ref={register} />\r\n\r\n\t\t\t\t\t<EventDetails />\r\n\r\n\t\t\t\t\t<EvacDetails />\r\n\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tas=\"nav\"\r\n\t\t\t\t\t\taria-label=\"page\"\r\n\t\t\t\t\t\tid=\"pageNav\"\r\n\t\t\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\tjustify={{ base: \"flex-end\", md: \"flex-start\" }}\r\n\t\t\t\t\t\tmarginTop={{ md: \"72\" }}>\r\n\t\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t\t<LinkButton type=\"button\" onClick={isView ? () => navigate(\"/\") : onDataLossOpen}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype={isView ? \"button\" : \"submit\"}\r\n\t\t\t\t\t\t\tsize={isEdit ? \"sm\" : \"md\"}\r\n\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\tisView\r\n\t\t\t\t\t\t\t\t\t? (e: React.MouseEvent) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: { eventId: getValues(\"eventId\"), isEdit: true } })\r\n\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{isView ? \"Edit\" : isEdit ? \"Save\" : \"Create Event\"}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Flex>\r\n\r\n\t\t\t\t\t<DataLossModal isOpen={isDataLossOpen} onClose={onDataLossClose} onLeave={() => navigate(\"/\")} />\r\n\t\t\t\t\t<SaveModal isOpen={isSaveOpen} onClose={onSaveClose} />\r\n\t\t\t\t</Form>\r\n\t\t\t</FormProvider>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nconst saveBanner = (\r\n\t<Banner status={Status.success} title=\"Save successful!\" onClose={() => console.log(\"Banner closed\")}>\r\n\t\t{}\r\n\t</Banner>\r\n)\r\n\r\nexport default EventForm\r\n","import React from \"react\"\r\nimport moment from \"moment\"\r\nimport { getSavedForm } from \"../components/Utility/formHelpers\"\r\nimport { CTFFormProvider } from \"../components/Forms/Form\"\r\nimport EventForm, { EventFormData } from \"../components/Forms/EventForm\"\r\n\r\ntype EventPageProps = {\r\n\teventId: string\r\n\tlocation: {\r\n\t\tstate: {\r\n\t\t\teventId: string\r\n\t\t\tisEdit: boolean\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst EventPage: React.FC<EventPageProps> = (p: EventPageProps) => {\r\n\tlet savedEvent: EventFormData | undefined\r\n\tif (p.location?.state?.eventId) {\r\n\t\tconst savedEvents = getSavedForm<Array<EventFormData>>(\"ctfForms\", \"events\")\r\n\t\tsavedEvent = savedEvents && savedEvents.find((event: EventFormData) => event.eventId === p.location?.state?.eventId)\r\n\t\tif (savedEvent) {\r\n\t\t\tif (savedEvent.evacDepAuthDate) savedEvent.evacDepAuthDate = moment(savedEvent.evacDepAuthDate).toDate()\r\n\t\t\tif (savedEvent.evacDepOrdDate) savedEvent.evacDepOrdDate = moment(savedEvent.evacDepOrdDate).toDate()\r\n\t\t\tif (savedEvent.eventStartDate) savedEvent.eventStartDate = moment(savedEvent.eventStartDate).toDate()\r\n\t\t\tif (savedEvent.eventEndDate) savedEvent.eventEndDate = moment(savedEvent.eventEndDate).toDate()\r\n\t\t\tif (savedEvent.lastUpdatedDateTime) savedEvent.lastUpdatedDateTime = moment(savedEvent.lastUpdatedDateTime).toDate()\r\n\t\t}\r\n\t}\r\n\r\n\tconst initFormMode = typeof savedEvent === \"undefined\" ? \"create\" : !p.location.state.isEdit ? \"view\" : \"edit\"\r\n\r\n\treturn (\r\n\t\t<CTFFormProvider formMode={initFormMode}>\r\n\t\t\t<EventForm savedEvent={savedEvent} />\r\n\t\t</CTFFormProvider>\r\n\t)\r\n}\r\n\r\nexport default EventPage\r\n"],"sourceRoot":""}