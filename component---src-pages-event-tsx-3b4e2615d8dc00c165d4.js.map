{"version":3,"sources":["webpack:///./src/components/Modals/DataLossModal.tsx","webpack:///./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","webpack:///./src/components/ProgressIndicator.tsx","webpack:///./src/components/Modals/SaveModal.tsx","webpack:///./src/components/FormSections/EvacDetails.tsx","webpack:///./src/components/FormSections/EventDetails.tsx","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./src/components/Forms/EventForm.tsx","webpack:///./node_modules/@material-ui/icons/esm/EditSharp.js","webpack:///./src/components/PageSections/EventOverviewTab.tsx","webpack:///./src/components/Modals/DeactivateLklModal.tsx","webpack:///./node_modules/@material-ui/icons/esm/ExpandLessSharp.js","webpack:///./node_modules/@material-ui/icons/esm/ExpandMoreSharp.js","webpack:///./node_modules/@material-ui/icons/esm/LocationOnSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PersonSharp.js","webpack:///./node_modules/@material-ui/icons/esm/EmailSharp.js","webpack:///./node_modules/@material-ui/icons/esm/PhoneSharp.js","webpack:///./src/components/LKLCard.tsx","webpack:///./src/components/PageSections/EventLklTab.tsx","webpack:///./src/components/PageSections/EventEvacDetailsTab.tsx","webpack:///./src/components/PageSections/EventAttachmentsTab.tsx","webpack:///./src/components/ViewEvent.tsx","webpack:///./src/pages/event.tsx"],"names":["DataLossModal","p","isOpen","onClose","isCentered","size","Flex","align","Box","marginRight","onClick","onLeave","easeOut","t","value","min","max","Math","props","ref","classes","className","_props$color","color","_props$disableShrink","disableShrink","_props$size","style","_props$thickness","thickness","_props$value","_props$variant","variant","other","circleStyle","rootStyle","rootProps","circumference","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","root","capitalize","indeterminate","width","height","role","svg","viewBox","SIZE","circle","circleDisableShrink","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","CircularProgress","SaveModal","message","pl","EvacDetails","useFormContext","formState","errors","setValue","getValues","evacStatusCodeRef","useRef","evacDepAuthDateRef","orderedDateRef","evacSummaryRef","watchEvacStatus","useWatch","useCTFFormContext","isCreate","isView","dirtyFields","Form","title","gridColumn","base","md","lg","labelText","labelId","onFocus","current","focus","render","onChange","onBlur","id","aria-labelledby","options","evacStatuses","placeholder","disabled","validationState","evacStatusCode","ValidationState","ERROR","undefined","errorMessage","changes","newVal","selectedItem","evacDepOrdDate","evacDepAuthDate","Date","Grid","gridGap","gridTemplateColumns","as","inputRef","maxDate","error","rules","pattern","maxLength","evacSummary","e","target","replaceMSWordChars","replace","EventDetails","useDisclosure","isDeactivateOpen","onDeactivateOpen","onOpen","onDeactivateClose","register","eventStartDateRef","eventEndDateRef","managementTypeCodeRef","eventTypeIdRef","eventSummaryRef","watchActiveIndicator","watchEventStartDate","showDivider","required","eventTitle","eventStartDate","validate","afterStartDate","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","compareAsc","minDate","eventEndDate","checked","mgmtTypes","managementTypeCode","eventTypes","eventTypeId","eventSummary","DeactivateModal","onCancel","onConfirm","saveBanner","status","Status","success","console","log","EventForm","savedEvent","isEdit","formSection","isDataLossOpen","onDataLossOpen","onDataLossClose","isSaveOpen","onSaveOpen","onSaveClose","showSaveBanner","useBanner","updateSavedForm","useSavedForm","defaultValues","eventId","moment","format","floor","random","activeIndicator","lastUpdatedDateTime","formMethods","useForm","mode","handleSubmit","onSubmit","useCallback","data","skipNavigate","currForm","getSavedForm","savedIdx","findIndex","evt","updatedEvent","splice","push","setTimeout","pageState","navigate","state","Layout","pageTitle","pageHeading","pageDescription","noValidate","type","aria-label","justify","marginTop","createSvgIcon","createElement","d","OverviewTab","eventData","eventType","find","label","mgmtType","evacStatus","evaStatus","buttonIcon","mdIcon","EditSharp","alignment","IconAlignment","LEFT","mb","displayData","formatDateField","justifySelf","marginY","Divider","borderColor","marginX","opacity","sm","Text","fontSize","href","rel","inputDate","buttonStyle","default","bg","border","hoverFocus","borderStyle","borderWidth","active","DeactivateLklModal","locationName","isActivate","toLocaleLowerCase","textAlign","borderRadius","fontFamily","fontWeight","px","py","_focus","_hover","_active","flex","lineHeight","Fragment","MotionBox","motion","custom","LKLCard","lklData","setEventData","savedEvents","updateSavedEvents","checkActive","useState","tabCurrent","setTabCurrent","isDetailOpen","setIsDetailOpen","direction","setDirection","pocIconProps","mr","alignSelf","detailsTabProps","lookupLklDto","lklTitle","locationDesc","lklAddressDto","lklPocListDto","addressDto","address1","address2","city","stateCd","postalCode","countryCd","fullAddress","pocInfo","map","extractedPoc","fullName","phone","email","personDto","givenName","surName","personEmailDtoList","personPhoneDtoList","personPhoneDto","phoneDto","phoneNum","personEmailDto","emailDto","emailAddress","backgroundColor","h","w","maxWidth","mt","flexDir","xl","flexGrow","flexBasis","position","right","Dropdown","borderedRows","MoreVertSharp","lklDtoIndex","updateEventIndex","foundLklDto","eventLklDtoList","lklDto","index","eventLklId","tempLklDto","tempLklDtoList","updatedEvents","cursor","aria-expanded","aria-controls","my","ExpandLessSharp","ExpandMoreSharp","overflow","PseudoBox","borderBottom","borderBottomColor","margin","mx","initial","duration","ease","animate","exit","currDirection","key","LocationOnSharp","poc","justifyContent","PersonSharp","EmailSharp","phoneNumber","PhoneSharp","pb","orientation","flexWrap","DateTimeFormat","DateFormat","LastKnownLocationTab","eventLklDto","createdDateTime","page","setPage","lklsPerPage","hideInactive","setHideInactive","sort","a","b","aLastUpdatedTime","bLastUpdatedTime","controlledLkls","filter","event","numOfPages","ceil","length","indexOfLastEvent","indexOfFirstEvent","totalPages","lklsOnPage","slice","AddSharp","bottom","zIndex","boxShadow","rounded","gridRow","HideInactiveButton","onToggleHideInactive","Pagination","count","_","showLastButton","EvacDetailsTab","AttachmentsTab","maxSizeBytes","allowedFileTypes","onDrop","eventTabs","TabButton","isActive","children","boxProps","useTheme","alignItems","background","outline","colors","ViewEvent","currentEventData","selectedTab","setSelectedTab","inOverview","inLkl","inEvacuation","inAttachments","minH","maxW","m","paddingX","paddingTop","paddingBottom","wordBreak","flexShrink","paddingY","marginBottom","EventPage","location","formMode"],"mappings":"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","file":"component---src-pages-event-tsx-3b4e2615d8dc00c165d4.js","sourcesContent":["import React from \"react\"\r\nimport { H4, P, Button, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\n\r\ninterface DataLossModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonLeave: (e: React.MouseEvent<HTMLButtonElement>) => void\r\n}\r\n\r\nexport const DataLossModal: React.FC<DataLossModalProps> = (p: DataLossModalProps) => (\r\n\t<Modal isOpen={p.isOpen} onClose={p.onClose} isCentered={true} size=\"sm\">\r\n\t\t<ModalHeader>\r\n\t\t\t<H4>Leave Page?</H4>\r\n\t\t</ModalHeader>\r\n\t\t<ModalCloseButton />\r\n\t\t<ModalBody>\r\n\t\t\t<P>Do you want to leave this page and lose unsaved data?</P>\r\n\t\t</ModalBody>\r\n\r\n\t\t<ModalFooter>\r\n\t\t\t<Flex align=\"center\">\r\n\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t<LinkButton onClick={p.onLeave}>Leave</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Button size=\"sm\" onClick={p.onClose}>\r\n\t\t\t\t\tStay\r\n\t\t\t\t</Button>\r\n\t\t\t</Flex>\r\n\t\t</ModalFooter>\r\n\t</Modal>\r\n)\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\n\nfunction getRelativeValue(value, min, max) {\n  return (Math.min(Math.max(min, value), max) - min) / (max - min);\n}\n\nfunction easeOut(t) {\n  t = getRelativeValue(t, 0, 1); // https://gist.github.com/gre/1650294\n\n  t = (t -= 1) * t * t + 1;\n  return t;\n}\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    \"static\": {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n\n    if (variant === 'static') {\n      circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n      rootStyle.transform = 'rotate(-90deg)';\n    } else {\n      circleStyle.strokeDashoffset = \"\".concat((easeIn((100 - value) / 100) * circumference).toFixed(3), \"px\");\n      rootStyle.transform = \"rotate(\".concat((easeOut(value / 70) * 270).toFixed(3), \"deg)\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'indeterminate': classes.indeterminate,\n      'static': classes[\"static\"]\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import React from \"react\"\r\nimport { Box } from \"@chakra-ui/core\"\r\nimport { CircularProgress as MuiCircularProgress } from \"@material-ui/core\"\r\n\r\nexport const CircularProgress: React.FC = () => (\r\n\t<Box color=\"clickable\">\r\n\t\t<MuiCircularProgress color=\"inherit\" size={48} thickness={7.5} />\r\n\t</Box>\r\n)\r\n","import React from \"react\"\r\nimport { Flex, Box } from \"@chakra-ui/core\"\r\nimport { H4, P, Modal, ModalBody, ModalHeader } from \"@c1ds/components\"\r\nimport { CircularProgress } from \"../ProgressIndicator\"\r\n\r\ninterface SaveModalProps {\r\n\tisOpen: boolean\r\n\tonClose: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tmessage?: string\r\n}\r\n\r\nexport const SaveModal: React.FC<SaveModalProps> = (p: SaveModalProps) => {\r\n\tconst { isOpen, onClose, message = \"Saving your information\" } = p\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onClose} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>Please Wait...</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box color=\"clickable\">\r\n\t\t\t\t\t\t<CircularProgress />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box pl=\"24\">\r\n\t\t\t\t\t\t<P>{message}</P>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalBody>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid } from \"@chakra-ui/core\"\r\nimport { DatePicker, Select, FormInput, ValidationState, Textarea } from \"@c1ds/components\"\r\n\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\n\r\nconst EvacDetails: React.FC = () => {\r\n\tconst { formState, errors, setValue, getValues } = useFormContext<EventFormData>()\r\n\r\n\tconst evacStatusCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst evacDepAuthDateRef = useRef<HTMLInputElement>(null)\r\n\tconst orderedDateRef = useRef<HTMLInputElement>(null)\r\n\tconst evacSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchEvacStatus = useWatch<string>({ name: \"evacStatusCode\" })\r\n\r\n\tconst { isCreate, isView } = useCTFFormContext()\r\n\r\n\tconst { dirtyFields } = formState\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Evacuation Details\">\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Status\" labelId=\"evacStatusCodeLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\tonFocus={() => evacStatusCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={evacStatusCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\tname=\"evacStatusCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacStatusCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={evacStatuses}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacStatusCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacStatusCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tconst newVal = changes.selectedItem?.value\r\n\t\t\t\t\t\t\t\t\tonChange(newVal)\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.16.6 The system defaults the Authorized or Ordered Date to Today’s date\r\n\t\t\t\t\t\t\t\t\t * when Evacuation Status is selected.\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\tif (newVal === \"ADEP\" && !getValues(\"evacDepAuthDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepAuthDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"ODEP\" && !getValues(\"evacDepOrdDate\")) {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(\"evacDepOrdDate\", new Date())\r\n\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t * Only clear date field if creating a new event and date is not dirty\r\n\t\t\t\t\t\t\t\t\t\t * (i.e. user has never modified/saved the date field)\r\n\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t} else if (newVal === \"NONE\") {\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepOrdDate && setValue(\"evacDepOrdDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t\tisCreate && !dirtyFields.evacDepAuthDate && setValue(\"evacDepAuthDate\", \"\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\", md: \"span 4\", lg: \"span 9\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(2,max-content)\" }}>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Authorized\" labelId=\"evacDepAuthDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tname=\"evacDepAuthDate\"\r\n\t\t\t\t\t\tinputRef={evacDepAuthDateRef}\r\n\t\t\t\t\t\tonFocus={() => evacDepAuthDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to “blank”\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.4 The system enables Date Departure Authorized\r\n\t\t\t\t\t\t * when Evacuation Status to “Authorized”\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ADEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepAuthDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepAuthDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"Departure Ordered\" labelId=\"orderedDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tname=\"evacDepOrdDate\"\r\n\t\t\t\t\t\tinputRef={orderedDateRef}\r\n\t\t\t\t\t\tonFocus={() => orderedDateRef.current?.focus()}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * 1.16.3 The system disables the Date Departure Authorized\r\n\t\t\t\t\t\t * and Date Departure Ordered fields\r\n\t\t\t\t\t\t * when Evacuation Status to “blank”\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t * 1.16.5 The system enables Date Departure Ordered\r\n\t\t\t\t\t\t * when Evacuation Status to “Ordered”\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdisabled={isView || !watchEvacStatus || watchEvacStatus !== \"ODEP\"}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\terror={typeof errors?.evacDepOrdDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.evacDepOrdDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Evacuation Summary\" labelId=\"evacSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Evacuation Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Evacuation Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => evacSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={evacSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"evacSummary\"\r\n\t\t\t\t\t\t\t\tname=\"evacSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"evacSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.evacSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.evacSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EvacDetails\r\n","import React, { useRef } from \"react\"\r\nimport { useFormContext, Controller, useWatch } from \"react-hook-form\"\r\nimport { Box, Grid, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Switch, DatePicker, Select, FormInput, Text, ValidationState, Textarea } from \"@c1ds/components\"\r\nimport { compareAsc } from \"date-fns\"\r\n\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport { FormSection, replaceMSWordChars, useCTFFormContext } from \"../Forms/Form\"\r\nimport DeactivateModal from \"../Modals/DeactivateModal\"\r\n\r\nconst EventDetails: React.FC = () => {\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\r\n\tconst { register, errors, setValue } = useFormContext<EventFormData>()\r\n\r\n\tconst eventStartDateRef = useRef<HTMLInputElement>(null)\r\n\tconst eventEndDateRef = useRef<HTMLInputElement>(null)\r\n\tconst managementTypeCodeRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventTypeIdRef = useRef<HTMLButtonElement>(null)\r\n\tconst eventSummaryRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst watchActiveIndicator = useWatch<boolean>({ name: \"activeIndicator\" })\r\n\tconst watchEventStartDate: Date | undefined = useWatch({ name: \"eventStartDate\" }) as Date\r\n\r\n\tconst { isView, isCreate } = useCTFFormContext()\r\n\r\n\treturn (\r\n\t\t<FormSection title=\"Event Details\" showDivider={isCreate}>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Title\" labelId=\"eventTitleLabel\" required>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tref={register({\r\n\t\t\t\t\t\t\trequired: \"Please enter an Event Title\",\r\n\t\t\t\t\t\t\tmaxLength: { value: 25, message: \"Event Title cannot exceed 25 characters\" },\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tname=\"eventTitle\"\r\n\t\t\t\t\t\tid=\"eventTitle\"\r\n\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tmaxLength={25}\r\n\t\t\t\t\t\tvalidationState={errors?.eventTitle ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\terrorMessage={errors?.eventTitle?.message}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * 1.5 The system disallows a space or non-alphanumeric character (in plain text)\r\n\t\t\t\t\t\t\t * at beginning of the title field\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\te.target.value = e.target.value.replace(/^[^A-Za-z0-9]+/, \"\")\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn={{ base: \"1 / -1\" }}\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{ base: \"repeat(1,max-content)\", md: \"repeat(3,max-content)\" }}>\r\n\t\t\t\t<FormInput labelText=\"Start Date\" labelId=\"eventStartDateLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventStartDate\"\r\n\t\t\t\t\t\tname=\"eventStartDate\"\r\n\t\t\t\t\t\trules={{ required: \"Please enter a Start Date\" }}\r\n\t\t\t\t\t\tinputRef={eventStartDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventStartDateRef.current?.focus()}\r\n\t\t\t\t\t\t/* 1.6.1 The user can edit the Start Date to any date before today's date\r\n\t\t\t\t\t\t * with valid date range: 01/01/1900 to 01/01/9999\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventStartDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventStartDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t{/* TODO: Discuss implications of large date range */}\r\n\t\t\t\t<FormInput labelText=\"End Date\" labelId=\"eventEndDateLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tas={<DatePicker />}\r\n\t\t\t\t\t\tid=\"eventEndDate\"\r\n\t\t\t\t\t\tname=\"eventEndDate\"\r\n\t\t\t\t\t\t/* The system displays appropriate error message\r\n\t\t\t\t\t\t * \"End Date must be equal or later than Start Date\"\r\n\t\t\t\t\t\t * when user editing End Date of a reactivate event.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tvalidate: {\r\n\t\t\t\t\t\t\t\tafterStartDate: value =>\r\n\t\t\t\t\t\t\t\t\t!!watchActiveIndicator ||\r\n\t\t\t\t\t\t\t\t\tcompareAsc(value, watchEventStartDate) > -1 ||\r\n\t\t\t\t\t\t\t\t\t\"End Date must be equal to or later than Start Date\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinputRef={eventEndDateRef}\r\n\t\t\t\t\t\tonFocus={() => eventEndDateRef.current?.focus()}\r\n\t\t\t\t\t\tminDate={watchEventStartDate ? watchEventStartDate : undefined}\r\n\t\t\t\t\t\tmaxDate={new Date(2100, 0, 1)}\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\terror={typeof errors?.eventEndDate !== \"undefined\"}\r\n\t\t\t\t\t\terrorMessage={errors?.eventEndDate?.message}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t\t<FormInput labelText=\"Active\" labelId=\"activeIndicatorLabel\">\r\n\t\t\t\t\t<Switch\r\n\t\t\t\t\t\tref={register()}\r\n\t\t\t\t\t\tname=\"activeIndicator\"\r\n\t\t\t\t\t\tid=\"activeIndicator\"\r\n\t\t\t\t\t\tvalue=\"Active\"\r\n\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\tsetValue(\"eventEndDate\", undefined)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t * Note: Prevent default will not work as expected for checkboxes in React.\r\n\t\t\t\t\t\t\t\t * Instead, revert activeIndicator value back to true\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\tsetValue(\"activeIndicator\", true)\r\n\t\t\t\t\t\t\t\tonDeactivateOpen()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t<FormInput labelText=\"Management Type\" labelId=\"managementTypeCodeLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select a Management Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => managementTypeCodeRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={managementTypeCodeRef}\r\n\t\t\t\t\t\t\t\tid=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\tname=\"managementTypeCode\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"managementTypeCodeLabel\"\r\n\t\t\t\t\t\t\t\toptions={mgmtTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.managementTypeCode ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.managementTypeCode?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Type\" labelId=\"eventTypeIdLabel\" required>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\trequired: \"Please select an Event Type\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventTypeIdRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tref={eventTypeIdRef}\r\n\t\t\t\t\t\t\t\tid=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\tname=\"eventTypeId\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventTypeIdLabel\"\r\n\t\t\t\t\t\t\t\toptions={eventTypes}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventTypeId ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventTypeId?.message}\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tonChange(changes.selectedItem?.value)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<Box gridColumn={{ base: \"1 / -1\", lg: \"span 9\" }}>\r\n\t\t\t\t<FormInput labelText=\"Event Summary\" labelId=\"eventSummaryLabel\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\trules={{\r\n\t\t\t\t\t\t\tpattern: {\r\n\t\t\t\t\t\t\t\tvalue: /^[A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]*$/,\r\n\t\t\t\t\t\t\t\tmessage: \"Please enter only plain text in the Event Summary field\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmaxLength: { value: 4000, message: \"Event Summary cannot exceed 4000 characters\" },\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => eventSummaryRef.current?.focus()}\r\n\t\t\t\t\t\trender={({ onChange, onBlur, value }) => (\r\n\t\t\t\t\t\t\t<Textarea\r\n\t\t\t\t\t\t\t\tref={eventSummaryRef}\r\n\t\t\t\t\t\t\t\tid=\"eventSummary\"\r\n\t\t\t\t\t\t\t\tname=\"eventSummary\"\r\n\t\t\t\t\t\t\t\taria-labelledby=\"eventSummaryLabel\"\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tmaxLength={4000}\r\n\t\t\t\t\t\t\t\tdisabled={isView}\r\n\t\t\t\t\t\t\t\tvalidationState={errors?.eventSummary ? ValidationState.ERROR : undefined}\r\n\t\t\t\t\t\t\t\terrorMessage={errors?.eventSummary?.message}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t * 1.15.1 The user can only enter \"Plain Text\" in the Event Summary field.\r\n\t\t\t\t\t\t\t\t\t * 1.15.2 The system disallows the user to enter any characters that might\r\n\t\t\t\t\t\t\t\t\t * cause potential security vulnerability like SQL injection, cross-site scripting\r\n\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\te.target.value = replaceMSWordChars(e.target.value).replace(\r\n\t\t\t\t\t\t\t\t\t\t/[^A-Za-z0-9`~!@#$%^&*()_+•\\-=[\\]:\";',./?\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tonChange(e)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormInput>\r\n\t\t\t</Box>\r\n\t\t\t<DeactivateModal\r\n\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 1.11.2 The user clicks on [YES] on the confirmation message\r\n\t\t\t\t\t * to deactivate the event or clicks on [Cancel] to exit the deactivation.\r\n\t\t\t\t\t */\r\n\t\t\t\t\t// 1.11.3 The system update the Event Active Indicator to No and Event End Date to today's date.\r\n\t\t\t\t\tsetValue(\"activeIndicator\", false)\r\n\t\t\t\t\tsetValue(\"eventEndDate\", new Date())\r\n\r\n\t\t\t\t\tonDeactivateClose()\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</FormSection>\r\n\t)\r\n}\r\n\r\nexport default EventDetails\r\n","import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","import React, { useCallback } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, useDisclosure } from \"@chakra-ui/core\"\r\nimport { Button, Banner, useBanner, Status, LinkButton } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { DataLossModal } from \"../Modals/DataLossModal\"\r\nimport { SaveModal } from \"../Modals/SaveModal\"\r\nimport { useForm, FormProvider } from \"react-hook-form\"\r\nimport { getSavedForm, useSavedForm } from \"../../components/Utility/formHelpers\"\r\nimport { Form, useCTFFormContext } from \"./Form\"\r\nimport Layout from \"../../components/Layout\"\r\nimport EvacDetails from \"../FormSections/EvacDetails\"\r\nimport EventDetails from \"../FormSections/EventDetails\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst EventForm: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\tconst { isCreate, isEdit, formSection } = useCTFFormContext()\r\n\r\n\tconst { isOpen: isDataLossOpen, onOpen: onDataLossOpen, onClose: onDataLossClose } = useDisclosure()\r\n\r\n\tconst { isOpen: isSaveOpen, onOpen: onSaveOpen, onClose: onSaveClose } = useDisclosure()\r\n\tconst showSaveBanner = useBanner(saveBanner, 2)\r\n\tconst [, updateSavedForm] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst defaultValues = {\r\n\t\t// Mimic key generation for Crisis\r\n\t\teventId: `OCS${moment(new Date()).format(\"YYYYDDD\")}${Math.floor(Math.random() * Math.floor(1000000))}`,\r\n\t\teventTitle: \"\",\r\n\t\teventStartDate: new Date(),\r\n\t\tactiveIndicator: true,\r\n\t\tmanagementTypeCode: \"mg\",\r\n\t\t// 1.13 The system defaults the Event Type to General.\r\n\t\teventTypeId: \"General\",\r\n\t\teventSummary: \"\",\r\n\t\t// 1.16.1 The system defaults the Evacuation Status to “blank”\r\n\t\tevacStatusCode: \"NONE\",\r\n\t\tevacSummary: \"\",\r\n\t\tlastUpdatedDateTime: new Date(),\r\n\t}\r\n\r\n\tconst formMethods = useForm<EventFormData>({\r\n\t\tmode: \"onBlur\",\r\n\t\tdefaultValues: savedEvent ?? defaultValues,\r\n\t})\r\n\tconst { register, handleSubmit, getValues } = formMethods\r\n\r\n\tconst onSubmit = useCallback(\r\n\t\t(data, skipNavigate = false) => {\r\n\t\t\tdata.lastUpdatedDateTime = new Date()\r\n\t\t\tconst currForm = getSavedForm<EventFormData[]>(\"ctfForms\", \"events\", [])\r\n\t\t\tif (isEdit) {\r\n\t\t\t\tconst savedIdx = currForm.findIndex((evt: EventFormData) => evt.eventId === data.eventId)\r\n\t\t\t\t// Merge existing saved data with updates in case any fields are not present in section's form data\r\n\t\t\t\tconst updatedEvent = { ...currForm[savedIdx], ...data }\r\n\t\t\t\tcurrForm.splice(savedIdx, 1, updatedEvent)\r\n\t\t\t} else {\r\n\t\t\t\tcurrForm.push(data)\r\n\t\t\t}\r\n\t\t\tupdateSavedForm(currForm)\r\n\t\t\tonSaveOpen()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (skipNavigate) {\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: Once microservice is connected, use returned eventId/event data\r\n\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\tonSaveClose()\r\n\t\t\t\t}\r\n\t\t\t\tshowSaveBanner()\r\n\t\t\t}, 2000)\r\n\t\t},\r\n\t\t[updateSavedForm, isEdit, onSaveOpen, onSaveClose, showSaveBanner, getValues]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<Layout\r\n\t\t\tpageTitle=\"Event Details\"\r\n\t\t\tpageHeading={isEdit ? `${savedEvent?.eventTitle}` : \"Create New Event\"}\r\n\t\t\tpageDescription={\r\n\t\t\t\tisEdit\r\n\t\t\t\t\t? \"\"\r\n\t\t\t\t\t: \"Enter the basic information related to the developing crisis. You can add more details later as the event unfolds.\"\r\n\t\t\t}>\r\n\t\t\t{\" \"}\r\n\t\t\t<FormProvider {...formMethods}>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"eventForm\"\r\n\t\t\t\t\tid=\"eventForm\"\r\n\t\t\t\t\tonSubmit={handleSubmit(data => {\r\n\t\t\t\t\t\tonSubmit(data, false)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tnoValidate={true}>\r\n\t\t\t\t\t<input name=\"eventId\" type=\"hidden\" ref={register} />\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"overview\")) && <EventDetails />}\r\n\r\n\t\t\t\t\t{(isCreate || (isEdit && formSection === \"evacuation\")) && <EvacDetails />}\r\n\r\n\t\t\t\t\t<Flex\r\n\t\t\t\t\t\tas=\"nav\"\r\n\t\t\t\t\t\taria-label=\"page\"\r\n\t\t\t\t\t\tid=\"pageNav\"\r\n\t\t\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\tjustify={{ base: \"flex-end\", md: \"flex-start\" }}\r\n\t\t\t\t\t\tmarginTop={{ md: \"72\" }}>\r\n\t\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t\t<LinkButton type=\"button\" onClick={onDataLossOpen}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Button type=\"submit\" size={isEdit ? \"sm\" : \"md\"}>\r\n\t\t\t\t\t\t\t{isEdit ? \"Save\" : \"Create Event\"}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Flex>\r\n\r\n\t\t\t\t\t<DataLossModal\r\n\t\t\t\t\t\tisOpen={isDataLossOpen}\r\n\t\t\t\t\t\tonClose={onDataLossClose}\r\n\t\t\t\t\t\tonLeave={() => {\r\n\t\t\t\t\t\t\tif (isCreate) {\r\n\t\t\t\t\t\t\t\tnavigate(\"/\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: getValues(\"eventId\"),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SaveModal\r\n\t\t\t\t\t\tisOpen={isSaveOpen}\r\n\t\t\t\t\t\tonClose={onSaveClose}\r\n\t\t\t\t\t\tmessage={isCreate ? \"Creating crisis event.\" : \"Saving crisis information.\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form>\r\n\t\t\t</FormProvider>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nconst saveBanner = (\r\n\t<Banner status={Status.success} title=\"Save successful!\" onClose={() => console.log(\"Banner closed\")}>\r\n\t\t{}\r\n\t</Banner>\r\n)\r\n\r\nexport default EventForm\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z\"\n}), 'EditSharp');","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider, Text } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, Link, H3, IconAlignment } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport mgmtTypes from \"../../../content/managementTypes.json\"\r\nimport eventTypes from \"../../../content/eventTypes.json\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface OverviewTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const OverviewTab: React.FC<OverviewTabProps> = (p: OverviewTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst eventType = eventTypes.find((eventType: Option) => eventType.value === eventData.eventTypeId)?.label\r\n\tconst mgmtType = mgmtTypes.find((mgmtType: Option) => mgmtType.value === eventData.managementTypeCode)?.label\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Event Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"overview\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", md: \"span 3\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Management Type</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(mgmtType)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\", lg: \"span 3\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Start Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventStartDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"span 2\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">End Date</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.eventEndDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 2\" }} justifySelf={{ md: \"center\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Event Description</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.eventSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Talking Points</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>Default Talking Points have been added, pending new Talking Points.</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }} marginTop={{ base: \"24\", sm: \"0\", md: \"24\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Uploaded file</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <P>{displayData(eventData.eventSummary)}</P> */}\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(8, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<H3>Impacted Area</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>\r\n\t\t\t\t\t\t<Text color=\"required\" as=\"span\">\r\n\t\t\t\t\t\t\t*&nbsp;\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\tWhich Consular Posts are impacted by this event?\r\n\t\t\t\t\t</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }} marginTop={{ base: \"0\" }}>\r\n\t\t\t\t\t<P>See below to help identify where Consular Districts are located in each country.</P>\r\n\t\t\t\t\t<Box fontSize=\"button\">\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\thref=\"http://fam.a.state.sbu/fam/02FAM/02FAM0460.html#M463\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noreferrer noopener\">\r\n\t\t\t\t\t\t\t2 FAM EXHIBIT 461&nbsp; CONSULAR DISTRICTS\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{/* <P>{displayData(eventData.eventSummary)}</P> */}\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"---\")\r\n","import React from \"react\"\r\nimport { Box, Flex, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, Button, H4, Modal, ModalBody, ModalFooter, ModalHeader, ModalCloseButton, LinkButton } from \"@c1ds/components\"\r\n\r\ninterface DeactivateModalProps {\r\n\tisOpen: boolean\r\n\tonCancel: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tonConfirm: React.ComponentProps<typeof Modal>[\"onClose\"]\r\n\tlocationName?: string\r\n\t/**\r\n\t * Indicates whether modal is for last known location activation.\r\n\t *\r\n\t * If true, confirmation button/description will display \"Activate\"\r\n\t *\r\n\t * If false, confirmation button/description will display \"Deactivate\"\r\n\t *\r\n\t * If undefined, confirmation button/description will display \"Yes\"\r\n\t */\r\n\tisActivate?: boolean\r\n}\r\n\r\nconst buttonStyle = {\r\n\tdefault: {\r\n\t\tbg: \"badge\",\r\n\t\tcolor: \"white\",\r\n\t\tborder: \"none\",\r\n\t},\r\n\thoverFocus: {\r\n\t\tborderStyle: \"solid\",\r\n\t\tborderWidth: \"2\",\r\n\t\tborderColor: \"accent\",\r\n\t},\r\n\tactive: {\r\n\t\tbg: \"#a30014\",\r\n\t\tborder: \"none\",\r\n\t},\r\n}\r\n\r\nconst DeactivateLklModal: React.FC<DeactivateModalProps> = ({\r\n\tisOpen,\r\n\tonCancel,\r\n\tonConfirm,\r\n\tlocationName,\r\n\tisActivate,\r\n}: DeactivateModalProps) => {\r\n\t// if locationName and isActivate are not defined, it will prompt default Deactivate Modal with no event information.\r\n\tconst status = isActivate ? \"Activate\" : \"Deactivate\"\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={isOpen} onClose={onCancel} isCentered={true} size=\"sm\">\r\n\t\t\t<ModalHeader>\r\n\t\t\t\t<H4>{status} Last Known Location?</H4>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalCloseButton />\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<P>\r\n\t\t\t\t\tAre you sure you want to {status.toLocaleLowerCase()} {locationName ?? \"this last known location?\"}?\r\n\t\t\t\t</P>\r\n\t\t\t</ModalBody>\r\n\r\n\t\t\t<ModalFooter>\r\n\t\t\t\t<Flex align=\"center\">\r\n\t\t\t\t\t<Box marginRight=\"20\">\r\n\t\t\t\t\t\t<LinkButton onClick={onCancel}>Cancel</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{typeof isActivate === \"undefined\" ? (\r\n\t\t\t\t\t\t<Button size=\"sm\" onClick={onConfirm}>\r\n\t\t\t\t\t\t\tYES\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : !isActivate ? (\r\n\t\t\t\t\t\t// Deactivate button with warning background color.\r\n\t\t\t\t\t\t<ChakraButton\r\n\t\t\t\t\t\t\theight=\"input\"\r\n\t\t\t\t\t\t\twidth=\"buttonMd\"\r\n\t\t\t\t\t\t\ttextAlign=\"center\"\r\n\t\t\t\t\t\t\tborderRadius={0}\r\n\t\t\t\t\t\t\tfontFamily=\"body\"\r\n\t\t\t\t\t\t\tfontSize=\"button\"\r\n\t\t\t\t\t\t\tfontWeight=\"button\"\r\n\t\t\t\t\t\t\tpx={20}\r\n\t\t\t\t\t\t\tpy={12}\r\n\t\t\t\t\t\t\t{...buttonStyle.default}\r\n\t\t\t\t\t\t\t_focus={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_hover={buttonStyle.hoverFocus}\r\n\t\t\t\t\t\t\t_active={buttonStyle.active}\r\n\t\t\t\t\t\t\tonClick={onConfirm}>\r\n\t\t\t\t\t\t\t<Box flex=\"1 1 0\" lineHeight=\"normal\">\r\n\t\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ChakraButton>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button size={isActivate ? \"md\" : \"sm\"} onClick={onConfirm}>\r\n\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Flex>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\nexport default DeactivateLklModal\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z\"\n}), 'ExpandLessSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"\n}), 'ExpandMoreSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"\n})), 'LocationOnSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'PersonSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M22 4H2v16h20V4zm-2 4l-8 5-8-5V6l8 5 8-5v2z\"\n}), 'EmailSharp');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M21 15.46l-5.27-.61-2.52 2.52c-2.83-1.44-5.15-3.75-6.59-6.59l2.53-2.53L8.54 3H3.03C2.45 13.18 10.82 21.55 21 20.97v-5.51z\"\n}), 'PhoneSharp');","import React, { useState } from \"react\"\r\n\r\nimport { Flex, Box, PseudoBox, Divider, Text, useDisclosure, BoxProps } from \"@chakra-ui/core\"\r\nimport { P, H4, Card, FinePrint } from \"@c1ds/components\"\r\n\r\nimport Dropdown from \"../components/Dropdown\"\r\nimport DeactivateLklModal from \"../components/Modals/DeactivateLklModal\"\r\nimport { useSavedForm } from \"../components/Utility/formHelpers\"\r\n\r\nimport {\r\n\tMoreVertSharp,\r\n\tLocationOnSharp,\r\n\tPersonSharp,\r\n\tEmailSharp,\r\n\tPhoneSharp,\r\n\tExpandLessSharp,\r\n\tExpandMoreSharp,\r\n} from \"@material-ui/icons\"\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\n\r\ntype OmittedBoxProps = \"transition\" | \"style\"\r\n\r\nconst MotionBox = motion.custom<Omit<BoxProps, OmittedBoxProps>>(Box)\r\ninterface LKLCard {\r\n\tlklData: LklDto\r\n\tsetEventData: (eventdata : EventFormData) => void\r\n}\r\n\r\nconst LKLCard: React.FC<LKLCard> = ({ lklData, setEventData }: LKLCard) => {\r\n\r\n\tconst [savedEvents, updateSavedEvents] = useSavedForm<EventFormData[]>(\"ctfForms\", \"events\")\r\n\r\n\tconst checkActive = lklData.activeIndicator\r\n\t// If tabCurrent is true, Location Tab selected otherwise, POC Tab selected\r\n\tconst [tabCurrent, setTabCurrent] = useState(true)\r\n\tconst [isDetailOpen, setIsDetailOpen] = useState(false)\r\n\tconst [direction, setDirection] = useState(1)\r\n\tconst { isOpen: isDeactivateOpen, onOpen: onDeactivateOpen, onClose: onDeactivateClose } = useDisclosure()\r\n\r\n\t// const [detailsSectionHeight, setHeight] = useState(200)\r\n\r\n\tconst pocIconProps = {\r\n\t\tmr: 4,\r\n\t\talignSelf: \"center\",\r\n\t\tsize: \"iconPoc\",\r\n\t\tcolor: \"label\",\r\n\t}\r\n\tconst detailsTabProps = {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tpy: 4,\r\n\t\tfontWeight: 600,\r\n\t\tfontSize: 16,\r\n\t\tcolor: \"headingLarge\",\r\n\t}\r\n\r\n\t// TODO : need to improve how to update entire Event DTO efficiently\r\n\tconst onDeactivate = () => {\r\n\t\t\r\n\t\tlet lklDtoIndex = null\r\n\t\tconst updateEventIndex = savedEvents.findIndex((evt: EventFormData) => {\r\n\t\t\tlet foundLklDto = null\r\n\t\t\tif(evt.eventId === lklData.eventId){\r\n\t\t\t\tfoundLklDto = evt.eventLklDtoList.find((lklDto : LklDto, index : number) => {\r\n\t\t\t\t\tif (lklDto.eventLklId === lklData.eventLklId) {\r\n\t\t\t\t\t\tlklDtoIndex = index\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn foundLklDto ? true : false\r\n\t\t})\r\n\t\tconst tempLklDto = savedEvents[updateEventIndex].eventLklDtoList[lklDtoIndex]\r\n\t\tconst tempLklDtoList = savedEvents[updateEventIndex].eventLklDtoList\r\n\t\ttempLklDtoList.splice(lklDtoIndex, 1, {\r\n\t\t\t...tempLklDto,\r\n\t\t\tactiveIndicator : !checkActive,\r\n\t\t\tlastUpdatedDateTime : new Date()\r\n\t\t})\r\n\t\tconst updatedEvents = {\r\n\t\t\t...savedEvents[updateEventIndex],\r\n\t\t\teventLklDtoList : tempLklDtoList\r\n\t\t}\r\n\t\t// Update the current Event to reflect the new LKL list in ViewEvent component\r\n\t\tsetEventData(updatedEvents)\r\n\t\tsavedEvents.splice(updateEventIndex, 1, updatedEvents)\r\n\r\n\t\tupdateSavedEvents(savedEvents)\r\n\t\tonDeactivateClose()\r\n\t}\r\n\r\n\t// 1.4          The user can see the following fields inside each Last Known Location on the list\r\n\t// ·         Location Title\r\n\t// ·         Country\r\n\t// ·         Post\r\n\t// ·         Location Status\r\n\t// ·         [Location Description] - expand chevron  (Address, Point of Contact)\r\n\t// ·         [Additional Action] – Edit\r\n\t// ·         [Additional Action] – Deactivate?\r\n\tconst options = [\r\n\t\t{\r\n\t\t\tlabel: \"Edit Location\",\r\n\t\t\tvalue: \"Edit\",\r\n\t\t\tonClick: () => {\r\n\t\t\t\t// navigate(\"/event\", { state: { eventId: , isEdit: true } })\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: checkActive ? \"Deactivate\" : \"Activate\",\r\n\t\t\tvalue: \"Deactivate\",\r\n\t\t\ttype: checkActive ? (\"error\" as const) : (\"primary\" as const),\r\n\t\t\tonClick: () => {\t\r\n\t\t\t\tonDeactivateOpen()\r\n\t\t\t},\r\n\t\t},\r\n\t]\r\n\r\n\tconst { lklTitle, locationDesc, lklAddressDto, lklPocListDto }: LookupLklDto = lklData.lookupLklDto\r\n\tconst { address1, address2, city, stateCd, postalCode, countryCd }: AddressDto = lklAddressDto.addressDto\r\n\tconst isUSA = countryCd === 'US' ? `${city}, ${stateCd}, ${postalCode}` : `${city}, ${postalCode}`\r\n\tconst fullAddress = `${address1} ${address2}, ${isUSA}, ${countryCd}`\r\n\r\n\tconst pocInfo: Array<{ fullName: string; phone: string[]; email: string[] }> = []\r\n\tlklPocListDto.map((lklPocListDto: LklPocListDto) => {\r\n\t\tconst extractedPoc = { fullName: \"\", phone: [], email: [] }\r\n\t\tconst { givenName, surName, personEmailDtoList, personPhoneDtoList }: PersonDto = lklPocListDto.personDto\r\n\t\textractedPoc.fullName = `${givenName} ${surName}`\r\n\r\n\t\t// TODO: cases for multiple phones and emails\r\n\t\tpersonPhoneDtoList.map((personPhoneDto : PersonPhoneDto) => {\r\n\t\t\textractedPoc.phone.push(personPhoneDto.phoneDto.phoneNum)\r\n\t\t})\r\n\t\tpersonEmailDtoList.map((personEmailDto : PersonEmailDto) => {\r\n\t\t\textractedPoc.email.push(personEmailDto.emailDto.emailAddress)\r\n\t\t})\r\n\t\tpocInfo.push(extractedPoc)\r\n\t})\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t<Box backgroundColor={checkActive ? \"success\" : \"silver\"} h={3} w=\"full\" /> \r\n\t\t\t<Card id=\"lklCard\" maxWidth=\"full\">\r\n\t\t\t\t<Flex w=\"full\" mt={{ base: \"-8px\", sm: \"-16px\" }}>\r\n\t\t\t\t\t<Flex flexDir={{ base: \"column\", xl: \"row\" }} flexGrow={1}>\r\n\t\t\t\t\t\t<Box flexBasis={{ xl: \"65%\" }}>\r\n\t\t\t\t\t\t\t<P>{lklTitle}</P>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* location address */}\r\n\t\t\t\t\t\t<Box mb={4} flexBasis={{ xl: \"35%\" }}>\r\n\t\t\t\t\t\t\t<FinePrint color=\"label\">\r\n\t\t\t\t\t\t\t\tU.S. Embassy in {city}, {countryCd}\r\n\t\t\t\t\t\t\t</FinePrint>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Flex>\r\n\t\t\t\t\t<Box position=\"relative\" right={{ base: \"-12px\", sm: \"-20px\", md: \"-12px\" }}>\r\n\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tborderedRows={true}\r\n\t\t\t\t\t\t\twidth=\"10rem\"\r\n\t\t\t\t\t\t\tlabel={`Additional actions for ${lklTitle}`}>\r\n\t\t\t\t\t\t\t<Box as={MoreVertSharp} color=\"clickable\" />\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<DeactivateLklModal\r\n\t\t\t\t\t\tisOpen={isDeactivateOpen}\r\n\t\t\t\t\t\tonCancel={onDeactivateClose}\r\n\t\t\t\t\t\tlocationName={lklTitle}\r\n\t\t\t\t\t\tonConfirm={onDeactivate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Detail, hide when  */}\r\n\t\t\t\t<Flex mt={8} mb={-12}>\r\n\t\t\t\t\t<Box\r\n\t\t\t\t\t\tas=\"button\"\r\n\t\t\t\t\t\tdisplay=\"inline-flex\"\r\n\t\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t\tborder=\"none\"\r\n\t\t\t\t\t\tbackgroundColor=\"transparent\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetIsDetailOpen(!isDetailOpen)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\taria-expanded={isDetailOpen}\r\n\t\t\t\t\t\taria-controls=\"detailsToggleButton\"\r\n\t\t\t\t\t\taria-label={`Details toggle button for ${lklTitle}`}\r\n\t\t\t\t\t\tcolor=\"clickable\">\r\n\t\t\t\t\t\t<Text my={0} fontSize={16}>\r\n\t\t\t\t\t\t\tDetails\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t{isDetailOpen ? <ExpandLessSharp /> : <ExpandMoreSharp />}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\r\n\t\t\t\t{/* Location */}\r\n\t\t\t\t{isDetailOpen ? (\r\n\t\t\t\t\t// TODO: Dynamic height with useEffect\r\n\t\t\t\t\t<Box id=\"detailsToggleButton\" position=\"relative\"  overflow=\"hidden\">\r\n\t\t\t\t\t\t<Divider borderColor=\"silver\" my={16} />\r\n\t\t\t\t\t\t{/* Detail Tabs before extra large view*/}\r\n\t\t\t\t\t\t<Box display={{ xl: \"none\" }}>\r\n\t\t\t\t\t\t\t<Flex mb={16}>\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 3 : 0}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {}\r\n\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(-1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(true)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmr={8}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t\t<Box mx={8} />\r\n\t\t\t\t\t\t\t\t<PseudoBox\r\n\t\t\t\t\t\t\t\t\t{...detailsTabProps}\r\n\t\t\t\t\t\t\t\t\tborderWidth={0}\r\n\t\t\t\t\t\t\t\t\tborderBottom={tabCurrent ? 0 : 3}\r\n\t\t\t\t\t\t\t\t\tborderBottomColor=\"accent\"\r\n\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"headingSmall\"\r\n\t\t\t\t\t\t\t\t\t_hover={\r\n\t\t\t\t\t\t\t\t\t\ttabCurrent\r\n\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottomColor: \"clickable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"3px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle: \"solid\",\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t: {}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetDirection(1)\r\n\t\t\t\t\t\t\t\t\t\tsetTabCurrent(false)\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Text fontFamily=\"headingSmall\" margin={0} fontSize=\"h4\" fontWeight=\"h4\" lineHeight=\"h4\">\r\n\t\t\t\t\t\t\t\t\t\tPoint of Contact\r\n\t\t\t\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t\t\t\t</PseudoBox>\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t<AnimatePresence custom={direction} initial={false}>\r\n\t\t\t\t\t\t\t\t<MotionBox\r\n\t\t\t\t\t\t\t\t\tposition=\"relative\"\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tinitial={{ transform: `translateX(${direction < 0 ? \"-100%\" : \"100%\"})` }}\r\n\t\t\t\t\t\t\t\t\ttransition={{\r\n\t\t\t\t\t\t\t\t\t\ttype: \"tween\",\r\n\t\t\t\t\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\t\t\t\t\tease: \"easeInOut\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tanimate={{\r\n\t\t\t\t\t\t\t\t\t\ttransform: \"translateX(0%)\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\texit={(currDirection: number) => ({\r\n\t\t\t\t\t\t\t\t\t\ttransform: `translateX(${currDirection < 0 ? \"100%\" : \"-100%\"})`,\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\twidth=\"100%\">\r\n\t\t\t\t\t\t\t\t\t{tabCurrent ? (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Box key=\"2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexDir={{ base: \"column\", md: \"row\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpx={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmy={8}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent=\"space-around\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress : string, index : number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber : string, index : number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</MotionBox>\r\n\t\t\t\t\t\t\t</AnimatePresence>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{/* Detail Tabs at extra large view*/}\r\n\t\t\t\t\t\t<Flex display={{ base: \"none\", xl: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"63%\" }}>\r\n\t\t\t\t\t\t\t\t<Box pb={16}>\r\n\t\t\t\t\t\t\t\t\t<H4>Location</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Flex mb={12}>\r\n\t\t\t\t\t\t\t\t\t<Box as={LocationOnSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{fullAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t<Box py={4}>\r\n\t\t\t\t\t\t\t\t\t<FinePrint color=\"label\">Description</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t<FinePrint>{locationDesc}</FinePrint>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" flexBasis={{ xl: \"2%\" }} color=\"silver\" />\r\n\t\t\t\t\t\t\t<Box flexBasis={{ xl: \"35%\" }}>\r\n\t\t\t\t\t\t\t\t<Box pb={16}>\r\n\t\t\t\t\t\t\t\t\t<H4>Point of Contact</H4>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t{pocInfo.map((poc, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\tflexDir=\"column\"\r\n\t\t\t\t\t\t\t\t\t\t\tborder={1}\r\n\t\t\t\t\t\t\t\t\t\t\tborderStyle=\"solid\"\r\n\t\t\t\t\t\t\t\t\t\t\tborderColor=\"silver\"\r\n\t\t\t\t\t\t\t\t\t\t\tpx={8}\r\n\t\t\t\t\t\t\t\t\t\t\tmy={8}\r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent=\"space-around\"\r\n\t\t\t\t\t\t\t\t\t\t\tflexWrap=\"wrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Flex py={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PersonSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{poc.fullName}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.email.map((emailAddress : string, index : number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={EmailSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{emailAddress}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t{poc.phone.map((phoneNumber : string, index : number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flex py={4} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box as={PhoneSharp} {...pocIconProps} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FinePrint>{phoneNumber}</FinePrint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t) : null}\r\n\t\t\t</Card>\r\n\t\t</Box>\r\n\t)\r\n}\r\n\r\nexport default LKLCard\r\n","import React, { useState } from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport moment from \"moment\"\r\n\r\nimport { Flex, Box, Grid, Button as ChakraButton } from \"@chakra-ui/core\"\r\nimport { P, H3, C1_DATE_FORMAT as DateFormat, LinkButton, IconAlignment } from \"@c1ds/components\"\r\n\r\nimport LKLCard from \"../LKLCard\"\r\nimport HideInactiveButton from \"../HideInactiveButton\"\r\n\r\nimport Pagination from \"@material-ui/lab/Pagination\"\r\nimport { AddSharp } from \"@material-ui/icons\"\r\n\r\nconst DateTimeFormat = `${DateFormat} HH:mm:ss:SS ZZ`\r\n\r\ninterface LastKnownLocationTabProps {\r\n\teventData: EventFormData\r\n\tsetEventData: (eventdata : EventFormData) => void\r\n}\r\n\r\nexport const LastKnownLocationTab: React.FC<LastKnownLocationTabProps> = (p: LastKnownLocationTabProps) => {\r\n\t// Currently using the first event eventLklDtoList for demonstration\r\n\tconst { eventData, setEventData } = p\r\n\r\n\tconst eventLklDtoList: LklDto[] =\r\n\t\teventData.eventLklDtoList?.map(eventLklDto => {\r\n\t\t\tconst eventLklDtoWithDate: LklDto = {\r\n\t\t\t\t...eventLklDto,\r\n\t\t\t\tcreatedDateTime: moment(eventLklDto.createdDateTime, DateTimeFormat).toDate(),\r\n\t\t\t\tlastUpdatedDateTime: moment(eventLklDto.lastUpdatedDateTime, DateTimeFormat).toDate(),\r\n\t\t\t}\r\n\t\t\treturn eventLklDtoWithDate\r\n\t\t}) ?? []\r\n\tconst [page, setPage] = useState(1)\r\n\tconst [lklsPerPage, setLklsPerPage] = useState(10)\r\n\tconst [hideInactive, setHideInactive] = useState(true)\r\n\r\n\t/**\r\n\t * 1.5 The system displays the default location list with “Active” location status and sort by Last Updated Date (Still working on the UI)\r\n\t */\r\n\teventLklDtoList.sort((a: LklDto, b: LklDto) => {\r\n\t\tconst aLastUpdatedTime = a.lastUpdatedDateTime ?? new Date()\r\n\t\tconst bLastUpdatedTime = b.lastUpdatedDateTime ?? new Date()\r\n\t\t// Descending order\r\n\t\tconst direction = -1\r\n\t\tif (aLastUpdatedTime > bLastUpdatedTime) return direction\r\n\t\tif (aLastUpdatedTime < bLastUpdatedTime) return -direction\r\n\t\treturn 0\r\n\t})\r\n\tconst controlledLkls = eventLklDtoList.filter((event: LklDto) => {\r\n\t\tif (hideInactive) return event.activeIndicator\r\n\t\telse return true\r\n\t})\r\n\r\n\tconst numOfPages = Math.ceil(controlledLkls.length / lklsPerPage)\r\n\t// Update the page number when inactive events are hidden\r\n\tif (page > numOfPages) setPage(numOfPages)\r\n\r\n\tconst indexOfLastEvent = page * lklsPerPage\r\n\tconst indexOfFirstEvent = indexOfLastEvent - lklsPerPage\r\n\r\n\tconst isMultiplePages = controlledLkls.length > lklsPerPage\r\n\tconst totalPages = isMultiplePages ? Math.ceil(controlledLkls.length / lklsPerPage) : 1\r\n\tconst lklsOnPage = totalPages !== 1 ? controlledLkls.slice(indexOfFirstEvent, indexOfLastEvent) : controlledLkls\r\n\r\n\treturn (\r\n\t\t// first Flex will be removed once tabular view is established\r\n\t\t/**\r\n            1.1     The user can access the Last Known Locations (list) screen by click on Last Known Locations menu item when editing an event.\r\n            1.2     The user can see the Event Title of the event that is being edited on top of the screen\r\n        */\r\n\r\n\t\t<Grid\r\n\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\tgridTemplateColumns={{\r\n\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t}}>\r\n\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<H3>Last Known Locations</H3>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\tbuttonIcon={{ mdIcon: AddSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\tonClick={() => navigate(\"/addLKL\")}>\r\n\t\t\t\t\t\t&nbsp;Add Location\r\n\t\t\t\t\t</LinkButton>\r\n\t\t\t\t</Box>\r\n\t\t\t</Flex>\r\n\t\t\t<Box gridColumn=\"1 / -1\"  mt={-16}>\r\n\t\t\t\t<P>Manage the last known locations for U.S. citizens involved in this crisis.</P>\r\n\t\t\t</Box>\r\n\t\t\t{/* 1.8     The user can set “Hide Inactive Location” to NO to view all \r\n                    last known locations (Active and Inactive) order by default Last Updated Date */}\r\n\t\t\t{/* <Box mr={20}>\r\n                        <HideInactiveButton onToggleHideInactive={() => {return}} />\r\n                    </Box> */}\r\n\t\t\t<Box bottom=\"16px\" zIndex={2} right=\"16px\" position=\"fixed\" display={{ md: \"none\" }}>\r\n\t\t\t\t<ChakraButton\r\n\t\t\t\t\tborderColor=\"transparent\"\r\n\t\t\t\t\tboxShadow=\"0 6px 6px 0 rgba(0, 0, 0, 0.4)\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\theight=\"40px\"\r\n\t\t\t\t\twidth=\"40px\"\r\n\t\t\t\t\trounded=\"round\"\r\n\t\t\t\t\tbg=\"clickable\"\r\n\t\t\t\t\tcursor=\"pointer\"\r\n\t\t\t\t\t_hover={{\r\n\t\t\t\t\t\tbg: \"secondary\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={() => navigate(\"/addLKL\")}>\r\n\t\t\t\t\t<Box as={AddSharp} size=\"iconMobileCreate\" />\r\n\t\t\t\t</ChakraButton>\r\n\t\t\t</Box>\r\n\t\t\t{/* LKL card list*/}\r\n\t\t\t{/* 1.3     The user can see the following fields on View Last Known Location screen\r\n\t\t\t\t·         Hide Inactive Location - Indicator\r\n\t\t\t\t·         [Add Location] – button\r\n\t\t\t\t·         Last Known Location - card\r\n\t\t\t\t·         Pagination\r\n\t\t\t\t1.6     The system defaults “Hide Inactive Location” to YES  (Still working on the UI)\r\n\t\t\t\t1.7     The user can distinguish active or inactive last known location visually.  (Still working on the UI)\r\n\t\t\t*/}\r\n\t\t\t<Flex\r\n\t\t\t\tgridColumn={{ base: \"1 / 3\", md: \"1 / -1\" }}\r\n\t\t\t\tgridRow={{ base: \"3\", md: \"auto\" }}\r\n\t\t\t\tjustify={{ base: \"flex-start\", md: \"flex-end\" }}>\r\n\t\t\t\t<HideInactiveButton onToggleHideInactive={() => setHideInactive(!hideInactive)} />\r\n\t\t\t</Flex> \r\n\r\n\t\t\t{lklsOnPage.map((lklData: LklDto, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Box key={index} gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t<LKLCard lklData={lklData} setEventData={setEventData} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\r\n\t\t\t{/* 1.9     The system displays the proper pagination at bottom of the Last \r\n                            Known Location List, each page contains “X” number of records.  \r\n                            (“X” is based on C1 design) \r\n\t\t\t\t1.10    The user can browse through additional Last Known Locations \r\n\t\t\t\t\t\tby using the pagination controls (e.g. First, Next, Last, Page Number etc.) .\r\n                    \r\n\t\t\t\tPagination is not yet build in wireframe, so this is just place holder.\r\n                */}\r\n\t\t\t{/* pagination */}\r\n\r\n\t\t\t<Flex gridColumn=\"1 / -1\" justify=\"space-evenly\">\r\n\t\t\t\t<P>{eventLklDtoList.length} results</P>\r\n\t\t\t\t<Pagination page={page} count={totalPages} onChange={(_, value) => setPage(value)} showLastButton size=\"small\" />\r\n\t\t\t\t<select>\r\n\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t<option value=\"20\">20</option>\r\n\t\t\t\t</select>\r\n\t\t\t</Flex>\r\n\t\t</Grid>\r\n\t)\r\n}\r\n","import React from \"react\"\r\nimport { navigate } from \"gatsby\"\r\nimport { Box, Flex, Grid, Divider } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, LinkButton, H3, IconAlignment } from \"@c1ds/components\"\r\nimport moment from \"moment\"\r\nimport { EditSharp } from \"@material-ui/icons\"\r\nimport evacStatuses from \"../../../content/evacuationStatuses.json\"\r\nimport { EventPageState } from \"../../pages/event\"\r\n\r\n//TODO: Use exported type\r\ninterface Option {\r\n\tlabel: string\r\n\tvalue: string\r\n}\r\n\r\ninterface EvacDetailsTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const EvacDetailsTab: React.FC<EvacDetailsTabProps> = (p: EvacDetailsTabProps) => {\r\n\tconst { eventData } = p\r\n\tconst evacStatus = evacStatuses.find((evaStatus: Option) => evaStatus.value === eventData.evacStatusCode)?.label\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Evacuation Details</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<LinkButton\r\n\t\t\t\t\t\t\tbuttonIcon={{ mdIcon: EditSharp, alignment: IconAlignment.LEFT, color: \"clickable\" }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tconst pageState: EventPageState = {\r\n\t\t\t\t\t\t\t\t\teventId: eventData.eventId,\r\n\t\t\t\t\t\t\t\t\tisEdit: true,\r\n\t\t\t\t\t\t\t\t\tformSection: \"evacuation\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnavigate(\"/event\", { state: pageState })\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t&nbsp;Edit\r\n\t\t\t\t\t\t</LinkButton>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Status</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(evacStatus)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\", lg: \"span 3\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Authorized</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepAuthDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\", sm: \"span 2\", md: \"span 4\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Departure Ordered</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(formatDateField(eventData.evacDepOrdDate))}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Evacuation Summary</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<P>{displayData(eventData.evacSummary)}</P>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t\t<Box gridColumn=\"1 / -1\" marginY=\"16\">\r\n\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t</Box>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// TODO: Move to common util file (also used by EventCard)\r\nconst formatDateField = (inputDate: Date | undefined) => {\r\n\treturn inputDate ? moment(inputDate).format(\"MM/DD/YYYY\") : \"\"\r\n}\r\n\r\nconst displayData = (value?: string) => (value ? value : \"---\")\r\n","import React from \"react\"\r\nimport { Box, Flex, Grid } from \"@chakra-ui/core\"\r\nimport { FinePrint, P, H3, FileUploader } from \"@c1ds/components\"\r\n\r\ninterface AttachmentsTabProps {\r\n\teventData: EventFormData\r\n}\r\n\r\nexport const AttachmentsTab: React.FC<AttachmentsTabProps> = (p: AttachmentsTabProps) => {\r\n\tconst { eventData } = p\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid\r\n\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\tgridTemplateColumns={{\r\n\t\t\t\t\tbase: \"repeat(4, 1fr)\",\r\n\t\t\t\t\tmd: \"repeat(12, 1fr)\",\r\n\t\t\t\t\tlg: \"repeat(12, 1fr)\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<Flex gridColumn=\"1 / -1\" align=\"center\" justify=\"space-between\">\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<H3>Attachments</H3>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t<P>Add additional attachments related to this event.</P>\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box gridColumn={{ base: \"1 / -1\" }}>\r\n\t\t\t\t\t<Box mb={4}>\r\n\t\t\t\t\t\t<FinePrint color=\"label\">Attachments</FinePrint>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<FileUploader\r\n\t\t\t\t\t\tid=\"attachments\"\r\n\t\t\t\t\t\tmaxSizeBytes={1024 * 1024 * 5}\r\n\t\t\t\t\t\tallowedFileTypes={[\r\n\t\t\t\t\t\t\t\".jpg\",\r\n\t\t\t\t\t\t\t\".jpeg\",\r\n\t\t\t\t\t\t\t\".gif\",\r\n\t\t\t\t\t\t\t\".png\",\r\n\t\t\t\t\t\t\t\".xls\",\r\n\t\t\t\t\t\t\t\".xlsx\",\r\n\t\t\t\t\t\t\t\".doc\",\r\n\t\t\t\t\t\t\t\".docx\",\r\n\t\t\t\t\t\t\t\".txt\",\r\n\t\t\t\t\t\t\t\".rtf\",\r\n\t\t\t\t\t\t\t\".pdf\",\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonDrop={() => {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Box>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useState } from \"react\"\r\nimport { Box, BoxProps, Flex, Grid, Divider, PseudoBox, useTheme } from \"@chakra-ui/core\"\r\nimport SEO from \"./seo\"\r\nimport { H1, Select } from \"@c1ds/components\"\r\nimport { EventFormSections } from \"./Forms/Form\"\r\nimport { OverviewTab } from \"./PageSections/EventOverviewTab\"\r\nimport { LastKnownLocationTab } from \"./PageSections/EventLklTab\"\r\nimport { EvacDetailsTab } from \"./PageSections/EventEvacDetailsTab\"\r\nimport { AttachmentsTab } from \"./PageSections/EventAttachmentsTab\"\r\n\r\ninterface EventFormProps {\r\n\tsavedEvent?: EventFormData\r\n}\r\n\r\nconst eventTabs: { label: string; value: EventFormSections }[] = [\r\n\t{ label: \"Event Overview\", value: \"overview\" },\r\n\t{ label: \"Last Known Locations\", value: \"locations\" },\r\n\t{ label: \"Evacuation\", value: \"evacuation\" },\r\n\t{ label: \"Attachments\", value: \"attachments\" },\r\n]\r\n\r\nconst ViewEvent: React.FC<EventFormProps> = (p: EventFormProps) => {\r\n\tconst { savedEvent } = p\r\n\r\n\tconst [currentEventData, setEventData] = useState(savedEvent)\r\n\r\n\tconst eventData: EventFormData = savedEvent ?? { eventId: \"\", eventTitle: \"\", managementTypeCode: \"\", eventTypeId: \"\" }\r\n\r\n\tconst [selectedTab, setSelectedTab] = useState<EventFormSections | undefined>(\"overview\")\r\n\tconst inOverview = selectedTab === \"overview\",\r\n\t\tinLkl = selectedTab === \"locations\",\r\n\t\tinEvacuation = selectedTab === \"evacuation\",\r\n\t\tinAttachments = selectedTab === \"attachments\"\r\n\r\n\tconst isActive = !!eventData.activeIndicator\r\n\r\n\treturn (\r\n\t\t<Flex minH=\"100vh\">\r\n\t\t\t<Box as=\"main\" w=\"full\" lineHeight=\"1.5\">\r\n\t\t\t\t<SEO title=\"View Event\" />\r\n\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tas=\"section\"\r\n\t\t\t\t\tid=\"pageSection\"\r\n\t\t\t\t\tgridColumn=\"1 / -1\"\r\n\t\t\t\t\tgridGap={{ base: \"16px\", md: \"24px\" }}\r\n\t\t\t\t\tgridTemplateColumns={[\r\n\t\t\t\t\t\t\"repeat(4, 1fr)\",\r\n\t\t\t\t\t\t\"repeat(4, 1fr)\",\r\n\t\t\t\t\t\t\"repeat(4, 1fr)\",\r\n\t\t\t\t\t\t\"repeat(8, 1fr)\",\r\n\t\t\t\t\t\t\"repeat(12, 1fr)\",\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tbg=\"white\"\r\n\t\t\t\t\tmaxW={{ xl: \"1280px\" }}\r\n\t\t\t\t\tm={{ xl: \"auto\" }}\r\n\t\t\t\t\tpaddingX={{ base: \"16\", md: \"24\" }}\r\n\t\t\t\t\tpaddingTop={{ base: \"16\", md: \"24\" }}\r\n\t\t\t\t\tpaddingBottom={{ base: \"64\", md: \"96\" }}>\r\n\t\t\t\t\t<Box gridColumn=\"1 / -1\">\r\n\t\t\t\t\t\t<Flex align=\"center\" justifyContent=\"space-between\">\r\n\t\t\t\t\t\t\t<Box wordBreak=\"break-word\" marginRight=\"16\">\r\n\t\t\t\t\t\t\t\t<H1>{eventData.eventTitle}</H1>\r\n\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t<Flex\r\n\t\t\t\t\t\t\t\tflexShrink={0}\r\n\t\t\t\t\t\t\t\tjustifySelf=\"end\"\r\n\t\t\t\t\t\t\t\talignSelf=\"center\"\r\n\t\t\t\t\t\t\t\twidth={{ base: \"74px\", sm: \"93px\" }}\r\n\t\t\t\t\t\t\t\tfontFamily=\"default\"\r\n\t\t\t\t\t\t\t\tfontSize=\"finePrint\"\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\t\t\t\trounded=\"chip\"\r\n\t\t\t\t\t\t\t\tbackgroundColor={isActive ? \"success\" : \"disabledBackground\"}\r\n\t\t\t\t\t\t\t\theight=\"32px\"\r\n\t\t\t\t\t\t\t\tcolor={isActive ? \"white\" : \"disabledButtonText\"}\r\n\t\t\t\t\t\t\t\tborder={isActive ? \"none\" : \"px\"}\r\n\t\t\t\t\t\t\t\tborderColor=\"disabledBorder\"\r\n\t\t\t\t\t\t\t\tpaddingY={0}>\r\n\t\t\t\t\t\t\t\t{isActive ? \"Active\" : \"Inactive\"}\r\n\t\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t</Flex>\r\n\t\t\t\t\t\t<Box marginTop=\"12\" display={{ md: \"none\" }}>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"eventTab\"\r\n\t\t\t\t\t\t\t\tname=\"eventTab\"\r\n\t\t\t\t\t\t\t\taria-label=\"Event Tab\"\r\n\t\t\t\t\t\t\t\toptions={eventTabs}\r\n\t\t\t\t\t\t\t\tsize=\"full\"\r\n\t\t\t\t\t\t\t\tonChange={changes => {\r\n\t\t\t\t\t\t\t\t\tsetSelectedTab(changes.selectedItem?.value as EventFormSections)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tvalue={selectedTab}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box marginTop=\"12\" display={{ base: \"none\", md: \"block\" }}>\r\n\t\t\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\t\t\tisActive={inOverview}\r\n\t\t\t\t\t\t\t\tonClick={() => setSelectedTab(\"overview\")}\r\n\t\t\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\t\t\tEvent Overview\r\n\t\t\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\t\t\tisActive={inLkl}\r\n\t\t\t\t\t\t\t\tonClick={() => setSelectedTab(\"locations\")}\r\n\t\t\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\t\t\tLast Known Locations\r\n\t\t\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\t\t\tisActive={inEvacuation}\r\n\t\t\t\t\t\t\t\tonClick={() => setSelectedTab(\"evacuation\")}\r\n\t\t\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\t\t\tEvacuation\r\n\t\t\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t\t\t<TabButton\r\n\t\t\t\t\t\t\t\tisActive={inAttachments}\r\n\t\t\t\t\t\t\t\tonClick={() => setSelectedTab(\"attachments\")}\r\n\t\t\t\t\t\t\t\tmarginRight={{ base: \"48\", xl: \"72\" }}>\r\n\t\t\t\t\t\t\t\tAttachments\r\n\t\t\t\t\t\t\t</TabButton>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box gridColumn=\"1 / -1\" marginTop={{ base: \"16\", md: \"-3px\" }} marginBottom=\"16\">\r\n\t\t\t\t\t\t\t<Divider borderColor=\"disabledDark\" marginY=\"2\" marginX={0} opacity={1} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t{inLkl ? (\r\n\t\t\t\t\t\t\t<LastKnownLocationTab eventData={currentEventData} setEventData={setEventData} />\r\n\t\t\t\t\t\t) : inEvacuation ? (\r\n\t\t\t\t\t\t\t<EvacDetailsTab eventData={eventData} />\r\n\t\t\t\t\t\t) : inAttachments ? (\r\n\t\t\t\t\t\t\t<AttachmentsTab eventData={eventData} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<OverviewTab eventData={eventData} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Box>\r\n\t\t</Flex>\r\n\t)\r\n}\r\n\r\ntype TabButtonProps = {\r\n\tonClick?: React.MouseEventHandler<HTMLButtonElement>\r\n\t/**\r\n\t * Indicates if tab is currently active\r\n\t */\r\n\tisActive?: boolean\r\n} & BoxProps\r\n\r\nconst TabButton: React.FC<TabButtonProps> = p => {\r\n\tconst { onClick, isActive, children, ...boxProps } = p\r\n\tconst theme = useTheme()\r\n\treturn (\r\n\t\t<PseudoBox\r\n\t\t\t{...boxProps}\r\n\t\t\tas=\"button\"\r\n\t\t\tdisplay=\"inline-flex\"\r\n\t\t\talignItems=\"flex-end\"\r\n\t\t\ttextAlign=\"center\"\r\n\t\t\tborder=\"none\"\r\n\t\t\tborderRadius={0}\r\n\t\t\tbackground=\"none\"\r\n\t\t\tp={0}\r\n\t\t\tfontFamily=\"body\"\r\n\t\t\tfontSize=\"base\"\r\n\t\t\tfontWeight=\"h4\"\r\n\t\t\tcolor=\"primary\"\r\n\t\t\tborderBottom=\"3\"\r\n\t\t\tborderColor={isActive ? \"accent\" : \"transparent\"}\r\n\t\t\tcursor=\"pointer\"\r\n\t\t\t_focus={{\r\n\t\t\t\t//@ts-ignore\r\n\t\t\t\toutline: `2px solid ${theme.colors.primary}`,\r\n\t\t\t}}\r\n\t\t\t_hover={{\r\n\t\t\t\toutline: \"none\",\r\n\t\t\t\tborderColor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t\tcolor: !isActive ? \"clickable\" : undefined,\r\n\t\t\t}}\r\n\t\t\tonClick={onClick}>\r\n\t\t\t<Box flex=\"1 1 0\" lineHeight=\"linkButton\">\r\n\t\t\t\t{children}\r\n\t\t\t</Box>\r\n\t\t</PseudoBox>\r\n\t)\r\n}\r\n\r\nexport default ViewEvent\r\n","import React from \"react\"\r\nimport moment from \"moment\"\r\nimport { getSavedForm } from \"../components/Utility/formHelpers\"\r\nimport { CTFFormProvider, CTFFormProviderProps } from \"../components/Forms/Form\"\r\nimport EventForm from \"../components/Forms/EventForm\"\r\nimport ViewEvent from \"../components/ViewEvent\"\r\n\r\nexport interface EventPageState {\r\n\teventId: string\r\n\tisEdit?: boolean\r\n\tformSection?: CTFFormProviderProps[\"formSection\"]\r\n}\r\n\r\ntype EventPageProps = {\r\n\teventId: string\r\n\tlocation: {\r\n\t\tstate: EventPageState\r\n\t}\r\n}\r\n\r\nconst EventPage: React.FC<EventPageProps> = (p: EventPageProps) => {\r\n\tlet savedEvent: EventFormData | undefined\r\n\tif (p.location?.state?.eventId) {\r\n\t\tconst savedEvents = getSavedForm<Array<EventFormData>>(\"ctfForms\", \"events\")\r\n\t\tsavedEvent = savedEvents && savedEvents.find((event: EventFormData) => event.eventId === p.location?.state?.eventId)\r\n\t\tif (savedEvent) {\r\n\t\t\tif (savedEvent.evacDepAuthDate) savedEvent.evacDepAuthDate = moment(savedEvent.evacDepAuthDate).toDate()\r\n\t\t\tif (savedEvent.evacDepOrdDate) savedEvent.evacDepOrdDate = moment(savedEvent.evacDepOrdDate).toDate()\r\n\t\t\tif (savedEvent.eventStartDate) savedEvent.eventStartDate = moment(savedEvent.eventStartDate).toDate()\r\n\t\t\tif (savedEvent.eventEndDate) savedEvent.eventEndDate = moment(savedEvent.eventEndDate).toDate()\r\n\t\t\tif (savedEvent.lastUpdatedDateTime) savedEvent.lastUpdatedDateTime = moment(savedEvent.lastUpdatedDateTime).toDate()\r\n\t\t}\r\n\t}\r\n\r\n\tconst formMode: CTFFormProviderProps[\"formMode\"] =\r\n\t\ttypeof savedEvent === \"undefined\" ? \"create\" : !p.location.state.isEdit ? \"view\" : \"edit\"\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{formMode === \"view\" ? (\r\n\t\t\t\t<ViewEvent savedEvent={savedEvent} />\r\n\t\t\t) : (\r\n\t\t\t\t<CTFFormProvider formMode={formMode} formSection={p.location.state?.formSection}>\r\n\t\t\t\t\t<EventForm savedEvent={savedEvent} />\r\n\t\t\t\t</CTFFormProvider>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventPage\r\n"],"sourceRoot":""}